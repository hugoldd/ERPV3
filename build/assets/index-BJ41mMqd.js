function sg(o,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in o)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(o,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();function ig(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function ag(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var r=o.default;if(typeof r=="function"){var n=function a(){return this instanceof a?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var c=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return o[a]}})}),n}var sl={exports:{}},ys={},il={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd;function og(){if(Hd)return xe;Hd=1;var o=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),j=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=j&&P[j]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function E(P,z,ye){this.props=P,this.context=z,this.refs=C,this.updater=ye||b}E.prototype.isReactComponent={},E.prototype.setState=function(P,z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,z,"setState")},E.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=E.prototype;function I(P,z,ye){this.props=P,this.context=z,this.refs=C,this.updater=ye||b}var D=I.prototype=new T;D.constructor=I,S(D,E.prototype),D.isPureReactComponent=!0;var U=Array.isArray,$=Object.prototype.hasOwnProperty,F={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function te(P,z,ye){var W,ve={},we=null,ke=null;if(z!=null)for(W in z.ref!==void 0&&(ke=z.ref),z.key!==void 0&&(we=""+z.key),z)$.call(z,W)&&!L.hasOwnProperty(W)&&(ve[W]=z[W]);var Ne=arguments.length-2;if(Ne===1)ve.children=ye;else if(1<Ne){for(var Re=Array(Ne),pt=0;pt<Ne;pt++)Re[pt]=arguments[pt+2];ve.children=Re}if(P&&P.defaultProps)for(W in Ne=P.defaultProps,Ne)ve[W]===void 0&&(ve[W]=Ne[W]);return{$$typeof:o,type:P,key:we,ref:ke,props:ve,_owner:F.current}}function H(P,z){return{$$typeof:o,type:P.type,key:z,ref:P.ref,props:P.props,_owner:P._owner}}function X(P){return typeof P=="object"&&P!==null&&P.$$typeof===o}function ee(P){var z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ye){return z[ye]})}var G=/\/+/g;function J(P,z){return typeof P=="object"&&P!==null&&P.key!=null?ee(""+P.key):z.toString(36)}function de(P,z,ye,W,ve){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var ke=!1;if(P===null)ke=!0;else switch(we){case"string":case"number":ke=!0;break;case"object":switch(P.$$typeof){case o:case r:ke=!0}}if(ke)return ke=P,ve=ve(ke),P=W===""?"."+J(ke,0):W,U(ve)?(ye="",P!=null&&(ye=P.replace(G,"$&/")+"/"),de(ve,z,ye,"",function(pt){return pt})):ve!=null&&(X(ve)&&(ve=H(ve,ye+(!ve.key||ke&&ke.key===ve.key?"":(""+ve.key).replace(G,"$&/")+"/")+P)),z.push(ve)),1;if(ke=0,W=W===""?".":W+":",U(P))for(var Ne=0;Ne<P.length;Ne++){we=P[Ne];var Re=W+J(we,Ne);ke+=de(we,z,ye,Re,ve)}else if(Re=w(P),typeof Re=="function")for(P=Re.call(P),Ne=0;!(we=P.next()).done;)we=we.value,Re=W+J(we,Ne++),ke+=de(we,z,ye,Re,ve);else if(we==="object")throw z=String(P),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ke}function je(P,z,ye){if(P==null)return P;var W=[],ve=0;return de(P,W,"","",function(we){return z.call(ye,we,ve++)}),W}function ue(P){if(P._status===-1){var z=P._result;z=z(),z.then(function(ye){(P._status===0||P._status===-1)&&(P._status=1,P._result=ye)},function(ye){(P._status===0||P._status===-1)&&(P._status=2,P._result=ye)}),P._status===-1&&(P._status=0,P._result=z)}if(P._status===1)return P._result.default;throw P._result}var Q={current:null},M={transition:null},ae={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:M,ReactCurrentOwner:F};function Y(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:je,forEach:function(P,z,ye){je(P,function(){z.apply(this,arguments)},ye)},count:function(P){var z=0;return je(P,function(){z++}),z},toArray:function(P){return je(P,function(z){return z})||[]},only:function(P){if(!X(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},xe.Component=E,xe.Fragment=n,xe.Profiler=c,xe.PureComponent=I,xe.StrictMode=a,xe.Suspense=m,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,xe.act=Y,xe.cloneElement=function(P,z,ye){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var W=S({},P.props),ve=P.key,we=P.ref,ke=P._owner;if(z!=null){if(z.ref!==void 0&&(we=z.ref,ke=F.current),z.key!==void 0&&(ve=""+z.key),P.type&&P.type.defaultProps)var Ne=P.type.defaultProps;for(Re in z)$.call(z,Re)&&!L.hasOwnProperty(Re)&&(W[Re]=z[Re]===void 0&&Ne!==void 0?Ne[Re]:z[Re])}var Re=arguments.length-2;if(Re===1)W.children=ye;else if(1<Re){Ne=Array(Re);for(var pt=0;pt<Re;pt++)Ne[pt]=arguments[pt+2];W.children=Ne}return{$$typeof:o,type:P.type,key:ve,ref:we,props:W,_owner:ke}},xe.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:u,_context:P},P.Consumer=P},xe.createElement=te,xe.createFactory=function(P){var z=te.bind(null,P);return z.type=P,z},xe.createRef=function(){return{current:null}},xe.forwardRef=function(P){return{$$typeof:p,render:P}},xe.isValidElement=X,xe.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ue}},xe.memo=function(P,z){return{$$typeof:g,type:P,compare:z===void 0?null:z}},xe.startTransition=function(P){var z=M.transition;M.transition={};try{P()}finally{M.transition=z}},xe.unstable_act=Y,xe.useCallback=function(P,z){return Q.current.useCallback(P,z)},xe.useContext=function(P){return Q.current.useContext(P)},xe.useDebugValue=function(){},xe.useDeferredValue=function(P){return Q.current.useDeferredValue(P)},xe.useEffect=function(P,z){return Q.current.useEffect(P,z)},xe.useId=function(){return Q.current.useId()},xe.useImperativeHandle=function(P,z,ye){return Q.current.useImperativeHandle(P,z,ye)},xe.useInsertionEffect=function(P,z){return Q.current.useInsertionEffect(P,z)},xe.useLayoutEffect=function(P,z){return Q.current.useLayoutEffect(P,z)},xe.useMemo=function(P,z){return Q.current.useMemo(P,z)},xe.useReducer=function(P,z,ye){return Q.current.useReducer(P,z,ye)},xe.useRef=function(P){return Q.current.useRef(P)},xe.useState=function(P){return Q.current.useState(P)},xe.useSyncExternalStore=function(P,z,ye){return Q.current.useSyncExternalStore(P,z,ye)},xe.useTransition=function(){return Q.current.useTransition()},xe.version="18.3.1",xe}var Wd;function Il(){return Wd||(Wd=1,il.exports=og()),il.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd;function lg(){if(Kd)return ys;Kd=1;var o=Il(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,g){var v,j={},w=null,b=null;g!==void 0&&(w=""+g),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(b=m.ref);for(v in m)a.call(m,v)&&!u.hasOwnProperty(v)&&(j[v]=m[v]);if(p&&p.defaultProps)for(v in m=p.defaultProps,m)j[v]===void 0&&(j[v]=m[v]);return{$$typeof:r,type:p,key:w,ref:b,props:j,_owner:c.current}}return ys.Fragment=n,ys.jsx=h,ys.jsxs=h,ys}var Gd;function cg(){return Gd||(Gd=1,sl.exports=lg()),sl.exports}var s=cg(),$i={},al={exports:{}},ht={},ol={exports:{}},ll={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function ug(){return Jd||(Jd=1,(function(o){function r(M,ae){var Y=M.length;M.push(ae);e:for(;0<Y;){var P=Y-1>>>1,z=M[P];if(0<c(z,ae))M[P]=ae,M[Y]=z,Y=P;else break e}}function n(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var ae=M[0],Y=M.pop();if(Y!==ae){M[0]=Y;e:for(var P=0,z=M.length,ye=z>>>1;P<ye;){var W=2*(P+1)-1,ve=M[W],we=W+1,ke=M[we];if(0>c(ve,Y))we<z&&0>c(ke,ve)?(M[P]=ke,M[we]=Y,P=we):(M[P]=ve,M[W]=Y,P=W);else if(we<z&&0>c(ke,Y))M[P]=ke,M[we]=Y,P=we;else break e}}return ae}function c(M,ae){var Y=M.sortIndex-ae.sortIndex;return Y!==0?Y:M.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();o.unstable_now=function(){return h.now()-p}}var m=[],g=[],v=1,j=null,w=3,b=!1,S=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(M){for(var ae=n(g);ae!==null;){if(ae.callback===null)a(g);else if(ae.startTime<=M)a(g),ae.sortIndex=ae.expirationTime,r(m,ae);else break;ae=n(g)}}function U(M){if(C=!1,D(M),!S)if(n(m)!==null)S=!0,ue($);else{var ae=n(g);ae!==null&&Q(U,ae.startTime-M)}}function $(M,ae){S=!1,C&&(C=!1,T(te),te=-1),b=!0;var Y=w;try{for(D(ae),j=n(m);j!==null&&(!(j.expirationTime>ae)||M&&!ee());){var P=j.callback;if(typeof P=="function"){j.callback=null,w=j.priorityLevel;var z=P(j.expirationTime<=ae);ae=o.unstable_now(),typeof z=="function"?j.callback=z:j===n(m)&&a(m),D(ae)}else a(m);j=n(m)}if(j!==null)var ye=!0;else{var W=n(g);W!==null&&Q(U,W.startTime-ae),ye=!1}return ye}finally{j=null,w=Y,b=!1}}var F=!1,L=null,te=-1,H=5,X=-1;function ee(){return!(o.unstable_now()-X<H)}function G(){if(L!==null){var M=o.unstable_now();X=M;var ae=!0;try{ae=L(!0,M)}finally{ae?J():(F=!1,L=null)}}else F=!1}var J;if(typeof I=="function")J=function(){I(G)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,je=de.port2;de.port1.onmessage=G,J=function(){je.postMessage(null)}}else J=function(){E(G,0)};function ue(M){L=M,F||(F=!0,J())}function Q(M,ae){te=E(function(){M(o.unstable_now())},ae)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(M){M.callback=null},o.unstable_continueExecution=function(){S||b||(S=!0,ue($))},o.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<M?Math.floor(1e3/M):5},o.unstable_getCurrentPriorityLevel=function(){return w},o.unstable_getFirstCallbackNode=function(){return n(m)},o.unstable_next=function(M){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var Y=w;w=ae;try{return M()}finally{w=Y}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(M,ae){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=w;w=M;try{return ae()}finally{w=Y}},o.unstable_scheduleCallback=function(M,ae,Y){var P=o.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?P+Y:P):Y=P,M){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Y+z,M={id:v++,callback:ae,priorityLevel:M,startTime:Y,expirationTime:z,sortIndex:-1},Y>P?(M.sortIndex=Y,r(g,M),n(m)===null&&M===n(g)&&(C?(T(te),te=-1):C=!0,Q(U,Y-P))):(M.sortIndex=z,r(m,M),S||b||(S=!0,ue($))),M},o.unstable_shouldYield=ee,o.unstable_wrapCallback=function(M){var ae=w;return function(){var Y=w;w=ae;try{return M.apply(this,arguments)}finally{w=Y}}}})(ll)),ll}var Qd;function dg(){return Qd||(Qd=1,ol.exports=ug()),ol.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function hg(){if(Yd)return ht;Yd=1;var o=Il(),r=dg();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},j={};function w(e){return m.call(j,e)?!0:m.call(v,e)?!1:g.test(e)?j[e]=!0:(v[e]=!0,!1)}function b(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,i,l){if(t===null||typeof t>"u"||b(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,i,l,d,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(T,I);E[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(T,I);E[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(T,I);E[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function D(e,t,i,l){var d=E.hasOwnProperty(t)?E[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,i,d,l)&&(i=null),l||d===null?w(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,l=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var U=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),F=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),ee=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),M=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Object.assign,P;function z(e){if(P===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return`
`+P+e}var ye=!1;function W(e,t){if(!e||ye)return"";ye=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(A){var l=A}Reflect.construct(e,[],t)}else{try{t.call()}catch(A){l=A}e.call(t.prototype)}else{try{throw Error()}catch(A){l=A}e()}}catch(A){if(A&&l&&typeof A.stack=="string"){for(var d=A.stack.split(`
`),f=l.stack.split(`
`),y=d.length-1,x=f.length-1;1<=y&&0<=x&&d[y]!==f[x];)x--;for(;1<=y&&0<=x;y--,x--)if(d[y]!==f[x]){if(y!==1||x!==1)do if(y--,x--,0>x||d[y]!==f[x]){var N=`
`+d[y].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=y&&0<=x);break}}}finally{ye=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?z(e):""}function ve(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1),e;case 11:return e=W(e.type.render,!1),e;case 1:return e=W(e.type,!0),e;default:return""}}function we(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case F:return"Portal";case H:return"Profiler";case te:return"StrictMode";case J:return"Suspense";case de:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ee:return(e.displayName||"Context")+".Consumer";case X:return(e._context.displayName||"Context")+".Provider";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case je:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case ue:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}function ke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ne(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Re(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pt(e){var t=Re(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){l=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ks(e){e._valueTracker||(e._valueTracker=pt(e))}function Yl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Re(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ua(e,t){var i=t.checked;return Y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Xl(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=Ne(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zl(e,t){t=t.checked,t!=null&&D(e,"checked",t,!1)}function da(e,t){Zl(e,t);var i=Ne(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ha(e,t.type,i):t.hasOwnProperty("defaultValue")&&ha(e,t.type,Ne(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ec(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function ha(e,t,i){(t!=="number"||Es(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var On=Array.isArray;function Wr(e,t,i,l){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Ne(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function fa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tc(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(n(92));if(On(i)){if(1<i.length)throw Error(n(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ne(i)}}function rc(e,t){var i=Ne(t.value),l=Ne(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function nc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cs,ic=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cs=Cs||document.createElement("div"),Cs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function An(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lp=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(e){lp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function ac(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function oc(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,d=ac(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,d):e[i]=d}}var cp=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ma(e,t){if(t){if(cp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function ga(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ya=null;function va(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xa=null,Kr=null,Gr=null;function lc(e){if(e=rs(e)){if(typeof xa!="function")throw Error(n(280));var t=e.stateNode;t&&(t=Ys(t),xa(e.stateNode,e.type,t))}}function cc(e){Kr?Gr?Gr.push(e):Gr=[e]:Kr=e}function uc(){if(Kr){var e=Kr,t=Gr;if(Gr=Kr=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function dc(e,t){return e(t)}function hc(){}var wa=!1;function fc(e,t,i){if(wa)return e(t,i);wa=!0;try{return dc(e,t,i)}finally{wa=!1,(Kr!==null||Gr!==null)&&(hc(),uc())}}function Dn(e,t){var i=e.stateNode;if(i===null)return null;var l=Ys(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,t,typeof i));return i}var ba=!1;if(p)try{var $n={};Object.defineProperty($n,"passive",{get:function(){ba=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{ba=!1}function up(e,t,i,l,d,f,y,x,N){var A=Array.prototype.slice.call(arguments,3);try{t.apply(i,A)}catch(q){this.onError(q)}}var Ln=!1,Ts=null,Ps=!1,ja=null,dp={onError:function(e){Ln=!0,Ts=e}};function hp(e,t,i,l,d,f,y,x,N){Ln=!1,Ts=null,up.apply(dp,arguments)}function fp(e,t,i,l,d,f,y,x,N){if(hp.apply(this,arguments),Ln){if(Ln){var A=Ts;Ln=!1,Ts=null}else throw Error(n(198));Ps||(Ps=!0,ja=A)}}function _r(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function pc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mc(e){if(_r(e)!==e)throw Error(n(188))}function pp(e){var t=e.alternate;if(!t){if(t=_r(e),t===null)throw Error(n(188));return t!==e?null:e}for(var i=e,l=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return mc(d),e;if(f===l)return mc(d),t;f=f.sibling}throw Error(n(188))}if(i.return!==l.return)i=d,l=f;else{for(var y=!1,x=d.child;x;){if(x===i){y=!0,i=d,l=f;break}if(x===l){y=!0,l=d,i=f;break}x=x.sibling}if(!y){for(x=f.child;x;){if(x===i){y=!0,i=f,l=d;break}if(x===l){y=!0,l=f,i=d;break}x=x.sibling}if(!y)throw Error(n(189))}}if(i.alternate!==l)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:t}function gc(e){return e=pp(e),e!==null?yc(e):null}function yc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yc(e);if(t!==null)return t;e=e.sibling}return null}var vc=r.unstable_scheduleCallback,xc=r.unstable_cancelCallback,mp=r.unstable_shouldYield,gp=r.unstable_requestPaint,Le=r.unstable_now,yp=r.unstable_getCurrentPriorityLevel,_a=r.unstable_ImmediatePriority,wc=r.unstable_UserBlockingPriority,Rs=r.unstable_NormalPriority,vp=r.unstable_LowPriority,bc=r.unstable_IdlePriority,Os=null,Mt=null;function xp(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Os,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:jp,wp=Math.log,bp=Math.LN2;function jp(e){return e>>>=0,e===0?32:31-(wp(e)/bp|0)|0}var As=64,Is=4194304;function Mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ds(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,y=i&268435455;if(y!==0){var x=y&~d;x!==0?l=Mn(x):(f&=y,f!==0&&(l=Mn(f)))}else y=i&~d,y!==0?l=Mn(y):f!==0&&(l=Mn(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-Ct(t),d=1<<i,l|=e[i],t&=~d;return l}function _p(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Np(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Ct(f),x=1<<y,N=d[y];N===-1?((x&i)===0||(x&l)!==0)&&(d[y]=_p(x,t)):N<=t&&(e.expiredLanes|=x),f&=~x}}function Na(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jc(){var e=As;return As<<=1,(As&4194240)===0&&(As=64),e}function Sa(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Un(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=i}function Sp(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-Ct(i),f=1<<d;t[d]=0,l[d]=-1,e[d]=-1,i&=~f}}function ka(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Ct(i),d=1<<l;d&t|e[l]&t&&(e[l]|=t),i&=~d}}var Se=0;function _c(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Nc,Ea,Sc,kc,Ec,Ca=!1,$s=[],tr=null,rr=null,nr=null,zn=new Map,Fn=new Map,sr=[],kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cc(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function Bn(e,t,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=rs(t),t!==null&&Ea(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Ep(e,t,i,l,d){switch(t){case"focusin":return tr=Bn(tr,e,t,i,l,d),!0;case"dragenter":return rr=Bn(rr,e,t,i,l,d),!0;case"mouseover":return nr=Bn(nr,e,t,i,l,d),!0;case"pointerover":var f=d.pointerId;return zn.set(f,Bn(zn.get(f)||null,e,t,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Fn.set(f,Bn(Fn.get(f)||null,e,t,i,l,d)),!0}return!1}function Tc(e){var t=Nr(e.target);if(t!==null){var i=_r(t);if(i!==null){if(t=i.tag,t===13){if(t=pc(i),t!==null){e.blockedOn=t,Ec(e.priority,function(){Sc(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ls(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Pa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);ya=l,i.target.dispatchEvent(l),ya=null}else return t=rs(i),t!==null&&Ea(t),e.blockedOn=i,!1;t.shift()}return!0}function Pc(e,t,i){Ls(e)&&i.delete(t)}function Cp(){Ca=!1,tr!==null&&Ls(tr)&&(tr=null),rr!==null&&Ls(rr)&&(rr=null),nr!==null&&Ls(nr)&&(nr=null),zn.forEach(Pc),Fn.forEach(Pc)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ca||(Ca=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Cp)))}function Vn(e){function t(d){return qn(d,e)}if(0<$s.length){qn($s[0],e);for(var i=1;i<$s.length;i++){var l=$s[i];l.blockedOn===e&&(l.blockedOn=null)}}for(tr!==null&&qn(tr,e),rr!==null&&qn(rr,e),nr!==null&&qn(nr,e),zn.forEach(t),Fn.forEach(t),i=0;i<sr.length;i++)l=sr[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<sr.length&&(i=sr[0],i.blockedOn===null);)Tc(i),i.blockedOn===null&&sr.shift()}var Jr=U.ReactCurrentBatchConfig,Ms=!0;function Tp(e,t,i,l){var d=Se,f=Jr.transition;Jr.transition=null;try{Se=1,Ta(e,t,i,l)}finally{Se=d,Jr.transition=f}}function Pp(e,t,i,l){var d=Se,f=Jr.transition;Jr.transition=null;try{Se=4,Ta(e,t,i,l)}finally{Se=d,Jr.transition=f}}function Ta(e,t,i,l){if(Ms){var d=Pa(e,t,i,l);if(d===null)Ka(e,t,l,Us,i),Cc(e,l);else if(Ep(d,e,t,i,l))l.stopPropagation();else if(Cc(e,l),t&4&&-1<kp.indexOf(e)){for(;d!==null;){var f=rs(d);if(f!==null&&Nc(f),f=Pa(e,t,i,l),f===null&&Ka(e,t,l,Us,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else Ka(e,t,l,null,i)}}var Us=null;function Pa(e,t,i,l){if(Us=null,e=va(l),e=Nr(e),e!==null)if(t=_r(e),t===null)e=null;else if(i=t.tag,i===13){if(e=pc(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Us=e,null}function Rc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yp()){case _a:return 1;case wc:return 4;case Rs:case vp:return 16;case bc:return 536870912;default:return 16}default:return 16}}var ir=null,Ra=null,zs=null;function Oc(){if(zs)return zs;var e,t=Ra,i=t.length,l,d="value"in ir?ir.value:ir.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var y=i-e;for(l=1;l<=y&&t[i-l]===d[f-l];l++);return zs=d.slice(e,1<l?1-l:void 0)}function Fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bs(){return!0}function Ac(){return!1}function mt(e){function t(i,l,d,f,y){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(i=e[x],this[x]=i?i(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Bs:Ac,this.isPropagationStopped=Ac,this}return Y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oa=mt(Qr),Hn=Y({},Qr,{view:0,detail:0}),Rp=mt(Hn),Aa,Ia,Wn,qs=Y({},Hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(Aa=e.screenX-Wn.screenX,Ia=e.screenY-Wn.screenY):Ia=Aa=0,Wn=e),Aa)},movementY:function(e){return"movementY"in e?e.movementY:Ia}}),Ic=mt(qs),Op=Y({},qs,{dataTransfer:0}),Ap=mt(Op),Ip=Y({},Hn,{relatedTarget:0}),Da=mt(Ip),Dp=Y({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),$p=mt(Dp),Lp=Y({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mp=mt(Lp),Up=Y({},Qr,{data:0}),Dc=mt(Up),zp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bp[e])?!!t[e]:!1}function $a(){return qp}var Vp=Y({},Hn,{key:function(e){if(e.key){var t=zp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(e){return e.type==="keypress"?Fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hp=mt(Vp),Wp=Y({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=mt(Wp),Kp=Y({},Hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),Gp=mt(Kp),Jp=Y({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qp=mt(Jp),Yp=Y({},qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=mt(Yp),Zp=[9,13,27,32],La=p&&"CompositionEvent"in window,Kn=null;p&&"documentMode"in document&&(Kn=document.documentMode);var em=p&&"TextEvent"in window&&!Kn,Lc=p&&(!La||Kn&&8<Kn&&11>=Kn),Mc=" ",Uc=!1;function zc(e,t){switch(e){case"keyup":return Zp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function tm(e,t){switch(e){case"compositionend":return Fc(t);case"keypress":return t.which!==32?null:(Uc=!0,Mc);case"textInput":return e=t.data,e===Mc&&Uc?null:e;default:return null}}function rm(e,t){if(Yr)return e==="compositionend"||!La&&zc(e,t)?(e=Oc(),zs=Ra=ir=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lc&&t.locale!=="ko"?null:t.data;default:return null}}var nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nm[e.type]:t==="textarea"}function qc(e,t,i,l){cc(l),t=Gs(t,"onChange"),0<t.length&&(i=new Oa("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Gn=null,Jn=null;function sm(e){ou(e,0)}function Vs(e){var t=rn(e);if(Yl(t))return e}function im(e,t){if(e==="change")return t}var Vc=!1;if(p){var Ma;if(p){var Ua="oninput"in document;if(!Ua){var Hc=document.createElement("div");Hc.setAttribute("oninput","return;"),Ua=typeof Hc.oninput=="function"}Ma=Ua}else Ma=!1;Vc=Ma&&(!document.documentMode||9<document.documentMode)}function Wc(){Gn&&(Gn.detachEvent("onpropertychange",Kc),Jn=Gn=null)}function Kc(e){if(e.propertyName==="value"&&Vs(Jn)){var t=[];qc(t,Jn,e,va(e)),fc(sm,t)}}function am(e,t,i){e==="focusin"?(Wc(),Gn=t,Jn=i,Gn.attachEvent("onpropertychange",Kc)):e==="focusout"&&Wc()}function om(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vs(Jn)}function lm(e,t){if(e==="click")return Vs(t)}function cm(e,t){if(e==="input"||e==="change")return Vs(t)}function um(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:um;function Qn(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!m.call(t,d)||!Tt(e[d],t[d]))return!1}return!0}function Gc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jc(e,t){var i=Gc(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Gc(i)}}function Qc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yc(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Es(e.document)}return t}function za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dm(e){var t=Yc(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&Qc(i.ownerDocument.documentElement,i)){if(l!==null&&za(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=Jc(i,f);var y=Jc(i,l);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hm=p&&"documentMode"in document&&11>=document.documentMode,Xr=null,Fa=null,Yn=null,Ba=!1;function Xc(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ba||Xr==null||Xr!==Es(l)||(l=Xr,"selectionStart"in l&&za(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yn&&Qn(Yn,l)||(Yn=l,l=Gs(Fa,"onSelect"),0<l.length&&(t=new Oa("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Xr)))}function Hs(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Zr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},qa={},Zc={};p&&(Zc=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Ws(e){if(qa[e])return qa[e];if(!Zr[e])return e;var t=Zr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Zc)return qa[e]=t[i];return e}var eu=Ws("animationend"),tu=Ws("animationiteration"),ru=Ws("animationstart"),nu=Ws("transitionend"),su=new Map,iu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,t){su.set(e,t),u(t,[e])}for(var Va=0;Va<iu.length;Va++){var Ha=iu[Va],fm=Ha.toLowerCase(),pm=Ha[0].toUpperCase()+Ha.slice(1);ar(fm,"on"+pm)}ar(eu,"onAnimationEnd"),ar(tu,"onAnimationIteration"),ar(ru,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(nu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xn));function au(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,fp(l,t,void 0,e),e.currentTarget=null}function ou(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var y=l.length-1;0<=y;y--){var x=l[y],N=x.instance,A=x.currentTarget;if(x=x.listener,N!==f&&d.isPropagationStopped())break e;au(d,x,A),f=N}else for(y=0;y<l.length;y++){if(x=l[y],N=x.instance,A=x.currentTarget,x=x.listener,N!==f&&d.isPropagationStopped())break e;au(d,x,A),f=N}}}if(Ps)throw e=ja,Ps=!1,ja=null,e}function Te(e,t){var i=t[Za];i===void 0&&(i=t[Za]=new Set);var l=e+"__bubble";i.has(l)||(lu(t,e,2,!1),i.add(l))}function Wa(e,t,i){var l=0;t&&(l|=4),lu(i,e,l,t)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function Zn(e){if(!e[Ks]){e[Ks]=!0,a.forEach(function(i){i!=="selectionchange"&&(mm.has(i)||Wa(i,!1,e),Wa(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ks]||(t[Ks]=!0,Wa("selectionchange",!1,t))}}function lu(e,t,i,l){switch(Rc(t)){case 1:var d=Tp;break;case 4:d=Pp;break;default:d=Ta}i=d.bind(null,t,i,e),d=void 0,!ba||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function Ka(e,t,i,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var x=l.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(y===4)for(y=l.return;y!==null;){var N=y.tag;if((N===3||N===4)&&(N=y.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;y=y.return}for(;x!==null;){if(y=Nr(x),y===null)return;if(N=y.tag,N===5||N===6){l=f=y;continue e}x=x.parentNode}}l=l.return}fc(function(){var A=f,q=va(i),V=[];e:{var B=su.get(e);if(B!==void 0){var Z=Oa,se=e;switch(e){case"keypress":if(Fs(i)===0)break e;case"keydown":case"keyup":Z=Hp;break;case"focusin":se="focus",Z=Da;break;case"focusout":se="blur",Z=Da;break;case"beforeblur":case"afterblur":Z=Da;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Gp;break;case eu:case tu:case ru:Z=$p;break;case nu:Z=Qp;break;case"scroll":Z=Rp;break;case"wheel":Z=Xp;break;case"copy":case"cut":case"paste":Z=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=$c}var ie=(t&4)!==0,Me=!ie&&e==="scroll",R=ie?B!==null?B+"Capture":null:B;ie=[];for(var k=A,O;k!==null;){O=k;var K=O.stateNode;if(O.tag===5&&K!==null&&(O=K,R!==null&&(K=Dn(k,R),K!=null&&ie.push(es(k,K,O)))),Me)break;k=k.return}0<ie.length&&(B=new Z(B,se,null,i,q),V.push({event:B,listeners:ie}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",B&&i!==ya&&(se=i.relatedTarget||i.fromElement)&&(Nr(se)||se[Wt]))break e;if((Z||B)&&(B=q.window===q?q:(B=q.ownerDocument)?B.defaultView||B.parentWindow:window,Z?(se=i.relatedTarget||i.toElement,Z=A,se=se?Nr(se):null,se!==null&&(Me=_r(se),se!==Me||se.tag!==5&&se.tag!==6)&&(se=null)):(Z=null,se=A),Z!==se)){if(ie=Ic,K="onMouseLeave",R="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ie=$c,K="onPointerLeave",R="onPointerEnter",k="pointer"),Me=Z==null?B:rn(Z),O=se==null?B:rn(se),B=new ie(K,k+"leave",Z,i,q),B.target=Me,B.relatedTarget=O,K=null,Nr(q)===A&&(ie=new ie(R,k+"enter",se,i,q),ie.target=O,ie.relatedTarget=Me,K=ie),Me=K,Z&&se)t:{for(ie=Z,R=se,k=0,O=ie;O;O=en(O))k++;for(O=0,K=R;K;K=en(K))O++;for(;0<k-O;)ie=en(ie),k--;for(;0<O-k;)R=en(R),O--;for(;k--;){if(ie===R||R!==null&&ie===R.alternate)break t;ie=en(ie),R=en(R)}ie=null}else ie=null;Z!==null&&cu(V,B,Z,ie,!1),se!==null&&Me!==null&&cu(V,Me,se,ie,!0)}}e:{if(B=A?rn(A):window,Z=B.nodeName&&B.nodeName.toLowerCase(),Z==="select"||Z==="input"&&B.type==="file")var ce=im;else if(Bc(B))if(Vc)ce=cm;else{ce=om;var he=am}else(Z=B.nodeName)&&Z.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ce=lm);if(ce&&(ce=ce(e,A))){qc(V,ce,i,q);break e}he&&he(e,B,A),e==="focusout"&&(he=B._wrapperState)&&he.controlled&&B.type==="number"&&ha(B,"number",B.value)}switch(he=A?rn(A):window,e){case"focusin":(Bc(he)||he.contentEditable==="true")&&(Xr=he,Fa=A,Yn=null);break;case"focusout":Yn=Fa=Xr=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,Xc(V,i,q);break;case"selectionchange":if(hm)break;case"keydown":case"keyup":Xc(V,i,q)}var fe;if(La)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Yr?zc(e,i)&&(ge="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ge="onCompositionStart");ge&&(Lc&&i.locale!=="ko"&&(Yr||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Yr&&(fe=Oc()):(ir=q,Ra="value"in ir?ir.value:ir.textContent,Yr=!0)),he=Gs(A,ge),0<he.length&&(ge=new Dc(ge,e,null,i,q),V.push({event:ge,listeners:he}),fe?ge.data=fe:(fe=Fc(i),fe!==null&&(ge.data=fe)))),(fe=em?tm(e,i):rm(e,i))&&(A=Gs(A,"onBeforeInput"),0<A.length&&(q=new Dc("onBeforeInput","beforeinput",null,i,q),V.push({event:q,listeners:A}),q.data=fe))}ou(V,t)})}function es(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Gs(e,t){for(var i=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Dn(e,i),f!=null&&l.unshift(es(e,f,d)),f=Dn(e,t),f!=null&&l.push(es(e,f,d))),e=e.return}return l}function en(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cu(e,t,i,l,d){for(var f=t._reactName,y=[];i!==null&&i!==l;){var x=i,N=x.alternate,A=x.stateNode;if(N!==null&&N===l)break;x.tag===5&&A!==null&&(x=A,d?(N=Dn(i,f),N!=null&&y.unshift(es(i,N,x))):d||(N=Dn(i,f),N!=null&&y.push(es(i,N,x)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var gm=/\r\n?/g,ym=/\u0000|\uFFFD/g;function uu(e){return(typeof e=="string"?e:""+e).replace(gm,`
`).replace(ym,"")}function Js(e,t,i){if(t=uu(t),uu(e)!==t&&i)throw Error(n(425))}function Qs(){}var Ga=null,Ja=null;function Qa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,vm=typeof clearTimeout=="function"?clearTimeout:void 0,du=typeof Promise=="function"?Promise:void 0,xm=typeof queueMicrotask=="function"?queueMicrotask:typeof du<"u"?function(e){return du.resolve(null).then(e).catch(wm)}:Ya;function wm(e){setTimeout(function(){throw e})}function Xa(e,t){var i=t,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(l===0){e.removeChild(d),Vn(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=d}while(i);Vn(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var tn=Math.random().toString(36).slice(2),Ut="__reactFiber$"+tn,ts="__reactProps$"+tn,Wt="__reactContainer$"+tn,Za="__reactEvents$"+tn,bm="__reactListeners$"+tn,jm="__reactHandles$"+tn;function Nr(e){var t=e[Ut];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Wt]||i[Ut]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=hu(e);e!==null;){if(i=e[Ut])return i;e=hu(e)}return t}e=i,i=e.parentNode}return null}function rs(e){return e=e[Ut]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Ys(e){return e[ts]||null}var eo=[],nn=-1;function lr(e){return{current:e}}function Pe(e){0>nn||(e.current=eo[nn],eo[nn]=null,nn--)}function Ee(e,t){nn++,eo[nn]=e.current,e.current=t}var cr={},Ze=lr(cr),ot=lr(!1),Sr=cr;function sn(e,t){var i=e.type.contextTypes;if(!i)return cr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in i)d[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function lt(e){return e=e.childContextTypes,e!=null}function Xs(){Pe(ot),Pe(Ze)}function fu(e,t,i){if(Ze.current!==cr)throw Error(n(168));Ee(Ze,t),Ee(ot,i)}function pu(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(n(108,ke(e)||"Unknown",d));return Y({},i,l)}function Zs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,Sr=Ze.current,Ee(Ze,e),Ee(ot,ot.current),!0}function mu(e,t,i){var l=e.stateNode;if(!l)throw Error(n(169));i?(e=pu(e,t,Sr),l.__reactInternalMemoizedMergedChildContext=e,Pe(ot),Pe(Ze),Ee(Ze,e)):Pe(ot),Ee(ot,i)}var Kt=null,ei=!1,to=!1;function gu(e){Kt===null?Kt=[e]:Kt.push(e)}function _m(e){ei=!0,gu(e)}function ur(){if(!to&&Kt!==null){to=!0;var e=0,t=Se;try{var i=Kt;for(Se=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Kt=null,ei=!1}catch(d){throw Kt!==null&&(Kt=Kt.slice(e+1)),vc(_a,ur),d}finally{Se=t,to=!1}}return null}var an=[],on=0,ti=null,ri=0,bt=[],jt=0,kr=null,Gt=1,Jt="";function Er(e,t){an[on++]=ri,an[on++]=ti,ti=e,ri=t}function yu(e,t,i){bt[jt++]=Gt,bt[jt++]=Jt,bt[jt++]=kr,kr=e;var l=Gt;e=Jt;var d=32-Ct(l)-1;l&=~(1<<d),i+=1;var f=32-Ct(t)+d;if(30<f){var y=d-d%5;f=(l&(1<<y)-1).toString(32),l>>=y,d-=y,Gt=1<<32-Ct(t)+d|i<<d|l,Jt=f+e}else Gt=1<<f|i<<d|l,Jt=e}function ro(e){e.return!==null&&(Er(e,1),yu(e,1,0))}function no(e){for(;e===ti;)ti=an[--on],an[on]=null,ri=an[--on],an[on]=null;for(;e===kr;)kr=bt[--jt],bt[jt]=null,Jt=bt[--jt],bt[jt]=null,Gt=bt[--jt],bt[jt]=null}var gt=null,yt=null,Oe=!1,Pt=null;function vu(e,t){var i=kt(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function xu(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,yt=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=kr!==null?{id:Gt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=kt(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,gt=e,yt=null,!0):!1;default:return!1}}function so(e){return(e.mode&1)!==0&&(e.flags&128)===0}function io(e){if(Oe){var t=yt;if(t){var i=t;if(!xu(e,t)){if(so(e))throw Error(n(418));t=or(i.nextSibling);var l=gt;t&&xu(e,t)?vu(l,i):(e.flags=e.flags&-4097|2,Oe=!1,gt=e)}}else{if(so(e))throw Error(n(418));e.flags=e.flags&-4097|2,Oe=!1,gt=e}}}function wu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function ni(e){if(e!==gt)return!1;if(!Oe)return wu(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qa(e.type,e.memoizedProps)),t&&(t=yt)){if(so(e))throw bu(),Error(n(418));for(;t;)vu(e,t),t=or(t.nextSibling)}if(wu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){yt=or(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=gt?or(e.stateNode.nextSibling):null;return!0}function bu(){for(var e=yt;e;)e=or(e.nextSibling)}function ln(){yt=gt=null,Oe=!1}function ao(e){Pt===null?Pt=[e]:Pt.push(e)}var Nm=U.ReactCurrentBatchConfig;function ns(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(n(309));var l=i.stateNode}if(!l)throw Error(n(147,e));var d=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var x=d.refs;y===null?delete x[f]:x[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function si(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ju(e){var t=e._init;return t(e._payload)}function _u(e){function t(R,k){if(e){var O=R.deletions;O===null?(R.deletions=[k],R.flags|=16):O.push(k)}}function i(R,k){if(!e)return null;for(;k!==null;)t(R,k),k=k.sibling;return null}function l(R,k){for(R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function d(R,k){return R=vr(R,k),R.index=0,R.sibling=null,R}function f(R,k,O){return R.index=O,e?(O=R.alternate,O!==null?(O=O.index,O<k?(R.flags|=2,k):O):(R.flags|=2,k)):(R.flags|=1048576,k)}function y(R){return e&&R.alternate===null&&(R.flags|=2),R}function x(R,k,O,K){return k===null||k.tag!==6?(k=Xo(O,R.mode,K),k.return=R,k):(k=d(k,O),k.return=R,k)}function N(R,k,O,K){var ce=O.type;return ce===L?q(R,k,O.props.children,K,O.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ue&&ju(ce)===k.type)?(K=d(k,O.props),K.ref=ns(R,k,O),K.return=R,K):(K=Ci(O.type,O.key,O.props,null,R.mode,K),K.ref=ns(R,k,O),K.return=R,K)}function A(R,k,O,K){return k===null||k.tag!==4||k.stateNode.containerInfo!==O.containerInfo||k.stateNode.implementation!==O.implementation?(k=Zo(O,R.mode,K),k.return=R,k):(k=d(k,O.children||[]),k.return=R,k)}function q(R,k,O,K,ce){return k===null||k.tag!==7?(k=Dr(O,R.mode,K,ce),k.return=R,k):(k=d(k,O),k.return=R,k)}function V(R,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Xo(""+k,R.mode,O),k.return=R,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case $:return O=Ci(k.type,k.key,k.props,null,R.mode,O),O.ref=ns(R,null,k),O.return=R,O;case F:return k=Zo(k,R.mode,O),k.return=R,k;case ue:var K=k._init;return V(R,K(k._payload),O)}if(On(k)||ae(k))return k=Dr(k,R.mode,O,null),k.return=R,k;si(R,k)}return null}function B(R,k,O,K){var ce=k!==null?k.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ce!==null?null:x(R,k,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $:return O.key===ce?N(R,k,O,K):null;case F:return O.key===ce?A(R,k,O,K):null;case ue:return ce=O._init,B(R,k,ce(O._payload),K)}if(On(O)||ae(O))return ce!==null?null:q(R,k,O,K,null);si(R,O)}return null}function Z(R,k,O,K,ce){if(typeof K=="string"&&K!==""||typeof K=="number")return R=R.get(O)||null,x(k,R,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case $:return R=R.get(K.key===null?O:K.key)||null,N(k,R,K,ce);case F:return R=R.get(K.key===null?O:K.key)||null,A(k,R,K,ce);case ue:var he=K._init;return Z(R,k,O,he(K._payload),ce)}if(On(K)||ae(K))return R=R.get(O)||null,q(k,R,K,ce,null);si(k,K)}return null}function se(R,k,O,K){for(var ce=null,he=null,fe=k,ge=k=0,Ge=null;fe!==null&&ge<O.length;ge++){fe.index>ge?(Ge=fe,fe=null):Ge=fe.sibling;var _e=B(R,fe,O[ge],K);if(_e===null){fe===null&&(fe=Ge);break}e&&fe&&_e.alternate===null&&t(R,fe),k=f(_e,k,ge),he===null?ce=_e:he.sibling=_e,he=_e,fe=Ge}if(ge===O.length)return i(R,fe),Oe&&Er(R,ge),ce;if(fe===null){for(;ge<O.length;ge++)fe=V(R,O[ge],K),fe!==null&&(k=f(fe,k,ge),he===null?ce=fe:he.sibling=fe,he=fe);return Oe&&Er(R,ge),ce}for(fe=l(R,fe);ge<O.length;ge++)Ge=Z(fe,R,ge,O[ge],K),Ge!==null&&(e&&Ge.alternate!==null&&fe.delete(Ge.key===null?ge:Ge.key),k=f(Ge,k,ge),he===null?ce=Ge:he.sibling=Ge,he=Ge);return e&&fe.forEach(function(xr){return t(R,xr)}),Oe&&Er(R,ge),ce}function ie(R,k,O,K){var ce=ae(O);if(typeof ce!="function")throw Error(n(150));if(O=ce.call(O),O==null)throw Error(n(151));for(var he=ce=null,fe=k,ge=k=0,Ge=null,_e=O.next();fe!==null&&!_e.done;ge++,_e=O.next()){fe.index>ge?(Ge=fe,fe=null):Ge=fe.sibling;var xr=B(R,fe,_e.value,K);if(xr===null){fe===null&&(fe=Ge);break}e&&fe&&xr.alternate===null&&t(R,fe),k=f(xr,k,ge),he===null?ce=xr:he.sibling=xr,he=xr,fe=Ge}if(_e.done)return i(R,fe),Oe&&Er(R,ge),ce;if(fe===null){for(;!_e.done;ge++,_e=O.next())_e=V(R,_e.value,K),_e!==null&&(k=f(_e,k,ge),he===null?ce=_e:he.sibling=_e,he=_e);return Oe&&Er(R,ge),ce}for(fe=l(R,fe);!_e.done;ge++,_e=O.next())_e=Z(fe,R,ge,_e.value,K),_e!==null&&(e&&_e.alternate!==null&&fe.delete(_e.key===null?ge:_e.key),k=f(_e,k,ge),he===null?ce=_e:he.sibling=_e,he=_e);return e&&fe.forEach(function(ng){return t(R,ng)}),Oe&&Er(R,ge),ce}function Me(R,k,O,K){if(typeof O=="object"&&O!==null&&O.type===L&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case $:e:{for(var ce=O.key,he=k;he!==null;){if(he.key===ce){if(ce=O.type,ce===L){if(he.tag===7){i(R,he.sibling),k=d(he,O.props.children),k.return=R,R=k;break e}}else if(he.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ue&&ju(ce)===he.type){i(R,he.sibling),k=d(he,O.props),k.ref=ns(R,he,O),k.return=R,R=k;break e}i(R,he);break}else t(R,he);he=he.sibling}O.type===L?(k=Dr(O.props.children,R.mode,K,O.key),k.return=R,R=k):(K=Ci(O.type,O.key,O.props,null,R.mode,K),K.ref=ns(R,k,O),K.return=R,R=K)}return y(R);case F:e:{for(he=O.key;k!==null;){if(k.key===he)if(k.tag===4&&k.stateNode.containerInfo===O.containerInfo&&k.stateNode.implementation===O.implementation){i(R,k.sibling),k=d(k,O.children||[]),k.return=R,R=k;break e}else{i(R,k);break}else t(R,k);k=k.sibling}k=Zo(O,R.mode,K),k.return=R,R=k}return y(R);case ue:return he=O._init,Me(R,k,he(O._payload),K)}if(On(O))return se(R,k,O,K);if(ae(O))return ie(R,k,O,K);si(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,k!==null&&k.tag===6?(i(R,k.sibling),k=d(k,O),k.return=R,R=k):(i(R,k),k=Xo(O,R.mode,K),k.return=R,R=k),y(R)):i(R,k)}return Me}var cn=_u(!0),Nu=_u(!1),ii=lr(null),ai=null,un=null,oo=null;function lo(){oo=un=ai=null}function co(e){var t=ii.current;Pe(ii),e._currentValue=t}function uo(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function dn(e,t){ai=e,oo=un=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ct=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(oo!==e)if(e={context:e,memoizedValue:t,next:null},un===null){if(ai===null)throw Error(n(308));un=e,ai.dependencies={lanes:0,firstContext:e}}else un=un.next=e;return t}var Cr=null;function ho(e){Cr===null?Cr=[e]:Cr.push(e)}function Su(e,t,i,l){var d=t.interleaved;return d===null?(i.next=i,ho(t)):(i.next=d.next,d.next=i),t.interleaved=i,Qt(e,l)}function Qt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var dr=!1;function fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ku(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hr(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(be&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,Qt(e,i)}return d=l.interleaved,d===null?(t.next=t,ho(l)):(t.next=d.next,d.next=t),l.interleaved=t,Qt(e,i)}function oi(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ka(e,i)}}function Eu(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?d=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function li(e,t,i,l){var d=e.updateQueue;dr=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var N=x,A=N.next;N.next=null,y===null?f=A:y.next=A,y=N;var q=e.alternate;q!==null&&(q=q.updateQueue,x=q.lastBaseUpdate,x!==y&&(x===null?q.firstBaseUpdate=A:x.next=A,q.lastBaseUpdate=N))}if(f!==null){var V=d.baseState;y=0,q=A=N=null,x=f;do{var B=x.lane,Z=x.eventTime;if((l&B)===B){q!==null&&(q=q.next={eventTime:Z,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var se=e,ie=x;switch(B=t,Z=i,ie.tag){case 1:if(se=ie.payload,typeof se=="function"){V=se.call(Z,V,B);break e}V=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ie.payload,B=typeof se=="function"?se.call(Z,V,B):se,B==null)break e;V=Y({},V,B);break e;case 2:dr=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,B=d.effects,B===null?d.effects=[x]:B.push(x))}else Z={eventTime:Z,lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},q===null?(A=q=Z,N=V):q=q.next=Z,y|=B;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;B=x,x=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(!0);if(q===null&&(N=V),d.baseState=N,d.firstBaseUpdate=A,d.lastBaseUpdate=q,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Rr|=y,e.lanes=y,e.memoizedState=V}}function Cu(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=i,typeof d!="function")throw Error(n(191,d));d.call(l)}}}var ss={},zt=lr(ss),is=lr(ss),as=lr(ss);function Tr(e){if(e===ss)throw Error(n(174));return e}function po(e,t){switch(Ee(as,t),Ee(is,e),Ee(zt,ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pa(t,e)}Pe(zt),Ee(zt,t)}function hn(){Pe(zt),Pe(is),Pe(as)}function Tu(e){Tr(as.current);var t=Tr(zt.current),i=pa(t,e.type);t!==i&&(Ee(is,e),Ee(zt,i))}function mo(e){is.current===e&&(Pe(zt),Pe(is))}var Ae=lr(0);function ci(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var go=[];function yo(){for(var e=0;e<go.length;e++)go[e]._workInProgressVersionPrimary=null;go.length=0}var ui=U.ReactCurrentDispatcher,vo=U.ReactCurrentBatchConfig,Pr=0,Ie=null,Be=null,We=null,di=!1,os=!1,ls=0,Sm=0;function et(){throw Error(n(321))}function xo(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Tt(e[i],t[i]))return!1;return!0}function wo(e,t,i,l,d,f){if(Pr=f,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ui.current=e===null||e.memoizedState===null?Tm:Pm,e=i(l,d),os){f=0;do{if(os=!1,ls=0,25<=f)throw Error(n(301));f+=1,We=Be=null,t.updateQueue=null,ui.current=Rm,e=i(l,d)}while(os)}if(ui.current=pi,t=Be!==null&&Be.next!==null,Pr=0,We=Be=Ie=null,di=!1,t)throw Error(n(300));return e}function bo(){var e=ls!==0;return ls=0,e}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ie.memoizedState=We=e:We=We.next=e,We}function Nt(){if(Be===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=We===null?Ie.memoizedState:We.next;if(t!==null)We=t,Be=e;else{if(e===null)throw Error(n(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},We===null?Ie.memoizedState=We=e:We=We.next=e}return We}function cs(e,t){return typeof t=="function"?t(e):t}function jo(e){var t=Nt(),i=t.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=Be,d=l.baseQueue,f=i.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}l.baseQueue=d=f,i.pending=null}if(d!==null){f=d.next,l=l.baseState;var x=y=null,N=null,A=f;do{var q=A.lane;if((Pr&q)===q)N!==null&&(N=N.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),l=A.hasEagerState?A.eagerState:e(l,A.action);else{var V={lane:q,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};N===null?(x=N=V,y=l):N=N.next=V,Ie.lanes|=q,Rr|=q}A=A.next}while(A!==null&&A!==f);N===null?y=l:N.next=x,Tt(l,t.memoizedState)||(ct=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=N,i.lastRenderedState=l}if(e=i.interleaved,e!==null){d=e;do f=d.lane,Ie.lanes|=f,Rr|=f,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function _o(e){var t=Nt(),i=t.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);Tt(f,t.memoizedState)||(ct=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Pu(){}function Ru(e,t){var i=Ie,l=Nt(),d=t(),f=!Tt(l.memoizedState,d);if(f&&(l.memoizedState=d,ct=!0),l=l.queue,No(Iu.bind(null,i,l,e),[e]),l.getSnapshot!==t||f||We!==null&&We.memoizedState.tag&1){if(i.flags|=2048,us(9,Au.bind(null,i,l,d,t),void 0,null),Ke===null)throw Error(n(349));(Pr&30)!==0||Ou(i,t,d)}return d}function Ou(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Au(e,t,i,l){t.value=i,t.getSnapshot=l,Du(t)&&$u(e)}function Iu(e,t,i){return i(function(){Du(t)&&$u(e)})}function Du(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Tt(e,i)}catch{return!0}}function $u(e){var t=Qt(e,1);t!==null&&It(t,e,1,-1)}function Lu(e){var t=Ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:e},t.queue=e,e=e.dispatch=Cm.bind(null,Ie,e),[t.memoizedState,e]}function us(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function Mu(){return Nt().memoizedState}function hi(e,t,i,l){var d=Ft();Ie.flags|=e,d.memoizedState=us(1|t,i,void 0,l===void 0?null:l)}function fi(e,t,i,l){var d=Nt();l=l===void 0?null:l;var f=void 0;if(Be!==null){var y=Be.memoizedState;if(f=y.destroy,l!==null&&xo(l,y.deps)){d.memoizedState=us(t,i,f,l);return}}Ie.flags|=e,d.memoizedState=us(1|t,i,f,l)}function Uu(e,t){return hi(8390656,8,e,t)}function No(e,t){return fi(2048,8,e,t)}function zu(e,t){return fi(4,2,e,t)}function Fu(e,t){return fi(4,4,e,t)}function Bu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,i){return i=i!=null?i.concat([e]):null,fi(4,4,Bu.bind(null,t,e),i)}function So(){}function Vu(e,t){var i=Nt();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&xo(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function Hu(e,t){var i=Nt();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&xo(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function Wu(e,t,i){return(Pr&21)===0?(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=i):(Tt(i,t)||(i=jc(),Ie.lanes|=i,Rr|=i,e.baseState=!0),t)}function km(e,t){var i=Se;Se=i!==0&&4>i?i:4,e(!0);var l=vo.transition;vo.transition={};try{e(!1),t()}finally{Se=i,vo.transition=l}}function Ku(){return Nt().memoizedState}function Em(e,t,i){var l=gr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},Gu(e))Ju(t,i);else if(i=Su(e,t,i,l),i!==null){var d=it();It(i,e,l,d),Qu(i,t,l)}}function Cm(e,t,i){var l=gr(e),d={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(Gu(e))Ju(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,x=f(y,i);if(d.hasEagerState=!0,d.eagerState=x,Tt(x,y)){var N=t.interleaved;N===null?(d.next=d,ho(t)):(d.next=N.next,N.next=d),t.interleaved=d;return}}catch{}finally{}i=Su(e,t,d,l),i!==null&&(d=it(),It(i,e,l,d),Qu(i,t,l))}}function Gu(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Ju(e,t){os=di=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Qu(e,t,i){if((i&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,ka(e,i)}}var pi={readContext:_t,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Tm={readContext:_t,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:Uu,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,hi(4194308,4,Bu.bind(null,t,e),i)},useLayoutEffect:function(e,t){return hi(4194308,4,e,t)},useInsertionEffect:function(e,t){return hi(4,2,e,t)},useMemo:function(e,t){var i=Ft();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=Ft();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=Em.bind(null,Ie,e),[l.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:Lu,useDebugValue:So,useDeferredValue:function(e){return Ft().memoizedState=e},useTransition:function(){var e=Lu(!1),t=e[0];return e=km.bind(null,e[1]),Ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Ie,d=Ft();if(Oe){if(i===void 0)throw Error(n(407));i=i()}else{if(i=t(),Ke===null)throw Error(n(349));(Pr&30)!==0||Ou(l,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,Uu(Iu.bind(null,l,f,e),[e]),l.flags|=2048,us(9,Au.bind(null,l,f,i,t),void 0,null),i},useId:function(){var e=Ft(),t=Ke.identifierPrefix;if(Oe){var i=Jt,l=Gt;i=(l&~(1<<32-Ct(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=ls++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Sm++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pm={readContext:_t,useCallback:Vu,useContext:_t,useEffect:No,useImperativeHandle:qu,useInsertionEffect:zu,useLayoutEffect:Fu,useMemo:Hu,useReducer:jo,useRef:Mu,useState:function(){return jo(cs)},useDebugValue:So,useDeferredValue:function(e){var t=Nt();return Wu(t,Be.memoizedState,e)},useTransition:function(){var e=jo(cs)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Pu,useSyncExternalStore:Ru,useId:Ku,unstable_isNewReconciler:!1},Rm={readContext:_t,useCallback:Vu,useContext:_t,useEffect:No,useImperativeHandle:qu,useInsertionEffect:zu,useLayoutEffect:Fu,useMemo:Hu,useReducer:_o,useRef:Mu,useState:function(){return _o(cs)},useDebugValue:So,useDeferredValue:function(e){var t=Nt();return Be===null?t.memoizedState=e:Wu(t,Be.memoizedState,e)},useTransition:function(){var e=_o(cs)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Pu,useSyncExternalStore:Ru,useId:Ku,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=Y({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function ko(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:Y({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var mi={isMounted:function(e){return(e=e._reactInternals)?_r(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=it(),d=gr(e),f=Yt(l,d);f.payload=t,i!=null&&(f.callback=i),t=hr(e,f,d),t!==null&&(It(t,e,d,l),oi(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=it(),d=gr(e),f=Yt(l,d);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=hr(e,f,d),t!==null&&(It(t,e,d,l),oi(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=it(),l=gr(e),d=Yt(i,l);d.tag=2,t!=null&&(d.callback=t),t=hr(e,d,l),t!==null&&(It(t,e,l,i),oi(t,e,l))}};function Yu(e,t,i,l,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):t.prototype&&t.prototype.isPureReactComponent?!Qn(i,l)||!Qn(d,f):!0}function Xu(e,t,i){var l=!1,d=cr,f=t.contextType;return typeof f=="object"&&f!==null?f=_t(f):(d=lt(t)?Sr:Ze.current,l=t.contextTypes,f=(l=l!=null)?sn(e,d):cr),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mi,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function Zu(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function Eo(e,t,i,l){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs={},fo(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=_t(f):(f=lt(t)?Sr:Ze.current,d.context=sn(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ko(e,t,f,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&mi.enqueueReplaceState(d,d.state,null),li(e,i,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function fn(e,t){try{var i="",l=t;do i+=ve(l),l=l.return;while(l);var d=i}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Co(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function To(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Om=typeof WeakMap=="function"?WeakMap:Map;function ed(e,t,i){i=Yt(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){ji||(ji=!0,Vo=l),To(e,t)},i}function td(e,t,i){i=Yt(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;i.payload=function(){return l(d)},i.callback=function(){To(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){To(e,t),typeof l!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function rd(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Om;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(i)||(d.add(i),e=Wm.bind(null,e,t,i),t.then(e,e))}function nd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sd(e,t,i,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Yt(-1,1),t.tag=2,hr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Am=U.ReactCurrentOwner,ct=!1;function st(e,t,i,l){t.child=e===null?Nu(t,null,i,l):cn(t,e.child,i,l)}function id(e,t,i,l,d){i=i.render;var f=t.ref;return dn(t,d),l=wo(e,t,i,l,f,d),i=bo(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Xt(e,t,d)):(Oe&&i&&ro(t),t.flags|=1,st(e,t,l,d),t.child)}function ad(e,t,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!Yo(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,od(e,t,f,l,d)):(e=Ci(i.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:Qn,i(y,l)&&e.ref===t.ref)return Xt(e,t,d)}return t.flags|=1,e=vr(f,l),e.ref=t.ref,e.return=t,t.child=e}function od(e,t,i,l,d){if(e!==null){var f=e.memoizedProps;if(Qn(f,l)&&e.ref===t.ref)if(ct=!1,t.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,Xt(e,t,d)}return Po(e,t,i,l,d)}function ld(e,t,i){var l=t.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(mn,vt),vt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(mn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Ee(mn,vt),vt|=l}else f!==null?(l=f.baseLanes|i,t.memoizedState=null):l=i,Ee(mn,vt),vt|=l;return st(e,t,d,i),t.child}function cd(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Po(e,t,i,l,d){var f=lt(i)?Sr:Ze.current;return f=sn(t,f),dn(t,d),i=wo(e,t,i,l,f,d),l=bo(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Xt(e,t,d)):(Oe&&l&&ro(t),t.flags|=1,st(e,t,i,d),t.child)}function ud(e,t,i,l,d){if(lt(i)){var f=!0;Zs(t)}else f=!1;if(dn(t,d),t.stateNode===null)yi(e,t),Xu(t,i,l),Eo(t,i,l,d),l=!0;else if(e===null){var y=t.stateNode,x=t.memoizedProps;y.props=x;var N=y.context,A=i.contextType;typeof A=="object"&&A!==null?A=_t(A):(A=lt(i)?Sr:Ze.current,A=sn(t,A));var q=i.getDerivedStateFromProps,V=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function";V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==l||N!==A)&&Zu(t,y,l,A),dr=!1;var B=t.memoizedState;y.state=B,li(t,l,y,d),N=t.memoizedState,x!==l||B!==N||ot.current||dr?(typeof q=="function"&&(ko(t,i,q,l),N=t.memoizedState),(x=dr||Yu(t,i,x,l,B,N,A))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=N),y.props=l,y.state=N,y.context=A,l=x):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,ku(e,t),x=t.memoizedProps,A=t.type===t.elementType?x:Rt(t.type,x),y.props=A,V=t.pendingProps,B=y.context,N=i.contextType,typeof N=="object"&&N!==null?N=_t(N):(N=lt(i)?Sr:Ze.current,N=sn(t,N));var Z=i.getDerivedStateFromProps;(q=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==V||B!==N)&&Zu(t,y,l,N),dr=!1,B=t.memoizedState,y.state=B,li(t,l,y,d);var se=t.memoizedState;x!==V||B!==se||ot.current||dr?(typeof Z=="function"&&(ko(t,i,Z,l),se=t.memoizedState),(A=dr||Yu(t,i,A,l,B,se,N)||!1)?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,se,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,se,N)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),y.props=l,y.state=se,y.context=N,l=A):(typeof y.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),l=!1)}return Ro(e,t,i,l,f,d)}function Ro(e,t,i,l,d,f){cd(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return d&&mu(t,i,!1),Xt(e,t,f);l=t.stateNode,Am.current=t;var x=y&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=cn(t,e.child,null,f),t.child=cn(t,null,x,f)):st(e,t,x,f),t.memoizedState=l.state,d&&mu(t,i,!0),t.child}function dd(e){var t=e.stateNode;t.pendingContext?fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fu(e,t.context,!1),po(e,t.containerInfo)}function hd(e,t,i,l,d){return ln(),ao(d),t.flags|=256,st(e,t,i,l),t.child}var Oo={dehydrated:null,treeContext:null,retryLane:0};function Ao(e){return{baseLanes:e,cachePool:null,transitions:null}}function fd(e,t,i){var l=t.pendingProps,d=Ae.current,f=!1,y=(t.flags&128)!==0,x;if((x=y)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ee(Ae,d&1),e===null)return io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=l.children,e=l.fallback,f?(l=t.mode,f=t.child,y={mode:"hidden",children:y},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Ti(y,l,0,null),e=Dr(e,l,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Ao(i),t.memoizedState=Oo,e):Io(t,y));if(d=e.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return Im(e,t,y,l,x,d,i);if(f){f=l.fallback,y=t.mode,d=e.child,x=d.sibling;var N={mode:"hidden",children:l.children};return(y&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=N,t.deletions=null):(l=vr(d,N),l.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=vr(x,f):(f=Dr(f,y,i,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,y=e.child.memoizedState,y=y===null?Ao(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~i,t.memoizedState=Oo,l}return f=e.child,e=f.sibling,l=vr(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function Io(e,t){return t=Ti({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gi(e,t,i,l){return l!==null&&ao(l),cn(t,e.child,null,i),e=Io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Im(e,t,i,l,d,f,y){if(i)return t.flags&256?(t.flags&=-257,l=Co(Error(n(422))),gi(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,d=t.mode,l=Ti({mode:"visible",children:l.children},d,0,null),f=Dr(f,d,y,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&cn(t,e.child,null,y),t.child.memoizedState=Ao(y),t.memoizedState=Oo,f);if((t.mode&1)===0)return gi(e,t,y,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var x=l.dgst;return l=x,f=Error(n(419)),l=Co(f,l,void 0),gi(e,t,y,l)}if(x=(y&e.childLanes)!==0,ct||x){if(l=Ke,l!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|y))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Qt(e,d),It(l,e,d,-1))}return Qo(),l=Co(Error(n(421))),gi(e,t,y,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Km.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,yt=or(d.nextSibling),gt=t,Oe=!0,Pt=null,e!==null&&(bt[jt++]=Gt,bt[jt++]=Jt,bt[jt++]=kr,Gt=e.id,Jt=e.overflow,kr=t),t=Io(t,l.children),t.flags|=4096,t)}function pd(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),uo(e.return,t,i)}function Do(e,t,i,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=d)}function md(e,t,i){var l=t.pendingProps,d=l.revealOrder,f=l.tail;if(st(e,t,l.children,i),l=Ae.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pd(e,i,t);else if(e.tag===19)pd(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ee(Ae,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&ci(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),Do(t,!1,d,i,f);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ci(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Do(t,!0,i,null,f);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Rr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,i=vr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=vr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Dm(e,t,i){switch(t.tag){case 3:dd(t),ln();break;case 5:Tu(t);break;case 1:lt(t.type)&&Zs(t);break;case 4:po(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Ee(ii,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ee(Ae,Ae.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?fd(e,t,i):(Ee(Ae,Ae.current&1),e=Xt(e,t,i),e!==null?e.sibling:null);Ee(Ae,Ae.current&1);break;case 19:if(l=(i&t.childLanes)!==0,(e.flags&128)!==0){if(l)return md(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ee(Ae,Ae.current),l)break;return null;case 22:case 23:return t.lanes=0,ld(e,t,i)}return Xt(e,t,i)}var gd,$o,yd,vd;gd=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},$o=function(){},yd=function(e,t,i,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,Tr(zt.current);var f=null;switch(i){case"input":d=ua(e,d),l=ua(e,l),f=[];break;case"select":d=Y({},d,{value:void 0}),l=Y({},l,{value:void 0}),f=[];break;case"textarea":d=fa(e,d),l=fa(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Qs)}ma(i,l);var y;i=null;for(A in d)if(!l.hasOwnProperty(A)&&d.hasOwnProperty(A)&&d[A]!=null)if(A==="style"){var x=d[A];for(y in x)x.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(c.hasOwnProperty(A)?f||(f=[]):(f=f||[]).push(A,null));for(A in l){var N=l[A];if(x=d?.[A],l.hasOwnProperty(A)&&N!==x&&(N!=null||x!=null))if(A==="style")if(x){for(y in x)!x.hasOwnProperty(y)||N&&N.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in N)N.hasOwnProperty(y)&&x[y]!==N[y]&&(i||(i={}),i[y]=N[y])}else i||(f||(f=[]),f.push(A,i)),i=N;else A==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,x=x?x.__html:void 0,N!=null&&x!==N&&(f=f||[]).push(A,N)):A==="children"?typeof N!="string"&&typeof N!="number"||(f=f||[]).push(A,""+N):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(c.hasOwnProperty(A)?(N!=null&&A==="onScroll"&&Te("scroll",e),f||x===N||(f=[])):(f=f||[]).push(A,N))}i&&(f=f||[]).push("style",i);var A=f;(t.updateQueue=A)&&(t.flags|=4)}},vd=function(e,t,i,l){i!==l&&(t.flags|=4)};function ds(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function $m(e,t,i){var l=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return lt(t.type)&&Xs(),tt(t),null;case 3:return l=t.stateNode,hn(),Pe(ot),Pe(Ze),yo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Pt!==null&&(Ko(Pt),Pt=null))),$o(e,t),tt(t),null;case 5:mo(t);var d=Tr(as.current);if(i=t.type,e!==null&&t.stateNode!=null)yd(e,t,i,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(n(166));return tt(t),null}if(e=Tr(zt.current),ni(t)){l=t.stateNode,i=t.type;var f=t.memoizedProps;switch(l[Ut]=t,l[ts]=f,e=(t.mode&1)!==0,i){case"dialog":Te("cancel",l),Te("close",l);break;case"iframe":case"object":case"embed":Te("load",l);break;case"video":case"audio":for(d=0;d<Xn.length;d++)Te(Xn[d],l);break;case"source":Te("error",l);break;case"img":case"image":case"link":Te("error",l),Te("load",l);break;case"details":Te("toggle",l);break;case"input":Xl(l,f),Te("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Te("invalid",l);break;case"textarea":tc(l,f),Te("invalid",l)}ma(i,f),d=null;for(var y in f)if(f.hasOwnProperty(y)){var x=f[y];y==="children"?typeof x=="string"?l.textContent!==x&&(f.suppressHydrationWarning!==!0&&Js(l.textContent,x,e),d=["children",x]):typeof x=="number"&&l.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Js(l.textContent,x,e),d=["children",""+x]):c.hasOwnProperty(y)&&x!=null&&y==="onScroll"&&Te("scroll",l)}switch(i){case"input":ks(l),ec(l,f,!0);break;case"textarea":ks(l),nc(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Qs)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sc(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(i,{is:l.is}):(e=y.createElement(i),i==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,i),e[Ut]=t,e[ts]=l,gd(e,t,!1,!1),t.stateNode=e;e:{switch(y=ga(i,l),i){case"dialog":Te("cancel",e),Te("close",e),d=l;break;case"iframe":case"object":case"embed":Te("load",e),d=l;break;case"video":case"audio":for(d=0;d<Xn.length;d++)Te(Xn[d],e);d=l;break;case"source":Te("error",e),d=l;break;case"img":case"image":case"link":Te("error",e),Te("load",e),d=l;break;case"details":Te("toggle",e),d=l;break;case"input":Xl(e,l),d=ua(e,l),Te("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=Y({},l,{value:void 0}),Te("invalid",e);break;case"textarea":tc(e,l),d=fa(e,l),Te("invalid",e);break;default:d=l}ma(i,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var N=x[f];f==="style"?oc(e,N):f==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ic(e,N)):f==="children"?typeof N=="string"?(i!=="textarea"||N!=="")&&An(e,N):typeof N=="number"&&An(e,""+N):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(c.hasOwnProperty(f)?N!=null&&f==="onScroll"&&Te("scroll",e):N!=null&&D(e,f,N,y))}switch(i){case"input":ks(e),ec(e,l,!1);break;case"textarea":ks(e),nc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Ne(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Wr(e,!!l.multiple,f,!1):l.defaultValue!=null&&Wr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Qs)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)vd(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(n(166));if(i=Tr(as.current),Tr(zt.current),ni(t)){if(l=t.stateNode,i=t.memoizedProps,l[Ut]=t,(f=l.nodeValue!==i)&&(e=gt,e!==null))switch(e.tag){case 3:Js(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Js(l.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[Ut]=t,t.stateNode=l}return tt(t),null;case 13:if(Pe(Ae),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&yt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)bu(),ln(),t.flags|=98560,f=!1;else if(f=ni(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Ut]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),f=!1}else Pt!==null&&(Ko(Pt),Pt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ae.current&1)!==0?qe===0&&(qe=3):Qo())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return hn(),$o(e,t),e===null&&Zn(t.stateNode.containerInfo),tt(t),null;case 10:return co(t.type._context),tt(t),null;case 17:return lt(t.type)&&Xs(),tt(t),null;case 19:if(Pe(Ae),f=t.memoizedState,f===null)return tt(t),null;if(l=(t.flags&128)!==0,y=f.rendering,y===null)if(l)ds(f,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=ci(e),y!==null){for(t.flags|=128,ds(f,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)f=i,e=l,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ee(Ae,Ae.current&1|2),t.child}e=e.sibling}f.tail!==null&&Le()>gn&&(t.flags|=128,l=!0,ds(f,!1),t.lanes=4194304)}else{if(!l)if(e=ci(y),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ds(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Oe)return tt(t),null}else 2*Le()-f.renderingStartTime>gn&&i!==1073741824&&(t.flags|=128,l=!0,ds(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(i=f.last,i!==null?i.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Le(),t.sibling=null,i=Ae.current,Ee(Ae,l?i&1|2:i&1),t):(tt(t),null);case 22:case 23:return Jo(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(vt&1073741824)!==0&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Lm(e,t){switch(no(t),t.tag){case 1:return lt(t.type)&&Xs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),Pe(ot),Pe(Ze),yo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return mo(t),null;case 13:if(Pe(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Ae),null;case 4:return hn(),null;case 10:return co(t.type._context),null;case 22:case 23:return Jo(),null;case 24:return null;default:return null}}var vi=!1,rt=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,re=null;function pn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){$e(e,t,l)}else i.current=null}function Lo(e,t,i){try{i()}catch(l){$e(e,t,l)}}var xd=!1;function Um(e,t){if(Ga=Ms,e=Yc(),za(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,x=-1,N=-1,A=0,q=0,V=e,B=null;t:for(;;){for(var Z;V!==i||d!==0&&V.nodeType!==3||(x=y+d),V!==f||l!==0&&V.nodeType!==3||(N=y+l),V.nodeType===3&&(y+=V.nodeValue.length),(Z=V.firstChild)!==null;)B=V,V=Z;for(;;){if(V===e)break t;if(B===i&&++A===d&&(x=y),B===f&&++q===l&&(N=y),(Z=V.nextSibling)!==null)break;V=B,B=V.parentNode}V=Z}i=x===-1||N===-1?null:{start:x,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ja={focusedElem:e,selectionRange:i},Ms=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var se=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var ie=se.memoizedProps,Me=se.memoizedState,R=t.stateNode,k=R.getSnapshotBeforeUpdate(t.elementType===t.type?ie:Rt(t.type,ie),Me);R.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){$e(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return se=xd,xd=!1,se}function hs(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Lo(t,i,f)}d=d.next}while(d!==l)}}function xi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function Mo(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function wd(e){var t=e.alternate;t!==null&&(e.alternate=null,wd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[ts],delete t[Za],delete t[bm],delete t[jm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bd(e){return e.tag===5||e.tag===3||e.tag===4}function jd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uo(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Qs));else if(l!==4&&(e=e.child,e!==null))for(Uo(e,t,i),e=e.sibling;e!==null;)Uo(e,t,i),e=e.sibling}function zo(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(zo(e,t,i),e=e.sibling;e!==null;)zo(e,t,i),e=e.sibling}var Je=null,Ot=!1;function fr(e,t,i){for(i=i.child;i!==null;)_d(e,t,i),i=i.sibling}function _d(e,t,i){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Os,i)}catch{}switch(i.tag){case 5:rt||pn(i,t);case 6:var l=Je,d=Ot;Je=null,fr(e,t,i),Je=l,Ot=d,Je!==null&&(Ot?(e=Je,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Je.removeChild(i.stateNode));break;case 18:Je!==null&&(Ot?(e=Je,i=i.stateNode,e.nodeType===8?Xa(e.parentNode,i):e.nodeType===1&&Xa(e,i),Vn(e)):Xa(Je,i.stateNode));break;case 4:l=Je,d=Ot,Je=i.stateNode.containerInfo,Ot=!0,fr(e,t,i),Je=l,Ot=d;break;case 0:case 11:case 14:case 15:if(!rt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,y=f.destroy;f=f.tag,y!==void 0&&((f&2)!==0||(f&4)!==0)&&Lo(i,t,y),d=d.next}while(d!==l)}fr(e,t,i);break;case 1:if(!rt&&(pn(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(x){$e(i,t,x)}fr(e,t,i);break;case 21:fr(e,t,i);break;case 22:i.mode&1?(rt=(l=rt)||i.memoizedState!==null,fr(e,t,i),rt=l):fr(e,t,i);break;default:fr(e,t,i)}}function Nd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Mm),t.forEach(function(l){var d=Gm.bind(null,e,l);i.has(l)||(i.add(l),l.then(d,d))})}}function At(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];try{var f=e,y=t,x=y;e:for(;x!==null;){switch(x.tag){case 5:Je=x.stateNode,Ot=!1;break e;case 3:Je=x.stateNode.containerInfo,Ot=!0;break e;case 4:Je=x.stateNode.containerInfo,Ot=!0;break e}x=x.return}if(Je===null)throw Error(n(160));_d(f,y,d),Je=null,Ot=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(A){$e(d,t,A)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sd(t,e),t=t.sibling}function Sd(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Bt(e),l&4){try{hs(3,e,e.return),xi(3,e)}catch(ie){$e(e,e.return,ie)}try{hs(5,e,e.return)}catch(ie){$e(e,e.return,ie)}}break;case 1:At(t,e),Bt(e),l&512&&i!==null&&pn(i,i.return);break;case 5:if(At(t,e),Bt(e),l&512&&i!==null&&pn(i,i.return),e.flags&32){var d=e.stateNode;try{An(d,"")}catch(ie){$e(e,e.return,ie)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,y=i!==null?i.memoizedProps:f,x=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&Zl(d,f),ga(x,y);var A=ga(x,f);for(y=0;y<N.length;y+=2){var q=N[y],V=N[y+1];q==="style"?oc(d,V):q==="dangerouslySetInnerHTML"?ic(d,V):q==="children"?An(d,V):D(d,q,V,A)}switch(x){case"input":da(d,f);break;case"textarea":rc(d,f);break;case"select":var B=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var Z=f.value;Z!=null?Wr(d,!!f.multiple,Z,!1):B!==!!f.multiple&&(f.defaultValue!=null?Wr(d,!!f.multiple,f.defaultValue,!0):Wr(d,!!f.multiple,f.multiple?[]:"",!1))}d[ts]=f}catch(ie){$e(e,e.return,ie)}}break;case 6:if(At(t,e),Bt(e),l&4){if(e.stateNode===null)throw Error(n(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ie){$e(e,e.return,ie)}}break;case 3:if(At(t,e),Bt(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Vn(t.containerInfo)}catch(ie){$e(e,e.return,ie)}break;case 4:At(t,e),Bt(e);break;case 13:At(t,e),Bt(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(qo=Le())),l&4&&Nd(e);break;case 22:if(q=i!==null&&i.memoizedState!==null,e.mode&1?(rt=(A=rt)||q,At(t,e),rt=A):At(t,e),Bt(e),l&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!q&&(e.mode&1)!==0)for(re=e,q=e.child;q!==null;){for(V=re=q;re!==null;){switch(B=re,Z=B.child,B.tag){case 0:case 11:case 14:case 15:hs(4,B,B.return);break;case 1:pn(B,B.return);var se=B.stateNode;if(typeof se.componentWillUnmount=="function"){l=B,i=B.return;try{t=l,se.props=t.memoizedProps,se.state=t.memoizedState,se.componentWillUnmount()}catch(ie){$e(l,i,ie)}}break;case 5:pn(B,B.return);break;case 22:if(B.memoizedState!==null){Cd(V);continue}}Z!==null?(Z.return=B,re=Z):Cd(V)}q=q.sibling}e:for(q=null,V=e;;){if(V.tag===5){if(q===null){q=V;try{d=V.stateNode,A?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=V.stateNode,N=V.memoizedProps.style,y=N!=null&&N.hasOwnProperty("display")?N.display:null,x.style.display=ac("display",y))}catch(ie){$e(e,e.return,ie)}}}else if(V.tag===6){if(q===null)try{V.stateNode.nodeValue=A?"":V.memoizedProps}catch(ie){$e(e,e.return,ie)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===e)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break e;for(;V.sibling===null;){if(V.return===null||V.return===e)break e;q===V&&(q=null),V=V.return}q===V&&(q=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:At(t,e),Bt(e),l&4&&Nd(e);break;case 21:break;default:At(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(bd(i)){var l=i;break e}i=i.return}throw Error(n(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(An(d,""),l.flags&=-33);var f=jd(e);zo(e,f,d);break;case 3:case 4:var y=l.stateNode.containerInfo,x=jd(e);Uo(e,x,y);break;default:throw Error(n(161))}}catch(N){$e(e,e.return,N)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zm(e,t,i){re=e,kd(e)}function kd(e,t,i){for(var l=(e.mode&1)!==0;re!==null;){var d=re,f=d.child;if(d.tag===22&&l){var y=d.memoizedState!==null||vi;if(!y){var x=d.alternate,N=x!==null&&x.memoizedState!==null||rt;x=vi;var A=rt;if(vi=y,(rt=N)&&!A)for(re=d;re!==null;)y=re,N=y.child,y.tag===22&&y.memoizedState!==null?Td(d):N!==null?(N.return=y,re=N):Td(d);for(;f!==null;)re=f,kd(f),f=f.sibling;re=d,vi=x,rt=A}Ed(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,re=f):Ed(e)}}function Ed(e){for(;re!==null;){var t=re;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||xi(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!rt)if(i===null)l.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:Rt(t.type,i.memoizedProps);l.componentDidUpdate(d,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Cu(t,f,l);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Cu(t,y,i)}break;case 5:var x=t.stateNode;if(i===null&&t.flags&4){i=x;var N=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&i.focus();break;case"img":N.src&&(i.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var A=t.alternate;if(A!==null){var q=A.memoizedState;if(q!==null){var V=q.dehydrated;V!==null&&Vn(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}rt||t.flags&512&&Mo(t)}catch(B){$e(t,t.return,B)}}if(t===e){re=null;break}if(i=t.sibling,i!==null){i.return=t.return,re=i;break}re=t.return}}function Cd(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var i=t.sibling;if(i!==null){i.return=t.return,re=i;break}re=t.return}}function Td(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{xi(4,t)}catch(N){$e(t,i,N)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(N){$e(t,d,N)}}var f=t.return;try{Mo(t)}catch(N){$e(t,f,N)}break;case 5:var y=t.return;try{Mo(t)}catch(N){$e(t,y,N)}}}catch(N){$e(t,t.return,N)}if(t===e){re=null;break}var x=t.sibling;if(x!==null){x.return=t.return,re=x;break}re=t.return}}var Fm=Math.ceil,wi=U.ReactCurrentDispatcher,Fo=U.ReactCurrentOwner,St=U.ReactCurrentBatchConfig,be=0,Ke=null,Ue=null,Qe=0,vt=0,mn=lr(0),qe=0,fs=null,Rr=0,bi=0,Bo=0,ps=null,ut=null,qo=0,gn=1/0,Zt=null,ji=!1,Vo=null,pr=null,_i=!1,mr=null,Ni=0,ms=0,Ho=null,Si=-1,ki=0;function it(){return(be&6)!==0?Le():Si!==-1?Si:Si=Le()}function gr(e){return(e.mode&1)===0?1:(be&2)!==0&&Qe!==0?Qe&-Qe:Nm.transition!==null?(ki===0&&(ki=jc()),ki):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Rc(e.type)),e)}function It(e,t,i,l){if(50<ms)throw ms=0,Ho=null,Error(n(185));Un(e,i,l),((be&2)===0||e!==Ke)&&(e===Ke&&((be&2)===0&&(bi|=i),qe===4&&yr(e,Qe)),dt(e,l),i===1&&be===0&&(t.mode&1)===0&&(gn=Le()+500,ei&&ur()))}function dt(e,t){var i=e.callbackNode;Np(e,t);var l=Ds(e,e===Ke?Qe:0);if(l===0)i!==null&&xc(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&xc(i),t===1)e.tag===0?_m(Rd.bind(null,e)):gu(Rd.bind(null,e)),xm(function(){(be&6)===0&&ur()}),i=null;else{switch(_c(l)){case 1:i=_a;break;case 4:i=wc;break;case 16:i=Rs;break;case 536870912:i=bc;break;default:i=Rs}i=Ud(i,Pd.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Pd(e,t){if(Si=-1,ki=0,(be&6)!==0)throw Error(n(327));var i=e.callbackNode;if(yn()&&e.callbackNode!==i)return null;var l=Ds(e,e===Ke?Qe:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Ei(e,l);else{t=l;var d=be;be|=2;var f=Ad();(Ke!==e||Qe!==t)&&(Zt=null,gn=Le()+500,Ar(e,t));do try{Vm();break}catch(x){Od(e,x)}while(!0);lo(),wi.current=f,be=d,Ue!==null?t=0:(Ke=null,Qe=0,t=qe)}if(t!==0){if(t===2&&(d=Na(e),d!==0&&(l=d,t=Wo(e,d))),t===1)throw i=fs,Ar(e,0),yr(e,l),dt(e,Le()),i;if(t===6)yr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!Bm(d)&&(t=Ei(e,l),t===2&&(f=Na(e),f!==0&&(l=f,t=Wo(e,f))),t===1))throw i=fs,Ar(e,0),yr(e,l),dt(e,Le()),i;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(n(345));case 2:Ir(e,ut,Zt);break;case 3:if(yr(e,l),(l&130023424)===l&&(t=qo+500-Le(),10<t)){if(Ds(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){it(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Ya(Ir.bind(null,e,ut,Zt),t);break}Ir(e,ut,Zt);break;case 4:if(yr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var y=31-Ct(l);f=1<<y,y=t[y],y>d&&(d=y),l&=~f}if(l=d,l=Le()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Fm(l/1960))-l,10<l){e.timeoutHandle=Ya(Ir.bind(null,e,ut,Zt),l);break}Ir(e,ut,Zt);break;case 5:Ir(e,ut,Zt);break;default:throw Error(n(329))}}}return dt(e,Le()),e.callbackNode===i?Pd.bind(null,e):null}function Wo(e,t){var i=ps;return e.current.memoizedState.isDehydrated&&(Ar(e,t).flags|=256),e=Ei(e,t),e!==2&&(t=ut,ut=i,t!==null&&Ko(t)),e}function Ko(e){ut===null?ut=e:ut.push.apply(ut,e)}function Bm(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!Tt(f(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yr(e,t){for(t&=~Bo,t&=~bi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ct(t),l=1<<i;e[i]=-1,t&=~l}}function Rd(e){if((be&6)!==0)throw Error(n(327));yn();var t=Ds(e,0);if((t&1)===0)return dt(e,Le()),null;var i=Ei(e,t);if(e.tag!==0&&i===2){var l=Na(e);l!==0&&(t=l,i=Wo(e,l))}if(i===1)throw i=fs,Ar(e,0),yr(e,t),dt(e,Le()),i;if(i===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ir(e,ut,Zt),dt(e,Le()),null}function Go(e,t){var i=be;be|=1;try{return e(t)}finally{be=i,be===0&&(gn=Le()+500,ei&&ur())}}function Or(e){mr!==null&&mr.tag===0&&(be&6)===0&&yn();var t=be;be|=1;var i=St.transition,l=Se;try{if(St.transition=null,Se=1,e)return e()}finally{Se=l,St.transition=i,be=t,(be&6)===0&&ur()}}function Jo(){vt=mn.current,Pe(mn)}function Ar(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,vm(i)),Ue!==null)for(i=Ue.return;i!==null;){var l=i;switch(no(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Xs();break;case 3:hn(),Pe(ot),Pe(Ze),yo();break;case 5:mo(l);break;case 4:hn();break;case 13:Pe(Ae);break;case 19:Pe(Ae);break;case 10:co(l.type._context);break;case 22:case 23:Jo()}i=i.return}if(Ke=e,Ue=e=vr(e.current,null),Qe=vt=t,qe=0,fs=null,Bo=bi=Rr=0,ut=ps=null,Cr!==null){for(t=0;t<Cr.length;t++)if(i=Cr[t],l=i.interleaved,l!==null){i.interleaved=null;var d=l.next,f=i.pending;if(f!==null){var y=f.next;f.next=d,l.next=y}i.pending=l}Cr=null}return e}function Od(e,t){do{var i=Ue;try{if(lo(),ui.current=pi,di){for(var l=Ie.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}di=!1}if(Pr=0,We=Be=Ie=null,os=!1,ls=0,Fo.current=null,i===null||i.return===null){qe=1,fs=t,Ue=null;break}e:{var f=e,y=i.return,x=i,N=t;if(t=Qe,x.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var A=N,q=x,V=q.tag;if((q.mode&1)===0&&(V===0||V===11||V===15)){var B=q.alternate;B?(q.updateQueue=B.updateQueue,q.memoizedState=B.memoizedState,q.lanes=B.lanes):(q.updateQueue=null,q.memoizedState=null)}var Z=nd(y);if(Z!==null){Z.flags&=-257,sd(Z,y,x,f,t),Z.mode&1&&rd(f,A,t),t=Z,N=A;var se=t.updateQueue;if(se===null){var ie=new Set;ie.add(N),t.updateQueue=ie}else se.add(N);break e}else{if((t&1)===0){rd(f,A,t),Qo();break e}N=Error(n(426))}}else if(Oe&&x.mode&1){var Me=nd(y);if(Me!==null){(Me.flags&65536)===0&&(Me.flags|=256),sd(Me,y,x,f,t),ao(fn(N,x));break e}}f=N=fn(N,x),qe!==4&&(qe=2),ps===null?ps=[f]:ps.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var R=ed(f,N,t);Eu(f,R);break e;case 1:x=N;var k=f.type,O=f.stateNode;if((f.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(pr===null||!pr.has(O)))){f.flags|=65536,t&=-t,f.lanes|=t;var K=td(f,x,t);Eu(f,K);break e}}f=f.return}while(f!==null)}Dd(i)}catch(ce){t=ce,Ue===i&&i!==null&&(Ue=i=i.return);continue}break}while(!0)}function Ad(){var e=wi.current;return wi.current=pi,e===null?pi:e}function Qo(){(qe===0||qe===3||qe===2)&&(qe=4),Ke===null||(Rr&268435455)===0&&(bi&268435455)===0||yr(Ke,Qe)}function Ei(e,t){var i=be;be|=2;var l=Ad();(Ke!==e||Qe!==t)&&(Zt=null,Ar(e,t));do try{qm();break}catch(d){Od(e,d)}while(!0);if(lo(),be=i,wi.current=l,Ue!==null)throw Error(n(261));return Ke=null,Qe=0,qe}function qm(){for(;Ue!==null;)Id(Ue)}function Vm(){for(;Ue!==null&&!mp();)Id(Ue)}function Id(e){var t=Md(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Dd(e):Ue=t,Fo.current=null}function Dd(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=$m(i,t,vt),i!==null){Ue=i;return}}else{if(i=Lm(i,t),i!==null){i.flags&=32767,Ue=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ue=null;return}}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);qe===0&&(qe=5)}function Ir(e,t,i){var l=Se,d=St.transition;try{St.transition=null,Se=1,Hm(e,t,i,l)}finally{St.transition=d,Se=l}return null}function Hm(e,t,i,l){do yn();while(mr!==null);if((be&6)!==0)throw Error(n(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Sp(e,f),e===Ke&&(Ue=Ke=null,Qe=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||_i||(_i=!0,Ud(Rs,function(){return yn(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=St.transition,St.transition=null;var y=Se;Se=1;var x=be;be|=4,Fo.current=null,Um(e,i),Sd(i,e),dm(Ja),Ms=!!Ga,Ja=Ga=null,e.current=i,zm(i),gp(),be=x,Se=y,St.transition=f}else e.current=i;if(_i&&(_i=!1,mr=e,Ni=d),f=e.pendingLanes,f===0&&(pr=null),xp(i.stateNode),dt(e,Le()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],l(d.value,{componentStack:d.stack,digest:d.digest});if(ji)throw ji=!1,e=Vo,Vo=null,e;return(Ni&1)!==0&&e.tag!==0&&yn(),f=e.pendingLanes,(f&1)!==0?e===Ho?ms++:(ms=0,Ho=e):ms=0,ur(),null}function yn(){if(mr!==null){var e=_c(Ni),t=St.transition,i=Se;try{if(St.transition=null,Se=16>e?16:e,mr===null)var l=!1;else{if(e=mr,mr=null,Ni=0,(be&6)!==0)throw Error(n(331));var d=be;for(be|=4,re=e.current;re!==null;){var f=re,y=f.child;if((re.flags&16)!==0){var x=f.deletions;if(x!==null){for(var N=0;N<x.length;N++){var A=x[N];for(re=A;re!==null;){var q=re;switch(q.tag){case 0:case 11:case 15:hs(8,q,f)}var V=q.child;if(V!==null)V.return=q,re=V;else for(;re!==null;){q=re;var B=q.sibling,Z=q.return;if(wd(q),q===A){re=null;break}if(B!==null){B.return=Z,re=B;break}re=Z}}}var se=f.alternate;if(se!==null){var ie=se.child;if(ie!==null){se.child=null;do{var Me=ie.sibling;ie.sibling=null,ie=Me}while(ie!==null)}}re=f}}if((f.subtreeFlags&2064)!==0&&y!==null)y.return=f,re=y;else e:for(;re!==null;){if(f=re,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:hs(9,f,f.return)}var R=f.sibling;if(R!==null){R.return=f.return,re=R;break e}re=f.return}}var k=e.current;for(re=k;re!==null;){y=re;var O=y.child;if((y.subtreeFlags&2064)!==0&&O!==null)O.return=y,re=O;else e:for(y=k;re!==null;){if(x=re,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:xi(9,x)}}catch(ce){$e(x,x.return,ce)}if(x===y){re=null;break e}var K=x.sibling;if(K!==null){K.return=x.return,re=K;break e}re=x.return}}if(be=d,ur(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Os,e)}catch{}l=!0}return l}finally{Se=i,St.transition=t}}return!1}function $d(e,t,i){t=fn(i,t),t=ed(e,t,1),e=hr(e,t,1),t=it(),e!==null&&(Un(e,1,t),dt(e,t))}function $e(e,t,i){if(e.tag===3)$d(e,e,i);else for(;t!==null;){if(t.tag===3){$d(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(pr===null||!pr.has(l))){e=fn(i,e),e=td(t,e,1),t=hr(t,e,1),e=it(),t!==null&&(Un(t,1,e),dt(t,e));break}}t=t.return}}function Wm(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&i,Ke===e&&(Qe&i)===i&&(qe===4||qe===3&&(Qe&130023424)===Qe&&500>Le()-qo?Ar(e,0):Bo|=i),dt(e,t)}function Ld(e,t){t===0&&((e.mode&1)===0?t=1:(t=Is,Is<<=1,(Is&130023424)===0&&(Is=4194304)));var i=it();e=Qt(e,t),e!==null&&(Un(e,t,i),dt(e,i))}function Km(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ld(e,i)}function Gm(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(t),Ld(e,i)}var Md;Md=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)ct=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return ct=!1,Dm(e,t,i);ct=(e.flags&131072)!==0}else ct=!1,Oe&&(t.flags&1048576)!==0&&yu(t,ri,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;yi(e,t),e=t.pendingProps;var d=sn(t,Ze.current);dn(t,i),d=wo(null,t,l,e,d,i);var f=bo();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(l)?(f=!0,Zs(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,fo(t),d.updater=mi,t.stateNode=d,d._reactInternals=t,Eo(t,l,e,i),t=Ro(null,t,l,!0,f,i)):(t.tag=0,Oe&&f&&ro(t),st(null,t,d,i),t=t.child),t;case 16:l=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=Qm(l),e=Rt(l,e),d){case 0:t=Po(null,t,l,e,i);break e;case 1:t=ud(null,t,l,e,i);break e;case 11:t=id(null,t,l,e,i);break e;case 14:t=ad(null,t,l,Rt(l.type,e),i);break e}throw Error(n(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Po(e,t,l,d,i);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),ud(e,t,l,d,i);case 3:e:{if(dd(t),e===null)throw Error(n(387));l=t.pendingProps,f=t.memoizedState,d=f.element,ku(e,t),li(t,l,null,i);var y=t.memoizedState;if(l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=fn(Error(n(423)),t),t=hd(e,t,l,i,d);break e}else if(l!==d){d=fn(Error(n(424)),t),t=hd(e,t,l,i,d);break e}else for(yt=or(t.stateNode.containerInfo.firstChild),gt=t,Oe=!0,Pt=null,i=Nu(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ln(),l===d){t=Xt(e,t,i);break e}st(e,t,l,i)}t=t.child}return t;case 5:return Tu(t),e===null&&io(t),l=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,y=d.children,Qa(l,d)?y=null:f!==null&&Qa(l,f)&&(t.flags|=32),cd(e,t),st(e,t,y,i),t.child;case 6:return e===null&&io(t),null;case 13:return fd(e,t,i);case 4:return po(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=cn(t,null,l,i):st(e,t,l,i),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),id(e,t,l,d,i);case 7:return st(e,t,t.pendingProps,i),t.child;case 8:return st(e,t,t.pendingProps.children,i),t.child;case 12:return st(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,f=t.memoizedProps,y=d.value,Ee(ii,l._currentValue),l._currentValue=y,f!==null)if(Tt(f.value,y)){if(f.children===d.children&&!ot.current){t=Xt(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){y=f.child;for(var N=x.firstContext;N!==null;){if(N.context===l){if(f.tag===1){N=Yt(-1,i&-i),N.tag=2;var A=f.updateQueue;if(A!==null){A=A.shared;var q=A.pending;q===null?N.next=N:(N.next=q.next,q.next=N),A.pending=N}}f.lanes|=i,N=f.alternate,N!==null&&(N.lanes|=i),uo(f.return,i,t),x.lanes|=i;break}N=N.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(n(341));y.lanes|=i,x=y.alternate,x!==null&&(x.lanes|=i),uo(y,i,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}st(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,dn(t,i),d=_t(d),l=l(d),t.flags|=1,st(e,t,l,i),t.child;case 14:return l=t.type,d=Rt(l,t.pendingProps),d=Rt(l.type,d),ad(e,t,l,d,i);case 15:return od(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),yi(e,t),t.tag=1,lt(l)?(e=!0,Zs(t)):e=!1,dn(t,i),Xu(t,l,d),Eo(t,l,d,i),Ro(null,t,l,!0,e,i);case 19:return md(e,t,i);case 22:return ld(e,t,i)}throw Error(n(156,t.tag))};function Ud(e,t){return vc(e,t)}function Jm(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,i,l){return new Jm(e,t,i,l)}function Yo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qm(e){if(typeof e=="function")return Yo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===G)return 11;if(e===je)return 14}return 2}function vr(e,t){var i=e.alternate;return i===null?(i=kt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ci(e,t,i,l,d,f){var y=2;if(l=e,typeof e=="function")Yo(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case L:return Dr(i.children,d,f,t);case te:y=8,d|=8;break;case H:return e=kt(12,i,t,d|2),e.elementType=H,e.lanes=f,e;case J:return e=kt(13,i,t,d),e.elementType=J,e.lanes=f,e;case de:return e=kt(19,i,t,d),e.elementType=de,e.lanes=f,e;case Q:return Ti(i,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:y=10;break e;case ee:y=9;break e;case G:y=11;break e;case je:y=14;break e;case ue:y=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=kt(y,i,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function Dr(e,t,i,l){return e=kt(7,e,l,t),e.lanes=i,e}function Ti(e,t,i,l){return e=kt(22,e,l,t),e.elementType=Q,e.lanes=i,e.stateNode={isHidden:!1},e}function Xo(e,t,i){return e=kt(6,e,null,t),e.lanes=i,e}function Zo(e,t,i){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ym(e,t,i,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function el(e,t,i,l,d,f,y,x,N){return e=new Ym(e,t,i,x,N),t===1?(t=1,f===!0&&(t|=8)):t=0,f=kt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},fo(f),e}function Xm(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function zd(e){if(!e)return cr;e=e._reactInternals;e:{if(_r(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var i=e.type;if(lt(i))return pu(e,i,t)}return t}function Fd(e,t,i,l,d,f,y,x,N){return e=el(i,l,!0,e,d,f,y,x,N),e.context=zd(null),i=e.current,l=it(),d=gr(i),f=Yt(l,d),f.callback=t??null,hr(i,f,d),e.current.lanes=d,Un(e,d,l),dt(e,l),e}function Pi(e,t,i,l){var d=t.current,f=it(),y=gr(d);return i=zd(i),t.context===null?t.context=i:t.pendingContext=i,t=Yt(f,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=hr(d,t,y),e!==null&&(It(e,d,y,f),oi(e,d,y)),y}function Ri(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function tl(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}function Zm(){return null}var qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function rl(e){this._internalRoot=e}Oi.prototype.render=rl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Pi(e,t,null,null)},Oi.prototype.unmount=rl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Or(function(){Pi(null,e,null,null)}),t[Wt]=null}};function Oi(e){this._internalRoot=e}Oi.prototype.unstable_scheduleHydration=function(e){if(e){var t=kc();e={blockedOn:null,target:e,priority:t};for(var i=0;i<sr.length&&t!==0&&t<sr[i].priority;i++);sr.splice(i,0,e),i===0&&Tc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ai(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function eg(e,t,i,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var A=Ri(y);f.call(A)}}var y=Fd(t,l,e,0,null,!1,!1,"",Vd);return e._reactRootContainer=y,e[Wt]=y.current,Zn(e.nodeType===8?e.parentNode:e),Or(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var x=l;l=function(){var A=Ri(N);x.call(A)}}var N=el(e,0,!1,null,null,!1,!1,"",Vd);return e._reactRootContainer=N,e[Wt]=N.current,Zn(e.nodeType===8?e.parentNode:e),Or(function(){Pi(t,N,i,l)}),N}function Ii(e,t,i,l,d){var f=i._reactRootContainer;if(f){var y=f;if(typeof d=="function"){var x=d;d=function(){var N=Ri(y);x.call(N)}}Pi(t,y,e,d)}else y=eg(i,t,e,d,l);return Ri(y)}Nc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Mn(t.pendingLanes);i!==0&&(ka(t,i|1),dt(t,Le()),(be&6)===0&&(gn=Le()+500,ur()))}break;case 13:Or(function(){var l=Qt(e,1);if(l!==null){var d=it();It(l,e,1,d)}}),tl(e,1)}},Ea=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var i=it();It(t,e,134217728,i)}tl(e,134217728)}},Sc=function(e){if(e.tag===13){var t=gr(e),i=Qt(e,t);if(i!==null){var l=it();It(i,e,t,l)}tl(e,t)}},kc=function(){return Se},Ec=function(e,t){var i=Se;try{return Se=e,t()}finally{Se=i}},xa=function(e,t,i){switch(t){case"input":if(da(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var d=Ys(l);if(!d)throw Error(n(90));Yl(l),da(l,d)}}}break;case"textarea":rc(e,i);break;case"select":t=i.value,t!=null&&Wr(e,!!i.multiple,t,!1)}},dc=Go,hc=Or;var tg={usingClientEntryPoint:!1,Events:[rs,rn,Ys,cc,uc,Go]},gs={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rg={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gc(e),e===null?null:e.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Zm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Di.isDisabled&&Di.supportsFiber)try{Os=Di.inject(rg),Mt=Di}catch{}}return ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tg,ht.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(t))throw Error(n(200));return Xm(e,t,null,i)},ht.createRoot=function(e,t){if(!nl(e))throw Error(n(299));var i=!1,l="",d=qd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=el(e,1,!1,null,null,i,!1,l,d),e[Wt]=t.current,Zn(e.nodeType===8?e.parentNode:e),new rl(t)},ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=gc(t),e=e===null?null:e.stateNode,e},ht.flushSync=function(e){return Or(e)},ht.hydrate=function(e,t,i){if(!Ai(t))throw Error(n(200));return Ii(null,e,t,!0,i)},ht.hydrateRoot=function(e,t,i){if(!nl(e))throw Error(n(405));var l=i!=null&&i.hydratedSources||null,d=!1,f="",y=qd;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=Fd(t,null,e,1,i??null,d,!1,f,y),e[Wt]=t.current,Zn(e),l)for(e=0;e<l.length;e++)i=l[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new Oi(t)},ht.render=function(e,t,i){if(!Ai(t))throw Error(n(200));return Ii(null,e,t,!1,i)},ht.unmountComponentAtNode=function(e){if(!Ai(e))throw Error(n(40));return e._reactRootContainer?(Or(function(){Ii(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1},ht.unstable_batchedUpdates=Go,ht.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!Ai(i))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Ii(e,t,i,!1,l)},ht.version="18.3.1-next-f1338f8080-20240426",ht}var Xd;function fg(){if(Xd)return al.exports;Xd=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),al.exports=hg(),al.exports}var Zd;function pg(){if(Zd)return $i;Zd=1;var o=fg();return $i.createRoot=o.createRoot,$i.hydrateRoot=o.hydrateRoot,$i}var mg=pg(),_=Il();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yg=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,a)=>a?a.toUpperCase():n.toLowerCase()),eh=o=>{const r=yg(o);return r.charAt(0).toUpperCase()+r.slice(1)},Bh=(...o)=>o.filter((r,n,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=_.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:c="",children:u,iconNode:h,...p},m)=>_.createElement("svg",{ref:m,...vg,width:r,height:r,stroke:o,strokeWidth:a?Number(n)*24/Number(r):n,className:Bh("lucide",c),...p},[...h.map(([g,v])=>_.createElement(g,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(o,r)=>{const n=_.forwardRef(({className:a,...c},u)=>_.createElement(xg,{ref:u,iconNode:r,className:Bh(`lucide-${gg(eh(o))}`,`lucide-${o}`,a),...c}));return n.displayName=eh(o),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qh=me("activity",wg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],jg=me("arrow-down",bg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Dl=me("award",_g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Sg=me("bell",Ng);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Eg=me("briefcase",kg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Tg=me("building-2",Cg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],er=me("calendar",Pg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Vh=me("chart-column",Rg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ag=me("chevron-down",Og);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Dg=me("chevron-left",Ig);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lg=me("chevron-right",$g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hh=me("circle-alert",Mg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_s=me("circle-check-big",Ug);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fg=me("circle-check",zg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wh=me("circle-x",Bg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vg=me("circle",qg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Wg=me("clipboard-check",Hg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Kh=me("clock",Kg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Jg=me("database",Gg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],$l=me("download",Qg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xg=me("eye-off",Yg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gh=me("eye",Zg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Et=me("file-text",e0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],th=me("file",t0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Jh=me("flag",r0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],s0=me("folder-kanban",n0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ll=me("funnel",i0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],o0=me("grip-vertical",a0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],c0=me("key",l0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ji=me("mail",u0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sa=me("map-pin",d0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gl=me("package",h0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],p0=me("pencil",f0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],rh=me("phone",m0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],at=me("plus",g0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ns=me("search",y0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ml=me("send",v0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ul=me("settings",x0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],b0=me("share-2",w0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jr=me("square-pen",j0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3",key:"1pi83i"}],["path",{d:"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3",key:"ido5k7"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],N0=me("square-split-vertical",_0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Vt=me("trash-2",S0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],zl=me("trending-up",k0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C0=me("triangle-alert",E0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qh=me("user",T0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Yh=me("users",P0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Xh=me("video",R0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],nh=me("workflow",O0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hr=me("x",A0);function I0({currentPage:o,onNavigate:r}){const n=[{icon:Eg,label:"Portefeuille projets",page:"portfolio"},{icon:s0,label:"Projets",page:"projects"},{icon:er,label:"Planning",page:"planning"},{icon:Yh,label:"Ressources",page:"resources"},{icon:Tg,label:"Clients",page:"clients"},{icon:Dl,label:"Comptences",page:"competences"},{icon:gl,label:"Articles",page:"articles"},{icon:Vh,label:"Reporting",page:"reporting"},{icon:Ul,label:"Administration",page:"administration"}];return s.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[s.jsx("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white",children:"PM"})}),s.jsx("span",{className:"text-gray-900",children:"ProjectHub"})]})}),s.jsx("nav",{className:"flex-1 px-4 py-6",children:s.jsx("ul",{className:"space-y-1",children:n.map(a=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>r(a.page),className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-colors ${o===a.page?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx(a.icon,{className:"w-5 h-5"}),s.jsx("span",{children:a.label})]})},a.label))})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-700",children:"JD"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-gray-900 truncate",children:"Jean Dupont"}),s.jsx("div",{className:"text-gray-500 text-sm",children:"Chef de projet"})]})]})})]})}function Ve({isOpen:o,onClose:r,title:n,children:a,size:c="md"}){if(!o)return null;const u={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),s.jsxs("div",{className:`relative bg-white rounded-xl shadow-2xl w-full ${u[c]} mx-4 max-h-[90vh] flex flex-col`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-gray-900",children:n}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Hr,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a})]})]})}var yl=function(o,r){return yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},yl(o,r)};function Zh(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");yl(o,r);function n(){this.constructor=o}o.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Qi=function(){return Qi=Object.assign||function(r){for(var n,a=1,c=arguments.length;a<c;a++){n=arguments[a];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},Qi.apply(this,arguments)};function Pn(o,r){var n={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&r.indexOf(a)<0&&(n[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(o);c<a.length;c++)r.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(o,a[c])&&(n[a[c]]=o[a[c]]);return n}function ef(o,r,n,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,n):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,r,n,a);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(u=(c<3?h(u):c>3?h(r,n,u):h(r,n))||u);return c>3&&u&&Object.defineProperty(r,n,u),u}function tf(o,r){return function(n,a){r(n,a,o)}}function rf(o,r,n,a,c,u){function h(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var p=a.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!r&&o?a.static?o:o.prototype:null,v=r||(g?Object.getOwnPropertyDescriptor(g,a.name):{}),j,w=!1,b=n.length-1;b>=0;b--){var S={};for(var C in a)S[C]=C==="access"?{}:a[C];for(var C in a.access)S.access[C]=a.access[C];S.addInitializer=function(T){if(w)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(T||null))};var E=(0,n[b])(p==="accessor"?{get:v.get,set:v.set}:v[m],S);if(p==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(j=h(E.get))&&(v.get=j),(j=h(E.set))&&(v.set=j),(j=h(E.init))&&c.unshift(j)}else(j=h(E))&&(p==="field"?c.unshift(j):v[m]=j)}g&&Object.defineProperty(g,a.name,v),w=!0}function nf(o,r,n){for(var a=arguments.length>2,c=0;c<r.length;c++)n=a?r[c].call(o,n):r[c].call(o);return a?n:void 0}function sf(o){return typeof o=="symbol"?o:"".concat(o)}function af(o,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function of(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function ne(o,r,n,a){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function p(v){try{g(a.next(v))}catch(j){h(j)}}function m(v){try{g(a.throw(v))}catch(j){h(j)}}function g(v){v.done?u(v.value):c(v.value).then(p,m)}g((a=a.apply(o,r||[])).next())})}function lf(o,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,c,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(a=1,c&&(u=g[0]&2?c.return:g[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,g[1])).done)return u;switch(c=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,c=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){n.label=g[1];break}if(g[0]===6&&n.label<u[1]){n.label=u[1],u=g;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(g);break}u[2]&&n.ops.pop(),n.trys.pop();continue}g=r.call(o,n)}catch(v){g=[6,v],c=0}finally{a=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var ia=Object.create?(function(o,r,n,a){a===void 0&&(a=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(o,a,c)}):(function(o,r,n,a){a===void 0&&(a=n),o[a]=r[n]});function cf(o,r){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&ia(r,o,n)}function Yi(o){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&o[r],a=0;if(n)return n.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&a>=o.length&&(o=void 0),{value:o&&o[a++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fl(o,r){var n=typeof Symbol=="function"&&o[Symbol.iterator];if(!n)return o;var a=n.call(o),c,u=[],h;try{for(;(r===void 0||r-- >0)&&!(c=a.next()).done;)u.push(c.value)}catch(p){h={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(h)throw h.error}}return u}function uf(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Fl(arguments[r]));return o}function df(){for(var o=0,r=0,n=arguments.length;r<n;r++)o+=arguments[r].length;for(var a=Array(o),c=0,r=0;r<n;r++)for(var u=arguments[r],h=0,p=u.length;h<p;h++,c++)a[c]=u[h];return a}function hf(o,r,n){if(n||arguments.length===2)for(var a=0,c=r.length,u;a<c;a++)(u||!(a in r))&&(u||(u=Array.prototype.slice.call(r,0,a)),u[a]=r[a]);return o.concat(u||Array.prototype.slice.call(r))}function En(o){return this instanceof En?(this.v=o,this):new En(o)}function ff(o,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(o,r||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),c[Symbol.asyncIterator]=function(){return this},c;function h(b){return function(S){return Promise.resolve(S).then(b,j)}}function p(b,S){a[b]&&(c[b]=function(C){return new Promise(function(E,T){u.push([b,C,E,T])>1||m(b,C)})},S&&(c[b]=S(c[b])))}function m(b,S){try{g(a[b](S))}catch(C){w(u[0][3],C)}}function g(b){b.value instanceof En?Promise.resolve(b.value.v).then(v,j):w(u[0][2],b)}function v(b){m("next",b)}function j(b){m("throw",b)}function w(b,S){b(S),u.shift(),u.length&&m(u[0][0],u[0][1])}}function pf(o){var r,n;return r={},a("next"),a("throw",function(c){throw c}),a("return"),r[Symbol.iterator]=function(){return this},r;function a(c,u){r[c]=o[c]?function(h){return(n=!n)?{value:En(o[c](h)),done:!1}:u?u(h):h}:u}}function mf(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],n;return r?r.call(o):(o=typeof Yi=="function"?Yi(o):o[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(u){n[u]=o[u]&&function(h){return new Promise(function(p,m){h=o[u](h),c(p,m,h.done,h.value)})}}function c(u,h,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},h)}}function gf(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}var D0=Object.create?(function(o,r){Object.defineProperty(o,"default",{enumerable:!0,value:r})}):function(o,r){o.default=r},vl=function(o){return vl=Object.getOwnPropertyNames||function(r){var n=[];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[n.length]=a);return n},vl(o)};function yf(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var n=vl(o),a=0;a<n.length;a++)n[a]!=="default"&&ia(r,o,n[a]);return D0(r,o),r}function vf(o){return o&&o.__esModule?o:{default:o}}function xf(o,r,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?o!==r||!a:!r.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(o):a?a.value:r.get(o)}function wf(o,r,n,a,c){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?o!==r||!c:!r.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?c.call(o,n):c?c.value=n:r.set(o,n),n}function bf(o,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?r===o:o.has(r)}function jf(o,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var a,c;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=r[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=r[Symbol.dispose],n&&(c=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");c&&(a=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),o.stack.push({value:r,dispose:a,async:n})}else n&&o.stack.push({async:!0});return r}var $0=typeof SuppressedError=="function"?SuppressedError:function(o,r,n){var a=new Error(n);return a.name="SuppressedError",a.error=o,a.suppressed=r,a};function _f(o){function r(u){o.error=o.hasError?new $0(u,o.error,"An error was suppressed during disposal."):u,o.hasError=!0}var n,a=0;function c(){for(;n=o.stack.pop();)try{if(!n.async&&a===1)return a=0,o.stack.push(n),Promise.resolve().then(c);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(u).then(c,function(h){return r(h),c()})}else a|=1}catch(h){r(h)}if(a===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return c()}function Nf(o,r){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,a,c,u,h){return a?r?".jsx":".js":c&&(!u||!h)?n:c+u+"."+h.toLowerCase()+"js"}):o}const L0={__extends:Zh,__assign:Qi,__rest:Pn,__decorate:ef,__param:tf,__esDecorate:rf,__runInitializers:nf,__propKey:sf,__setFunctionName:af,__metadata:of,__awaiter:ne,__generator:lf,__createBinding:ia,__exportStar:cf,__values:Yi,__read:Fl,__spread:uf,__spreadArrays:df,__spreadArray:hf,__await:En,__asyncGenerator:ff,__asyncDelegator:pf,__asyncValues:mf,__makeTemplateObject:gf,__importStar:yf,__importDefault:vf,__classPrivateFieldGet:xf,__classPrivateFieldSet:wf,__classPrivateFieldIn:bf,__addDisposableResource:jf,__disposeResources:_f,__rewriteRelativeImportExtension:Nf},M0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jf,get __assign(){return Qi},__asyncDelegator:pf,__asyncGenerator:ff,__asyncValues:mf,__await:En,__awaiter:ne,__classPrivateFieldGet:xf,__classPrivateFieldIn:bf,__classPrivateFieldSet:wf,__createBinding:ia,__decorate:ef,__disposeResources:_f,__esDecorate:rf,__exportStar:cf,__extends:Zh,__generator:lf,__importDefault:vf,__importStar:yf,__makeTemplateObject:gf,__metadata:of,__param:tf,__propKey:sf,__read:Fl,__rest:Pn,__rewriteRelativeImportExtension:Nf,__runInitializers:nf,__setFunctionName:af,__spread:uf,__spreadArray:hf,__spreadArrays:df,__values:Yi,default:L0},Symbol.toStringTag,{value:"Module"})),U0=o=>o?(...r)=>o(...r):(...r)=>fetch(...r);class aa extends Error{constructor(r,n="FunctionsError",a){super(r),this.name=n,this.context=a}}class Sf extends aa{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class xl extends aa{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class wl extends aa{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Xi;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Xi||(Xi={}));class z0{constructor(r,{headers:n={},customFetch:a,region:c=Xi.Any}={}){this.url=r,this.headers=n,this.region=c,this.fetch=U0(a)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return ne(this,arguments,void 0,function*(n,a={}){var c;let u,h;try{const{headers:p,method:m,body:g,signal:v,timeout:j}=a;let w={},{region:b}=a;b||(b=this.region);const S=new URL(`${this.url}/${n}`);b&&b!=="any"&&(w["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let C;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",C=g):typeof g=="string"?(w["Content-Type"]="text/plain",C=g):typeof FormData<"u"&&g instanceof FormData?C=g:(w["Content-Type"]="application/json",C=JSON.stringify(g)):C=g;let E=v;j&&(h=new AbortController,u=setTimeout(()=>h.abort(),j),v?(E=h.signal,v.addEventListener("abort",()=>h.abort())):E=h.signal);const T=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),p),body:C,signal:E}).catch($=>{throw new Sf($)}),I=T.headers.get("x-relay-error");if(I&&I==="true")throw new xl(T);if(!T.ok)throw new wl(T);let D=((c=T.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),U;return D==="application/json"?U=yield T.json():D==="application/octet-stream"||D==="application/pdf"?U=yield T.blob():D==="text/event-stream"?U=T:D==="multipart/form-data"?U=yield T.formData():U=yield T.text(),{data:U,error:null,response:T}}catch(p){return{data:null,error:p,response:p instanceof wl||p instanceof xl?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var nt={};const Rn=ag(M0);var Li={},Mi={},Ui={},zi={},Fi={},Bi={},sh;function kf(){if(sh)return Bi;sh=1,Object.defineProperty(Bi,"__esModule",{value:!0});class o extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Bi.default=o,Bi}var ih;function Ef(){if(ih)return Fi;ih=1,Object.defineProperty(Fi,"__esModule",{value:!0});const r=Rn.__importDefault(kf());class n{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,v,j,w;let b=null,S=null,C=null,E=m.status,T=m.statusText;if(m.ok){if(this.method!=="HEAD"){const $=await m.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=$:S=JSON.parse($))}const D=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),U=(j=m.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");D&&U&&U.length>1&&(C=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,C=null,E=406,T="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const D=await m.text();try{b=JSON.parse(D),Array.isArray(b)&&m.status===404&&(S=[],b=null,E=200,T="OK")}catch{m.status===404&&D===""?(E=204,T="No Content"):b={message:D}}if(b&&this.isMaybeSingle&&(!((w=b?.details)===null||w===void 0)&&w.includes("0 rows"))&&(b=null,E=200,T="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:S,count:C,status:E,statusText:T}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,v,j,w,b,S;let C="";const E=m?.cause;if(E){const T=(g=E?.message)!==null&&g!==void 0?g:"",I=(v=E?.code)!==null&&v!==void 0?v:"";C=`${(j=m?.name)!==null&&j!==void 0?j:"FetchError"}: ${m?.message}`,C+=`

Caused by: ${(w=E?.name)!==null&&w!==void 0?w:"Error"}: ${T}`,I&&(C+=` (${I})`),E?.stack&&(C+=`
${E.stack}`)}else C=(b=m?.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(S=m?.name)!==null&&S!==void 0?S:"FetchError"}: ${m?.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(c,u)}returns(){return this}overrideTypes(){return this}}return Fi.default=n,Fi}var ah;function Cf(){if(ah)return zi;ah=1,Object.defineProperty(zi,"__esModule",{value:!0});const r=Rn.__importDefault(Ef());class n extends r.default{select(c){let u=!1;const h=(c??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",v=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${v?`${v},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var v;const j=[c?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),w=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${w}"; options=${j};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return zi.default=n,zi}var oh;function Bl(){if(oh)return Ui;oh=1,Object.defineProperty(Ui,"__esModule",{value:!0});const r=Rn.__importDefault(Cf()),n=new RegExp("[,()]");class a extends r.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}regexMatch(u,h){return this.url.searchParams.append(u,`match.${h}`),this}regexIMatch(u,h){return this.url.searchParams.append(u,`imatch.${h}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}isDistinct(u,h){return this.url.searchParams.append(u,`isdistinct.${h}`),this}in(u,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const v=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${g}fts${v}.${h}`),this}match(u){return Object.entries(u).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(u,h,p){return this.url.searchParams.append(u,`not.${h}.${p}`),this}or(u,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,h,p){return this.url.searchParams.append(u,`${h}.${p}`),this}}return Ui.default=a,Ui}var lh;function Tf(){if(lh)return Mi;lh=1,Object.defineProperty(Mi,"__esModule",{value:!0});const r=Rn.__importDefault(Bl());class n{constructor(c,{headers:u={},schema:h,fetch:p}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(c,u){const{head:h=!1,count:p}=u??{},m=h?"HEAD":"GET";let g=!1;const v=(c??"*").split("").map(j=>/\s/.test(j)&&!g?"":(j==='"'&&(g=!g),j)).join("");return this.url.searchParams.set("select",v),p&&this.headers.append("Prefer",`count=${p}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((v,j)=>v.concat(Object.keys(j)),[]);if(g.length>0){const v=[...new Set(g)].map(j=>`"${j}"`);this.url.searchParams.set("columns",v.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var g;const v="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const j=c.reduce((w,b)=>w.concat(Object.keys(b)),[]);if(j.length>0){const w=[...new Set(j)].map(b=>`"${b}"`);this.url.searchParams.set("columns",w.join(","))}}return new r.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new r.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Mi.default=n,Mi}var ch;function F0(){if(ch)return Li;ch=1,Object.defineProperty(Li,"__esModule",{value:!0});const o=Rn,r=o.__importDefault(Tf()),n=o.__importDefault(Bl());class a{constructor(u,{headers:h={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${u}`);return new r.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:m=!1,count:g}={}){var v;let j;const w=new URL(`${this.url}/rpc/${u}`);let b;p||m?(j=p?"HEAD":"GET",Object.entries(h).filter(([C,E])=>E!==void 0).map(([C,E])=>[C,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([C,E])=>{w.searchParams.append(C,E)})):(j="POST",b=h);const S=new Headers(this.headers);return g&&S.set("Prefer",`count=${g}`),new n.default({method:j,url:w,headers:S,schema:this.schemaName,body:b,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Li.default=a,Li}var uh;function B0(){if(uh)return nt;uh=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const o=Rn,r=o.__importDefault(F0());nt.PostgrestClient=r.default;const n=o.__importDefault(Tf());nt.PostgrestQueryBuilder=n.default;const a=o.__importDefault(Bl());nt.PostgrestFilterBuilder=a.default;const c=o.__importDefault(Cf());nt.PostgrestTransformBuilder=c.default;const u=o.__importDefault(Ef());nt.PostgrestBuilder=u.default;const h=o.__importDefault(kf());return nt.PostgrestError=h.default,nt.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},nt}var Pf=B0();const Rf=ig(Pf),q0=sg({__proto__:null,default:Rf},[Pf]),{PostgrestClient:V0,PostgrestQueryBuilder:Nw,PostgrestFilterBuilder:Sw,PostgrestTransformBuilder:kw,PostgrestBuilder:Ew,PostgrestError:H0}=Rf||q0;class Of{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,c=parseInt(a.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const a=this.getWebSocketConstructor();return new a(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const W0="2.87.3",K0=`realtime-js/${W0}`,Af="1.0.0",G0="2.0.0",dh=Af,bl=1e4,J0=1e3,Q0=100;var Fr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Fr||(Fr={}));var ze;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(ze||(ze={}));var Lt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Lt||(Lt={}));var jl;(function(o){o.websocket="websocket"})(jl||(jl={}));var Br;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Br||(Br={}));class Y0{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let a=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,a;const c=(a=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(r){var n,a;const c=(a=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&a!==void 0?a:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,n,a){var c,u;const h=r.topic,p=(c=r.ref)!==null&&c!==void 0?c:"",m=(u=r.join_ref)!==null&&u!==void 0?u:"",g=r.payload.event,v=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},j=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`metadata length ${j.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+g.length+j.length,b=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(b),C=0;S.setUint8(C++,this.KINDS.userBroadcastPush),S.setUint8(C++,m.length),S.setUint8(C++,p.length),S.setUint8(C++,h.length),S.setUint8(C++,g.length),S.setUint8(C++,j.length),S.setUint8(C++,n),Array.from(m,T=>S.setUint8(C++,T.charCodeAt(0))),Array.from(p,T=>S.setUint8(C++,T.charCodeAt(0))),Array.from(h,T=>S.setUint8(C++,T.charCodeAt(0))),Array.from(g,T=>S.setUint8(C++,T.charCodeAt(0))),Array.from(j,T=>S.setUint8(C++,T.charCodeAt(0)));var E=new Uint8Array(b.byteLength+a.byteLength);return E.set(new Uint8Array(b),0),E.set(new Uint8Array(a),b.byteLength),E.buffer}decode(r,n){if(this._isArrayBuffer(r)){let a=this._binaryDecode(r);return n(a)}if(typeof r=="string"){const a=JSON.parse(r),[c,u,h,p,m]=a;return n({join_ref:c,ref:u,topic:h,event:p,payload:m})}return n({})}_binaryDecode(r){const n=new DataView(r),a=n.getUint8(0),c=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,c)}}_decodeUserBroadcast(r,n,a){const c=n.getUint8(1),u=n.getUint8(2),h=n.getUint8(3),p=n.getUint8(4);let m=this.HEADER_LENGTH+4;const g=a.decode(r.slice(m,m+c));m=m+c;const v=a.decode(r.slice(m,m+u));m=m+u;const j=a.decode(r.slice(m,m+h));m=m+h;const w=r.slice(m,r.byteLength),b=p===this.JSON_ENCODING?JSON.parse(a.decode(w)):w,S={type:this.BROADCAST_EVENT,event:v,payload:b};return h>0&&(S.meta=JSON.parse(j)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([a])=>n.includes(a)))}}class If{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Ce||(Ce={}));const hh=(o,r,n={})=>{var a;const c=(a=n.skipTypes)!==null&&a!==void 0?a:[];return r?Object.keys(r).reduce((u,h)=>(u[h]=X0(h,o,r,c),u),{}):{}},X0=(o,r,n,a)=>{const c=r.find(p=>p.name===o),u=c?.type,h=n[o];return u&&!a.includes(u)?Df(u,h):_l(h)},Df=(o,r)=>{if(o.charAt(0)==="_"){const n=o.slice(1,o.length);return ry(r,n)}switch(o){case Ce.bool:return Z0(r);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return ey(r);case Ce.json:case Ce.jsonb:return ty(r);case Ce.timestamp:return ny(r);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return _l(r);default:return _l(r)}},_l=o=>o,Z0=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},ey=o=>{if(typeof o=="string"){const r=parseFloat(o);if(!Number.isNaN(r))return r}return o},ty=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(r){return console.log(`JSON parse error: ${r}`),o}return o},ry=(o,r)=>{if(typeof o!="string")return o;const n=o.length-1,a=o[n];if(o[0]==="{"&&a==="}"){let u;const h=o.slice(1,n);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>Df(r,p))}return o},ny=o=>typeof o=="string"?o.replace(" ","T"):o,$f=o=>{const r=new URL(o);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class cl{constructor(r,n,a={},c=bl){this.channel=r,this.event=n,this.payload=a,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var a;return this._hasReceived(r)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(a=>a.status===r).forEach(a=>a.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Nl;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Nl||(Nl={}));class Nn{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nn.syncState(this.state,c,u,h),this.pendingDiffs.forEach(m=>{this.state=Nn.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Nn.syncDiff(this.state,c,u,h),p())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,a,c){const u=this.cloneDeep(r),h=this.transformState(n),p={},m={};return this.map(u,(g,v)=>{h[g]||(m[g]=v)}),this.map(h,(g,v)=>{const j=u[g];if(j){const w=v.map(E=>E.presence_ref),b=j.map(E=>E.presence_ref),S=v.filter(E=>b.indexOf(E.presence_ref)<0),C=j.filter(E=>w.indexOf(E.presence_ref)<0);S.length>0&&(p[g]=S),C.length>0&&(m[g]=C)}else p[g]=v}),this.syncDiff(u,{joins:p,leaves:m},a,c)}static syncDiff(r,n,a,c){const{joins:u,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),c||(c=()=>{}),this.map(u,(p,m)=>{var g;const v=(g=r[p])!==null&&g!==void 0?g:[];if(r[p]=this.cloneDeep(m),v.length>0){const j=r[p].map(b=>b.presence_ref),w=v.filter(b=>j.indexOf(b.presence_ref)<0);r[p].unshift(...w)}a(p,v,m)}),this.map(h,(p,m)=>{let g=r[p];if(!g)return;const v=m.map(j=>j.presence_ref);g=g.filter(j=>v.indexOf(j.presence_ref)<0),r[p]=g,c(p,g,m),g.length===0&&delete r[p]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(a=>n(a,r[a]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,a)=>{const c=r[a];return"metas"in c?n[a]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[a]=c,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sl;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Sl||(Sl={}));var Sn;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Sn||(Sn={}));var qt;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));const sy=ze;class qr{constructor(r,n={config:{}},a){var c,u;if(this.topic=r,this.params=n,this.socket=a,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new cl(this,Lt.join,this.params,this.timeout),this.rejoinTimer=new If(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lt.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new Nn(this),this.broadcastEndpointURL=$f(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var a,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,g=(c=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&c!==void 0?c:[],v=!!this.bindings[Sn.PRESENCE]&&this.bindings[Sn.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,j={},w={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(b=>r?.(qt.CHANNEL_ERROR,b)),this._onClose(()=>r?.(qt.CLOSED)),this.updateJoinPayload(Object.assign({config:w},j)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){r?.(qt.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,E=(S=C?.length)!==null&&S!==void 0?S:0,T=[];for(let I=0;I<E;I++){const D=C[I],{filter:{event:U,schema:$,table:F,filter:L}}=D,te=b&&b[I];if(te&&te.event===U&&qr.isFilterValueEqual(te.schema,$)&&qr.isFilterValueEqual(te.table,F)&&qr.isFilterValueEqual(te.filter,L))T.push(Object.assign(Object.assign({},D),{id:te.id}));else{this.unsubscribe(),this.state=ze.errored,r?.(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,r&&r(qt.SUBSCRIBED);return}}).receive("error",b=>{this.state=ze.errored,r?.(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{r?.(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,a){return this.state===ze.joined&&r===Sn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,n,a)}async httpSend(r,n,a={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(r,n={}){var a,c;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,m;const g=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=ze.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(c=>{a=new cl(this,Lt.leave,{},r),a.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}async _fetchWithTimeout(r,n,a){const c=new AbortController,u=setTimeout(()=>c.abort(),a),h=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(u),h}_push(r,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new cl(this,r,n,a);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Q0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,a){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,a){var c,u;const h=r.toLocaleLowerCase(),{close:p,error:m,leave:g,join:v}=Lt;if(a&&[p,m,g,v].indexOf(h)>=0&&a!==this._joinRef())return;let w=this._onMessage(h,n,a);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(b=>{var S,C,E;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(C=b.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===h}).map(b=>b.callback(w,a)):(u=this.bindings[h])===null||u===void 0||u.filter(b=>{var S,C,E,T,I,D;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in b){const U=b.id,$=(S=b.filter)===null||S===void 0?void 0:S.event;return U&&((C=n.ids)===null||C===void 0?void 0:C.includes(U))&&($==="*"||$?.toLocaleLowerCase()===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const U=(I=(T=b?.filter)===null||T===void 0?void 0:T.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return U==="*"||U===((D=n?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===h}).map(b=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:C,table:E,commit_timestamp:T,type:I,errors:D}=S;w=Object.assign(Object.assign({},{schema:C,table:E,commit_timestamp:T,eventType:I,new:{},old:{},errors:D}),this._getPayloadRecords(S))}b.callback(w,a)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,a){const c=r.toLocaleLowerCase(),u={type:c,filter:n,callback:a};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(r,n){const a=r.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===a&&qr.isEqual(c.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const a in r)if(r[a]!==n[a])return!1;return!0}static isFilterValueEqual(r,n){return(r??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Lt.close,{},r)}_onError(r){this._on(Lt.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=hh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=hh(r.columns,r.old_record)),n}}const ul=()=>{},qi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iy=[1e3,2e3,5e3,1e4],ay=1e4,oy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lf{constructor(r,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bl,this.transport=null,this.heartbeatIntervalMs=qi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ul,this.ref=0,this.reconnectTimer=null,this.vsn=dh,this.logger=ul,this.conn=null,this.sendBuffer=[],this.serializer=new Y0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((a=n?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${jl.websocket}`,this.httpEndpoint=$f(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Of.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,a){this.logger(r,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Fr.connecting:return Br.Connecting;case Fr.open:return Br.Open;case Fr.closing:return Br.Closing;default:return Br.Closed}}isConnected(){return this.connectionState()===Br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const a=`realtime:${r}`,c=this.getChannels().find(u=>u.topic===a);if(c)return c;{const u=new qr(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:a,payload:c,ref:u}=r,h=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${n} ${a} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(J0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(a=>a.topic===r&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:c,payload:u,ref:h}=n,p=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${a} ${c} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(a)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fr.open||this.conn.readyState===Fr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Lt.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const a=r.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${r}${a}${c}`}_workerObjectUrl(r){let n;if(r)n=r;else{const a=new Blob([oy],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n,a=!1;if(r)n=r,a=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const u={access_token:n,version:K0};n&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(Lt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(a=>{try{a(n)}catch(c){this.log("error",`error in ${r} callback`,c)}})}catch(a){this.log("error",`error triggering ${r} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new If(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,a,c,u,h,p,m,g,v,j,w,b;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(a=r?.timeout)!==null&&a!==void 0?a:bl,this.heartbeatIntervalMs=(c=r?.heartbeatIntervalMs)!==null&&c!==void 0?c:qi.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:ul,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:dh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=r?.reconnectAfterMs)!==null&&g!==void 0?g:(S=>iy[S-1]||ay),this.vsn){case Af:this.encode=(v=r?.encode)!==null&&v!==void 0?v:((S,C)=>C(JSON.stringify(S))),this.decode=(j=r?.decode)!==null&&j!==void 0?j:((S,C)=>C(JSON.parse(S)));break;case G0:this.encode=(w=r?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(b=r?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class oa extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function De(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class ly extends oa{constructor(r,n,a){super(r),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kl extends oa{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}const ql=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),cy=()=>Response,El=o=>{if(Array.isArray(o))return o.map(n=>El(n));if(typeof o=="function"||o!==Object(o))return o;const r={};return Object.entries(o).forEach(([n,a])=>{const c=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[c]=El(a)}),r},uy=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},dy=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o),dl=o=>{var r;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(r=o.error)===null||r===void 0?void 0:r.message)||JSON.stringify(o)},hy=(o,r,n)=>ne(void 0,void 0,void 0,function*(){const a=yield cy();o instanceof a&&!n?.noResolveJson?o.json().then(c=>{const u=o.status||500,h=c?.statusCode||u+"";r(new ly(dl(c),u,h))}).catch(c=>{r(new kl(dl(c),c))}):r(new kl(dl(o),o))}),fy=(o,r,n,a)=>{const c={method:o,headers:r?.headers||{}};return o==="GET"||!a?c:(uy(a)?(c.headers=Object.assign({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(a)):c.body=a,r?.duplex&&(c.duplex=r.duplex),Object.assign(Object.assign({},c),n))};function Ss(o,r,n,a,c,u){return ne(this,void 0,void 0,function*(){return new Promise((h,p)=>{o(n,fy(r,a,c,u)).then(m=>{if(!m.ok)throw m;return a?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>hy(m,p,a))})})}function bs(o,r,n,a){return ne(this,void 0,void 0,function*(){return Ss(o,"GET",r,n,a)})}function $t(o,r,n,a,c){return ne(this,void 0,void 0,function*(){return Ss(o,"POST",r,a,c,n)})}function Cl(o,r,n,a,c){return ne(this,void 0,void 0,function*(){return Ss(o,"PUT",r,a,c,n)})}function py(o,r,n,a){return ne(this,void 0,void 0,function*(){return Ss(o,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function Vl(o,r,n,a,c){return ne(this,void 0,void 0,function*(){return Ss(o,"DELETE",r,a,c,n)})}class my{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}})}}var Mf;class gy{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[Mf]="BlobDownloadBuilder",this.promise=null}asStream(){return new my(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}})}}Mf=Symbol.toStringTag;const yy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vy{constructor(r,n={},a,c){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=a,this.fetch=ql(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,a,c){return ne(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},fh),c);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),c?.headers&&(p=Object.assign(Object.assign({},p),c.headers));const g=this._removeEmptyFolders(n),v=this._getFinalPath(g),j=yield(r=="PUT"?Cl:$t)(this.fetch,`${this.url}/object/${v}`,u,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:j.Id,fullPath:j.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}upload(r,n,a){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,a)})}uploadToSignedUrl(r,n,a,c){return ne(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",n);try{let m;const g=Object.assign({upsert:fh.upsert},c),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",a)):typeof FormData<"u"&&a instanceof FormData?(m=a,m.append("cacheControl",g.cacheControl)):(m=a,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType);const j=yield Cl(this.fetch,p.toString(),m,{headers:v});return{data:{path:u,fullPath:j.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(De(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,n){return ne(this,void 0,void 0,function*(){try{let a=this._getFinalPath(r);const c=Object.assign({},this.headers);n?.upsert&&(c["x-upsert"]="true");const u=yield $t(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:c}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new oa("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:p},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}update(r,n,a){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,a)})}move(r,n,a){return ne(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}copy(r,n,a){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}createSignedUrl(r,n,a){return ne(this,void 0,void 0,function*(){try{let c=this._getFinalPath(r),u=yield $t(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}createSignedUrls(r,n,a){return ne(this,void 0,void 0,function*(){try{const c=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}download(r,n){const c=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),h=u?`?${u}`:"",p=this._getFinalPath(r),m=()=>bs(this.fetch,`${this.url}/${c}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new gy(m,this.shouldThrowOnError)}info(r){return ne(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const a=yield bs(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:El(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}exists(r){return ne(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield py(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a)&&a instanceof kl){const c=a.originalError;if([400,404].includes(c?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(r,n){const a=this._getFinalPath(r),c=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&c.push(u);const p=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&c.push(m);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${a}${g}`)}}}remove(r){return ne(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}list(r,n,a){return ne(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},yy),n),{prefix:r||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}listV2(r,n){return ne(this,void 0,void 0,function*(){try{const a=Object.assign({},r);return{data:yield $t(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const Uf="2.87.3",zf={"X-Client-Info":`storage-js/${Uf}`};class xy{constructor(r,n={},a,c){this.shouldThrowOnError=!1;const u=new URL(r);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zf),n),this.fetch=ql(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return ne(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(r);return{data:yield bs(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}getBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}createBucket(r){return ne(this,arguments,void 0,function*(n,a={public:!1}){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}updateBucket(r,n){return ne(this,void 0,void 0,function*(){try{return{data:yield Cl(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}emptyBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}deleteBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var js=class extends Error{constructor(o,r){super(o),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function wy(o,r,n){const a=new URL(r,o);if(n)for(const[c,u]of Object.entries(n))u!==void 0&&a.searchParams.set(c,u);return a.toString()}async function by(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function jy(o){const r=o.fetchImpl??globalThis.fetch;return{async request({method:n,path:a,query:c,body:u,headers:h}){const p=wy(o.baseUrl,a,c),m=await by(o.auth),g=await r(p,{method:n,headers:{...u?{"Content-Type":"application/json"}:{},...m,...h},body:u?JSON.stringify(u):void 0}),v=await g.text(),j=(g.headers.get("content-type")||"").includes("application/json"),w=j&&v?JSON.parse(v):v;if(!g.ok){const b=j?w:void 0,S=b?.error;throw new js(S?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:S?.type,icebergCode:S?.code,details:b})}return{status:g.status,headers:g.headers,data:w}}}}function Vi(o){return o.join("")}var _y=class{constructor(o,r=""){this.client=o,this.prefix=r}async listNamespaces(o){const r=o?{parent:Vi(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(o,r){const n={namespace:o.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vi(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vi(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vi(o.namespace)}`}),!0}catch(r){if(r instanceof js&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(o,r){try{return await this.createNamespace(o,r)}catch(n){if(n instanceof js&&n.status===409)return;throw n}}};function vn(o){return o.join("")}var Ny=class{constructor(o,r="",n){this.client=o,this.prefix=r,this.accessDelegation=n}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables`})).data.identifiers}async createTable(o,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(o,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(o,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(o){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,headers:r})).data.metadata}async tableExists(o){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,headers:r}),!0}catch(n){if(n instanceof js&&n.status===404)return!1;throw n}}async createTableIfNotExists(o,r){try{return await this.createTable(o,r)}catch(n){if(n instanceof js&&n.status===409)return await this.loadTable({namespace:o.namespace,name:r.name});throw n}}},Sy=class{constructor(o){let r="v1";o.catalogName&&(r+=`/${o.catalogName}`);const n=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=jy({baseUrl:n,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=o.accessDelegation?.join(","),this.namespaceOps=new _y(this.client,r),this.tableOps=new Ny(this.client,r,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,r){return this.namespaceOps.createNamespace(o,r)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,r){return this.tableOps.createTable(o,r)}async updateTable(o,r){return this.tableOps.updateTable(o,r)}async dropTable(o,r){await this.tableOps.dropTable(o,r)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,r){return this.namespaceOps.createNamespaceIfNotExists(o,r)}async createTableIfNotExists(o,r){return this.tableOps.createTableIfNotExists(o,r)}};class ky{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zf),n),this.fetch=ql(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}listBuckets(r){return ne(this,void 0,void 0,function*(){try{const n=new URLSearchParams;r?.limit!==void 0&&n.set("limit",r.limit.toString()),r?.offset!==void 0&&n.set("offset",r.offset.toString()),r?.sortColumn&&n.set("sortColumn",r.sortColumn),r?.sortOrder&&n.set("sortOrder",r.sortOrder),r?.search&&n.set("search",r.search);const a=n.toString(),c=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield bs(this.fetch,c,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}deleteBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}from(r){if(!dy(r))throw new oa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Sy({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>ne(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(n,{get(u,h){const p=u[h];return typeof p!="function"?p:(...m)=>ne(this,void 0,void 0,function*(){try{return{data:yield p.apply(u,m),error:null}}catch(g){if(a)throw g;return{data:null,error:g}}})}})}}const Hl={"X-Client-Info":`storage-js/${Uf}`,"Content-Type":"application/json"};class Ff extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xt(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class hl extends Ff{constructor(r,n,a){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ey extends Ff{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}}var ph;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ph||(ph={}));const Wl=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Cy=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},mh=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Ty=(o,r,n)=>ne(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!n?.noResolveJson){const c=o.status||500,u=o;if(typeof u.json=="function")u.json().then(h=>{const p=h?.statusCode||h?.code||c+"";r(new hl(mh(h),c,p))}).catch(()=>{const h=c+"",p=u.statusText||`HTTP ${c} error`;r(new hl(p,c,h))});else{const h=c+"",p=u.statusText||`HTTP ${c} error`;r(new hl(p,c,h))}}else r(new Ey(mh(o),o))}),Py=(o,r,n,a)=>{const c={method:o,headers:r?.headers||{}};return a?(Cy(a)?(c.headers=Object.assign({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(a)):c.body=a,Object.assign(Object.assign({},c),n)):c};function Ry(o,r,n,a,c,u){return ne(this,void 0,void 0,function*(){return new Promise((h,p)=>{o(n,Py(r,a,c,u)).then(m=>{if(!m.ok)throw m;if(a?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>Ty(m,p,a))})})}function wt(o,r,n,a,c){return ne(this,void 0,void 0,function*(){return Ry(o,"POST",r,a,c,n)})}class Oy{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),n),this.fetch=Wl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return ne(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}getIndex(r,n){return ne(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}listIndexes(r){return ne(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}deleteIndex(r,n){return ne(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}}class Ay{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),n),this.fetch=Wl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return ne(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}getVectors(r){return ne(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}listVectors(r){return ne(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield wt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}queryVectors(r){return ne(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}deleteVectors(r){return ne(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}}class Iy{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),n),this.fetch=Wl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}getBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}listBuckets(){return ne(this,arguments,void 0,function*(r={}){try{return{data:yield wt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return ne(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}}class Dy extends Iy{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new $y(this.url,this.headers,r,this.fetch)}createBucket(r){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ne(this,void 0,void 0,function*(){return n.createBucket.call(this,r)})}getBucket(r){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ne(this,void 0,void 0,function*(){return n.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ne(this,arguments,void 0,function*(n={}){return r.listBuckets.call(this,n)})}deleteBucket(r){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ne(this,void 0,void 0,function*(){return n.deleteBucket.call(this,r)})}}class $y extends Oy{constructor(r,n,a,c){super(r,n,c),this.vectorBucketName=a}createIndex(r){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(n={}){return r.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new Ly(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class Ly extends Ay{constructor(r,n,a,c,u){super(r,n,u),this.vectorBucketName=a,this.indexName=c}putVectors(r){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(n={}){return r.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class My extends xy{constructor(r,n={},a,c){super(r,n,a,c)}from(r){return new vy(this.url,this.headers,r,this.fetch)}get vectors(){return new Dy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ky(this.url+"/iceberg",this.headers,this.fetch)}}const Uy="2.87.3";let vs="";typeof Deno<"u"?vs="deno":typeof document<"u"?vs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vs="react-native":vs="node";const zy={"X-Client-Info":`supabase-js-${vs}/${Uy}`},Fy={headers:zy},By={schema:"public"},qy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vy={},Hy=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Wy=()=>Headers,Ky=(o,r,n)=>{const a=Hy(n),c=Wy();return async(u,h)=>{var p;const m=(p=await r())!==null&&p!==void 0?p:o;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",o),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),a(u,Object.assign(Object.assign({},h),{headers:g}))}};function Gy(o){return o.endsWith("/")?o:o+"/"}function Jy(o,r){var n,a;const{db:c,auth:u,realtime:h,global:p}=o,{db:m,auth:g,realtime:v,global:j}=r,w={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},j),p),{headers:Object.assign(Object.assign({},(n=j?.headers)!==null&&n!==void 0?n:{}),(a=p?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return o.accessToken?w.accessToken=o.accessToken:delete w.accessToken,w}function Qy(o){const r=o?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Gy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Bf="2.87.3",jn=30*1e3,Tl=3,fl=Tl*jn,Yy="http://localhost:9999",Xy="supabase.auth.token",Zy={"X-Client-Info":`gotrue-js/${Bf}`},Pl="X-Supabase-Api-Version",qf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ev=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tv=600*1e3;class Cn extends Error{constructor(r,n,a){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function oe(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Vf extends Cn{constructor(r,n,a){super(r,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function Hf(o){return oe(o)&&o.name==="AuthApiError"}class wr extends Cn{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class Ht extends Cn{constructor(r,n,a,c){super(r,a,c),this.name=n,this.status=a}}class ft extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wf(o){return oe(o)&&o.name==="AuthSessionMissingError"}class Mr extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xs extends Ht{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class ws extends Ht{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Kf(o){return oe(o)&&o.name==="AuthImplicitGrantRedirectError"}class Rl extends Ht{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gf extends Ht{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function rv(o){return oe(o)&&o.name==="AuthPKCECodeVerifierMissingError"}class Zi extends Ht{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function Ki(o){return oe(o)&&o.name==="AuthRetryableFetchError"}class Ol extends Ht{constructor(r,n,a){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}function nv(o){return oe(o)&&o.name==="AuthWeakPasswordError"}class ea extends Ht{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ta="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gh=` 	
\r=`.split(""),sv=(()=>{const o=new Array(128);for(let r=0;r<o.length;r+=1)o[r]=-1;for(let r=0;r<gh.length;r+=1)o[gh[r].charCodeAt(0)]=-2;for(let r=0;r<ta.length;r+=1)o[ta[r].charCodeAt(0)]=r;return o})();function yh(o,r,n){if(o!==null)for(r.queue=r.queue<<8|o,r.queuedBits+=8;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(ta[a]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(ta[a]),r.queuedBits-=6}}function Jf(o,r,n){const a=sv[o];if(a>-1)for(r.queue=r.queue<<6|a,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function vh(o){const r=[],n=h=>{r.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{ov(h,a,n)};for(let h=0;h<o.length;h+=1)Jf(o.charCodeAt(h),c,u);return r.join("")}function iv(o,r){if(o<=127){r(o);return}else if(o<=2047){r(192|o>>6),r(128|o&63);return}else if(o<=65535){r(224|o>>12),r(128|o>>6&63),r(128|o&63);return}else if(o<=1114111){r(240|o>>18),r(128|o>>12&63),r(128|o>>6&63),r(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function av(o,r){for(let n=0;n<o.length;n+=1){let a=o.charCodeAt(n);if(a>55295&&a<=56319){const c=(a-55296)*1024&65535;a=(o.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}iv(a,r)}}function ov(o,r,n){if(r.utf8seq===0){if(o<=127){n(o);return}for(let a=1;a<6;a+=1)if((o>>7-a&1)===0){r.utf8seq=a;break}if(r.utf8seq===2)r.codepoint=o&31;else if(r.utf8seq===3)r.codepoint=o&15;else if(r.utf8seq===4)r.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|o&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function kn(o){const r=[],n={queue:0,queuedBits:0},a=c=>{r.push(c)};for(let c=0;c<o.length;c+=1)Jf(o.charCodeAt(c),n,a);return new Uint8Array(r)}function lv(o){const r=[];return av(o,n=>r.push(n)),new Uint8Array(r)}function Vr(o){const r=[],n={queue:0,queuedBits:0},a=c=>{r.push(c)};return o.forEach(c=>yh(c,n,a)),yh(null,n,a),r.join("")}function cv(o){return Math.round(Date.now()/1e3)+o}function uv(){return Symbol("auth-callback")}const Xe=()=>typeof window<"u"&&typeof document<"u",$r={tested:!1,writable:!1},Qf=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($r.tested)return $r.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),$r.tested=!0,$r.writable=!0}catch{$r.tested=!0,$r.writable=!1}return $r.writable};function dv(o){const r={},n=new URL(o);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,u)=>{r[u]=c})}catch{}return n.searchParams.forEach((a,c)=>{r[c]=a}),r}const Yf=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),hv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",_n=async(o,r,n)=>{await o.setItem(r,JSON.stringify(n))},Lr=async(o,r)=>{const n=await o.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ye=async(o,r)=>{await o.removeItem(r)};class la{constructor(){this.promise=new la.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}la.promiseConstructor=Promise;function pl(o){const r=o.split(".");if(r.length!==3)throw new ea("Invalid JWT structure");for(let a=0;a<r.length;a++)if(!ev.test(r[a]))throw new ea("JWT not in base64url format");return{header:JSON.parse(vh(r[0])),payload:JSON.parse(vh(r[1])),signature:kn(r[2]),raw:{header:r[0],payload:r[1]}}}async function fv(o){return await new Promise(r=>{setTimeout(()=>r(null),o)})}function pv(o,r){return new Promise((a,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await o(u);if(!r(u,null,h)){a(h);return}}catch(h){if(!r(u,h)){c(h);return}}})()})}function mv(o){return("0"+o.toString(16)).substr(-2)}function gv(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let c="";for(let u=0;u<56;u++)c+=n.charAt(Math.floor(Math.random()*a));return c}return crypto.getRandomValues(r),Array.from(r,mv).join("")}async function yv(o){const n=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(a);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function vv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const n=await yv(o);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xn(o,r,n=!1){const a=gv();let c=a;n&&(c+="/PASSWORD_RECOVERY"),await _n(o,`${r}-code-verifier`,c);const u=await vv(a);return[u,a===u?"plain":"s256"]}const xv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wv(o){const r=o.headers.get(Pl);if(!r||!r.match(xv))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function bv(o){if(!o)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(o<=r)throw new Error("JWT has expired")}function jv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _v=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(o){if(!_v.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ml(){const o={};return new Proxy(o,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nv(o,r){return new Proxy(o,{get:(n,a,c)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const u=a.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,c)}return!r.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,a,c)}})}function xh(o){return JSON.parse(JSON.stringify(o))}const Ur=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Sv=[502,503,504];async function wh(o){var r;if(!hv(o))throw new Zi(Ur(o),0);if(Sv.includes(o.status))throw new Zi(Ur(o),o.status);let n;try{n=await o.json()}catch(u){throw new wr(Ur(u),u)}let a;const c=wv(o);if(c&&c.getTime()>=qf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Ol(Ur(n),o.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(a==="session_not_found")throw new ft}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Ol(Ur(n),o.status,n.weak_password.reasons);throw new Vf(Ur(n),o.status||500,a)}const kv=(o,r,n,a)=>{const c={method:o,headers:r?.headers||{}};return o==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),c.body=JSON.stringify(a),Object.assign(Object.assign({},c),n))};async function pe(o,r,n,a){var c;const u=Object.assign({},a?.headers);u[Pl]||(u[Pl]=qf["2024-01-01"].name),a?.jwt&&(u.Authorization=`Bearer ${a.jwt}`);const h=(c=a?.query)!==null&&c!==void 0?c:{};a?.redirectTo&&(h.redirect_to=a.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await Ev(o,r,n+p,{headers:u,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function Ev(o,r,n,a,c,u){const h=kv(r,a,c,u);let p;try{p=await o(n,Object.assign({},h))}catch(m){throw console.error(m),new Zi(Ur(m),0)}if(p.ok||await wh(p),a?.noResolveJson)return p;try{return await p.json()}catch(m){await wh(m)}}function Dt(o){var r;let n=null;Pv(o)&&(n=Object.assign({},o),o.expires_at||(n.expires_at=cv(o.expires_in)));const a=(r=o.user)!==null&&r!==void 0?r:o;return{data:{session:n,user:a},error:null}}function bh(o){const r=Dt(o);return!r.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(r.data.weak_password=o.weak_password),r}function br(o){var r;return{data:{user:(r=o.user)!==null&&r!==void 0?r:o},error:null}}function Cv(o){return{data:o,error:null}}function Tv(o){const{action_link:r,email_otp:n,hashed_token:a,redirect_to:c,verification_type:u}=o,h=Pn(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:n,hashed_token:a,redirect_to:c,verification_type:u},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function jh(o){return o}function Pv(o){return o.access_token&&o.refresh_token&&o.expires_in}const Gi=["global","local","others"];class Kl{constructor({url:r="",headers:n={},fetch:a}){this.url=r,this.headers=n,this.fetch=Yf(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=Gi[0]){if(Gi.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gi.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}}async inviteUserByEmail(r,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:br})}catch(a){if(oe(a))return{data:{user:null},error:a};throw a}}async generateLink(r){try{const{options:n}=r,a=Pn(r,["options"]),c=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(c.new_email=a?.newEmail,delete c.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Tv,redirectTo:n?.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:br})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,a,c,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:jh});if(v.error)throw v.error;const j=await v.json(),w=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,b=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);g[`${E}Page`]=C}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},j),g),error:null}}catch(g){if(oe(g))return{data:{users:[]},error:g};throw g}}async getUserById(r){wn(r);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:br})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){wn(r);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:br})}catch(a){if(oe(a))return{data:{user:null},error:a};throw a}}async deleteUser(r,n=!1){wn(r);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:br})}catch(a){if(oe(a))return{data:{user:null},error:a};throw a}}async _listFactors(r){wn(r.userId);try{const{data:n,error:a}=await pe(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:a}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(r){wn(r.userId),wn(r.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,a,c,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:jh});if(v.error)throw v.error;const j=await v.json(),w=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,b=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);g[`${E}Page`]=C}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},j),g),error:null}}catch(g){if(oe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(r){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(oe(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(r){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function _h(o={}){return{getItem:r=>o[r]||null,setItem:(r,n)=>{o[r]=n},removeItem:r=>{delete o[r]}}}const zr={debug:!!(globalThis&&Qf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gl extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Xf extends Gl{}class Rv extends Gl{}async function Zf(o,r,n){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,r);const a=new globalThis.AbortController;return r>0&&setTimeout(()=>{a.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async c=>{if(c){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,c.name);try{return await n()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,c.name)}}else{if(r===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Xf(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(zr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Nh={};async function Ov(o,r,n){var a;const c=(a=Nh[o])!==null&&a!==void 0?a:Promise.resolve(),u=Promise.race([c.catch(()=>null),r>=0?new Promise((h,p)=>{setTimeout(()=>{p(new Rv(`Acquiring process lock with name "${o}" timed out`))},r)}):null].filter(h=>h)).catch(h=>{if(h&&h.isAcquireTimeout)throw h;return null}).then(async()=>await n());return Nh[o]=u.catch(async h=>{if(h&&h.isAcquireTimeout)return await c,null;throw h}),await u}function Av(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ep(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function Iv(o){return parseInt(o,16)}function Dv(o){const r=new TextEncoder().encode(o);return"0x"+Array.from(r,a=>a.toString(16).padStart(2,"0")).join("")}function $v(o){var r;const{chainId:n,domain:a,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:m,resources:g,scheme:v,uri:j,version:w}=o;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((r=o.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const b=ep(o.address),S=v?`${v}://${a}`:a,C=o.statement?`${o.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${b}

${C}`;let T=`URI: ${j}
Version: ${w}
Chain ID: ${n}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(T+=`
Expiration Time: ${c.toISOString()}`),p&&(T+=`
Not Before: ${p.toISOString()}`),m&&(T+=`
Request ID: ${m}`),g){let I=`
Resources:`;for(const D of g){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);I+=`
- ${D}`}T+=I}return`${E}
${T}`}class Fe extends Error{constructor({message:r,code:n,cause:a,name:c}){var u;super(r,{cause:a}),this.__isWebAuthnError=!0,this.name=(u=c??(a instanceof Error?a.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class ra extends Fe{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function Lv({error:o,options:r}){var n,a,c;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(r.mediation==="conditional"&&((a=u.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Fe({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const h=window.location.hostname;if(tp(h)){if(u.rp.id!==h)return new Fe({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function Mv({error:o,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Fe({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const a=window.location.hostname;if(tp(a)){if(n.rpId!==a)return new Fe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class Uv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const zv=new Uv;function Fv(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:r,user:n,excludeCredentials:a}=o,c=Pn(o,["challenge","user","excludeCredentials"]),u=kn(r).buffer,h=Object.assign(Object.assign({},n),{id:kn(n.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:u,user:h});if(a&&a.length>0){p.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const g=a[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:kn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function Bv(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:r,allowCredentials:n}=o,a=Pn(o,["challenge","allowCredentials"]),c=kn(r).buffer,u=Object.assign(Object.assign({},a),{challenge:c});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const p=n[h];u.allowCredentials[h]=Object.assign(Object.assign({},p),{id:kn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function qv(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const n=o;return{id:o.id,rawId:o.id,response:{attestationObject:Vr(new Uint8Array(o.response.attestationObject)),clientDataJSON:Vr(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Vv(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const n=o,a=o.getClientExtensionResults(),c=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:Vr(new Uint8Array(c.authenticatorData)),clientDataJSON:Vr(new Uint8Array(c.clientDataJSON)),signature:Vr(new Uint8Array(c.signature)),userHandle:c.userHandle?Vr(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function tp(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Sh(){var o,r;return!!(Xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function Hv(o){try{const r=await navigator.credentials.create(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ra("Browser returned unexpected credential type",r)}:{data:null,error:new ra("Empty credential response",r)}}catch(r){return{data:null,error:Lv({error:r,options:o})}}}async function Wv(o){try{const r=await navigator.credentials.get(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ra("Browser returned unexpected credential type",r)}:{data:null,error:new ra("Empty credential response",r)}}catch(r){return{data:null,error:Mv({error:r,options:o})}}}const Kv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Gv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function na(...o){const r=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),a={};for(const c of o)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))a[u]=h;else if(n(h))a[u]=h;else if(r(h)){const p=a[u];r(p)?a[u]=na(p,h):a[u]=na(h)}else a[u]=h}return a}function Jv(o,r){return na(Kv,o,r||{})}function Qv(o,r){return na(Gv,o,r||{})}class Yv{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:a,signal:c},u){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!h)return{data:null,error:p};const m=c??zv.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${a}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=Jv(h.webauthn.credential_options.publicKey,u?.create),{data:v,error:j}=await Hv({publicKey:g,signal:m});return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:j}}case"request":{const g=Qv(h.webauthn.credential_options.publicKey,u?.request),{data:v,error:j}=await Wv(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:m}));return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:j}}}}catch(h){return oe(h)?{data:null,error:h}:{data:null,error:new wr("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:a})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!n)return{data:null,error:new Cn("rpId is required for WebAuthn authentication")};try{if(!Sh())return{data:null,error:new wr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:a},signal:c},{request:u});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:a,credential_response:m.credential_response}})}catch(h){return oe(h)?{data:null,error:h}:{data:null,error:new wr("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!n)return{data:null,error:new Cn("rpId is required for WebAuthn registration")};try{if(!Sh())return{data:null,error:new wr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(v=>{var j;return(j=v.data)===null||j===void 0?void 0:j.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===r&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:c},{create:u});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return oe(h)?{data:null,error:h}:{data:null,error:new wr("Unexpected error in register",h)}}}}Av();const Xv={url:Yy,storageKey:Xy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function kh(o,r,n){return await n()}const bn={};class Tn{get jwks(){var r,n;return(n=(r=bn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=bn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{cachedAt:r})}constructor(r){var n,a,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Xv),r);if(this.storageKey=u.storageKey,this.instanceID=(n=Tn.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Tn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Xe()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Kl({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Yf(u.fetch),this.lock=u.lock||kh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Xe()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=Zf:this.lock=kh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Yv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Qf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_h(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=_h(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Bf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},a="none";if(Xe()&&(n=dv(window.location.href),this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce")),Xe()&&this.detectSessionInUrl&&a!=="none"){const{data:c,error:u}=await this._getSessionFromURL(n,a);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Kf(u)){const m=(r=u.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new wr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,a,c;try{const u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(c=r?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Dt}),{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var n,a,c;try{let u;if("email"in r){const{email:v,password:j,options:w}=r;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await xn(this.storage,this.storageKey)),u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:v,password:j,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:b,code_challenge_method:S},xform:Dt})}else if("phone"in r){const{phone:v,password:j,options:w}=r;u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:j,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(c=w?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Dt})}else throw new xs("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return await Ye(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:h,options:p}=r;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:bh})}else if("phone"in r){const{phone:u,password:h,options:p}=r;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:bh})}else throw new xs("You must provide either an email or phone number and a password");const{data:a,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a||!a.session||!a.user){const u=new Mr;return this._returnResult({data:{user:null,session:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:c})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,a,c,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=r.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,a,c,u,h,p,m,g,v,j,w;let b,S;if("message"in r)b=r.message,S=r.signature;else{const{chain:C,wallet:E,statement:T,options:I}=r;let D;if(Xe())if(typeof E=="object")D=E;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")D=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=E}const U=new URL((n=I?.url)!==null&&n!==void 0?n:window.location.href),$=await D.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=ep($[0]);let L=(a=I?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!L){const H=await D.request({method:"eth_chainId"});L=Iv(H)}const te={domain:U.host,address:F,statement:T,uri:U.href,version:"1",chainId:L,nonce:(c=I?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=I?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=I?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=I?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=I?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=I?.signInWithEthereum)===null||v===void 0?void 0:v.resources};b=$v(te),S=await D.request({method:"personal_sign",params:[Dv(b),F]})}try{const{data:C,error:E}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((j=r.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(w=r.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Dt});if(E)throw E;if(!C||!C.session||!C.user){const T=new Mr;return this._returnResult({data:{user:null,session:null},error:T})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:E})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(r){var n,a,c,u,h,p,m,g,v,j,w,b;let S,C;if("message"in r)S=r.message,C=r.signature;else{const{chain:E,wallet:T,statement:I,options:D}=r;let U;if(Xe())if(typeof T=="object")U=T;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))U=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=T}const $=new URL((n=D?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in U&&U.signIn){const F=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),I?{statement:I}:null));let L;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")L=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)L=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)S=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),C=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${$.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(c=(a=D?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=D?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((h=D?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((p=D?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((m=D?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((j=(v=D?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||j===void 0)&&j.length?["Resources",...D.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const F=await U.signMessage(new TextEncoder().encode(S),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=F}}try{const{data:E,error:T}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Vr(C)},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Dt});if(T)throw T;if(!E||!E.session||!E.user){const I=new Mr;return this._returnResult({data:{user:null,session:null},error:I})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(oe(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(r){const n=await Lr(this.storage,`${this.storageKey}-code-verifier`),[a,c]=(n??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Gf;const{data:u,error:h}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:a},xform:Dt});if(await Ye(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const p=new Mr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:n,provider:a,token:c,access_token:u,nonce:h}=r,p=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Dt}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new Mr;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,a,c,u,h;try{if("email"in r){const{email:p,options:m}=r;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await xn(this.storage,this.storageKey));const{error:j}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}if("phone"in r){const{phone:p,options:m}=r,{data:g,error:v}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=m?.data)!==null&&c!==void 0?c:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:v})}throw new xs("You must provide either an email or phone number.")}catch(p){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var n,a;try{let c,u;"options"in r&&(c=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(a=r.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:p}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:Dt});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(oe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(r){var n,a,c,u,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await xn(this.storage,this.storageKey));const g=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(a=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((c=r?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:Cv});return!((u=g.data)===null||u===void 0)&&u.url&&Xe()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)throw a;if(!n)throw new ft;const{error:c}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:a,type:c,options:u}=r,{error:h}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:a,type:c,options:u}=r,{data:h,error:p}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new xs("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const a=r.expires_at?r.expires_at*1e3-Date.now()<fl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(this.userStorage){const h=await Lr(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=ml()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=Nv(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:br}):await this._useSession(async n=>{var a,c,u;const{data:h,error:p}=n;if(p)throw p;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ft}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:br})})}catch(n){if(oe(n))return Wf(n)&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async a=>{const{data:c,error:u}=a;if(u)throw u;if(!c.session)throw new ft;const h=c.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await xn(this.storage,this.storageKey));const{data:g,error:v}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:br});if(v)throw v;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(a){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new ft;const n=Date.now()/1e3;let a=n,c=!0,u=null;const{payload:h}=pl(r.access_token);if(h.exp&&(a=h.exp,c=a<=n),c){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)throw m;u={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var a;if(!r){const{data:h,error:p}=n;if(p)throw p;r=(a=h.session)!==null&&a!==void 0?a:void 0}if(!r?.refresh_token)throw new ft;const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!Xe())throw new ws("No browser detected.");if(r.error||r.error_description||r.error_code)throw new ws(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Rl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ws("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Rl("No code detected.");const{data:I,error:D}=await this._exchangeCodeForSession(r.code);if(D)throw D;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:p,expires_at:m,token_type:g}=r;if(!u||!p||!h||!g)throw new ws("No session defined in URL");const v=Math.round(Date.now()/1e3),j=parseInt(p);let w=v+j;m&&(w=parseInt(m));const b=w-v;b*1e3<=jn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${j}s`);const S=w-j;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,v);const{data:C,error:E}=await this._getUser(u);if(E)throw E;const T={provider_token:a,provider_refresh_token:c,access_token:u,expires_in:j,expires_at:w,refresh_token:h,token_type:g,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:r.type},error:null})}catch(a){if(oe(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Lr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:c,error:u}=n;if(u)return this._returnResult({error:u});const h=(a=c.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:p}=await this.admin.signOut(h,r);if(p&&!(Hf(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=uv(),a={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(r){return await this._useSession(async n=>{var a,c;try{const{data:{session:u},error:h}=n;if(h)throw h;await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let a=null,c=null;this.flowType==="pkce"&&([a,c]=await xn(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:a,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:a,error:c}=await this._useSession(async u=>{var h,p,m,g,v;const{data:j,error:w}=u;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",b,{headers:this.headers,jwt:(v=(g=j.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(c)throw c;return Xe()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:r.provider,url:a?.url},error:null})}catch(a){if(oe(a))return this._returnResult({data:{provider:r.provider,url:null},error:a});throw a}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var a;try{const{error:c,data:{session:u}}=n;if(c)throw c;const{options:h,provider:p,token:m,access_token:g,nonce:v}=r,j=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=u?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:p,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Dt}),{data:w,error:b}=j;return b?this._returnResult({data:{user:null,session:null},error:b}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Mr}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:b}))}catch(c){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var a,c;const{data:u,error:h}=n;if(h)throw h;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(c=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await pv(async c=>(c>0&&await fv(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Dt})),(c,u)=>{const h=200*Math.pow(2,c);return u&&Ki(u)&&Date.now()+h-a<jn})}catch(a){if(this._debug(n,"error",a),oe(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",a),Xe()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:r,url:a},error:null}}async _recoverAndRefresh(){var r,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const c=await Lr(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Lr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await _n(this.userStorage,this.storageKey+"-user",h)),c.user=(r=h?.user)!==null&&r!==void 0?r:ml()}else if(c&&!c.user&&!c.user){const h=await Lr(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await Ye(this.storage,this.storageKey+"-user"),await _n(this.storage,this.storageKey,c)):c.user=ml()}if(this._debug(a,"session from storage",c),!this._isValidSession(c)){this._debug(a,"session is not valid"),c!==null&&await this._removeSession();return}const u=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fl;if(this._debug(a,`session has${u?"":" not"} expired with margin of ${fl}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Ki(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(c.access_token);!p&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(a,"error",c),console.error(c);return}finally{this._debug(a,"end")}}async _callRefreshToken(r){var n,a;if(!r)throw new ft;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new la;const{data:u,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!u.session)throw new ft;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),oe(u)){const h={data:null,error:u};return Ki(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(r,n,a=!0){const c=`#_notifyAllSubscribers(${r})`;this._debug(c,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,n)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Ye(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await _n(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const u=xh(c);await _n(this.storage,this.storageKey,u)}else{const c=xh(n);await _n(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ye(this.storage,this.storageKey),await Ye(this.storage,this.storageKey+"-code-verifier"),await Ye(this.storage,this.storageKey+"-user"),this.userStorage&&await Ye(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Xe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),jn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((a.expires_at*1e3-r)/jn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${jn}ms, refresh threshold is ${Tl} ticks`),c<=Tl&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Gl)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,a){const c=[`provider=${encodeURIComponent(n)}`];if(a?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&c.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[u,h]=await xn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(p.toString())}if(a?.queryParams){const u=new URLSearchParams(a.queryParams);c.push(u.toString())}return a?.skipBrowserRedirect&&c.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${r}?${c.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var a;const{data:c,error:u}=n;return u?this._returnResult({data:null,error:u}):await pe(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var a,c;const{data:u,error:h}=n;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:g}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return g?this._returnResult({data:null,error:g}):(r.factorType==="totp"&&m.type==="totp"&&(!((c=m?.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?qv(r.webauthn.credential_response):Vv(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await pe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=await pe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Fv(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Bv(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:a}=await this._challenge({factorId:r.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=n?.factors)!==null&&r!==void 0?r:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=pl(a.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:a},error:c}=n;return c?this._returnResult({data:null,error:c}):a?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:a.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ft})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async a=>{const{data:{session:c},error:u}=a;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ft});const h=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Xe()&&!n?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(r,n){try{return await this._useSession(async a=>{const{data:{session:c},error:u}=a;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ft});const h=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Xe()&&!n?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new ft})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:a},error:c}=n;return c?this._returnResult({data:null,error:c}):a?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ft})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let a=n.keys.find(p=>p.kid===r);if(a)return a;const c=Date.now();if(a=this.jwks.keys.find(p=>p.kid===r),a&&this.jwks_cached_at+tv>c)return a;const{data:u,error:h}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,a=u.keys.find(p=>p.kid===r),!a)?null:a}async getClaims(r,n={}){try{let a=r;if(!a){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});a=b.session.access_token}const{header:c,payload:u,signature:h,raw:{header:p,payload:m}}=pl(a);n?.allowExpired||bv(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!g){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:u,header:c,signature:h},error:null}}const v=jv(c.alg),j=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,j,h,lv(`${p}.${m}`)))throw new ea("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}}Tn.nextInstanceID={};const Zv=Kl,rp=Tn;class ex extends rp{constructor(r){super(r)}}class np{constructor(r,n,a){var c,u,h;this.supabaseUrl=r,this.supabaseKey=n;const p=Qy(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:By,realtime:Vy,auth:Object.assign(Object.assign({},qy),{storageKey:m}),global:Fy},v=Jy(a??{},g);this.storageKey=(c=v.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(j,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=Ky(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(j=>this.realtime.setAuth(j)).catch(j=>console.warn("Failed to set initial Realtime auth token:",j)),this.rest=new V0(new URL("rest/v1",p).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new My(this.storageUrl.href,this.headers,this.fetch,a?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new z0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,a)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,n;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:c,userStorage:u,storageKey:h,flowType:p,lock:m,debug:g,throwOnError:v},j,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ex({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),j),storageKey:h,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:c,userStorage:u,flowType:p,lock:m,debug:g,throwOnError:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Lf(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a?.access_token)})}_handleTokenChanged(r,n,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tx=(o,r,n)=>new np(o,r,n);function rx(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const r=o.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}rx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nx=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Zv,AuthApiError:Vf,AuthClient:rp,AuthError:Cn,AuthImplicitGrantRedirectError:ws,AuthInvalidCredentialsError:xs,AuthInvalidJwtError:ea,AuthInvalidTokenResponseError:Mr,AuthPKCECodeVerifierMissingError:Gf,AuthPKCEGrantCodeExchangeError:Rl,AuthRetryableFetchError:Zi,AuthSessionMissingError:ft,AuthUnknownError:wr,AuthWeakPasswordError:Ol,CustomAuthError:Ht,get FunctionRegion(){return Xi},FunctionsError:aa,FunctionsFetchError:Sf,FunctionsHttpError:wl,FunctionsRelayError:xl,GoTrueAdminApi:Kl,GoTrueClient:Tn,NavigatorLockAcquireTimeoutError:Xf,PostgrestError:H0,REALTIME_CHANNEL_STATES:sy,get REALTIME_LISTEN_TYPES(){return Sn},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Sl},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Nl},get REALTIME_SUBSCRIBE_STATES(){return qt},RealtimeChannel:qr,RealtimeClient:Lf,RealtimePresence:Nn,SIGN_OUT_SCOPES:Gi,SupabaseClient:np,WebSocketFactory:Of,createClient:tx,isAuthApiError:Hf,isAuthError:oe,isAuthImplicitGrantRedirectError:Kf,isAuthPKCECodeVerifierMissingError:rv,isAuthRetryableFetchError:Ki,isAuthSessionMissingError:Wf,isAuthWeakPasswordError:nv,lockInternals:zr,navigatorLock:Zf,processLock:Ov},Symbol.toStringTag,{value:"Module"})),{createClient:sx}=nx,ix=void 0,ax=void 0;throw new Error("Variables Supabase manquantes : vrifiez le fichier .env");const le=sx(ix,ax);async function sp(){const{data:o,error:r}=await le.from("clients").select(`
      id,
      client_number,
      name,
      address,
      phone,
      tier,
      contacts:client_contacts(
        id,
        name,
        role,
        email,
        phone
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,clientNumber:n.client_number,name:n.name,address:n.address??"",phone:n.phone??"",tier:n.tier,contacts:(n.contacts??[]).map(a=>({id:a.id,name:a.name,role:a.role??"",email:a.email??"",phone:a.phone??""}))}))}async function ox(o){const{data:r,error:n}=await le.from("clients").insert({name:o.name,address:o.address??"",phone:o.phone??"",tier:o.tier}).select("id").single();if(n)throw n;const a=(o.contacts??[]).map(c=>({client_id:r.id,name:c.name,role:c.role??"",email:c.email??"",phone:c.phone??""}));if(a.length){const{error:c}=await le.from("client_contacts").insert(a);if(c)throw c}}async function lx(o,r){const{error:n}=await le.from("clients").update({name:r.name,address:r.address??"",phone:r.phone??"",tier:r.tier,updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n;const{error:a}=await le.from("client_contacts").delete().eq("client_id",o);if(a)throw a;const c=(r.contacts??[]).map(u=>({client_id:o,name:u.name,role:u.role??"",email:u.email??"",phone:u.phone??""}));if(c.length){const{error:u}=await le.from("client_contacts").insert(c);if(u)throw u}}async function cx(o){const{error:r}=await le.from("clients").delete().eq("id",o);if(r)throw r}async function ux(){const{data:o,error:r}=await le.from("prestations").select("id,name").order("name",{ascending:!0});if(r)throw r;return o??[]}async function ip(){const{data:o,error:r}=await le.from("competences").select("id,name").order("name",{ascending:!0});if(r)throw r;return o??[]}async function ap(o){const r=(o??"").trim();if(!r)throw new Error("Le nom de prestation est vide.");const{data:n,error:a}=await le.from("prestations").select("id").eq("name",r).maybeSingle();if(a)throw a;if(n?.id)return n.id;const{data:c,error:u}=await le.from("prestations").insert({name:r}).select("id").single();if(!u&&c?.id)return c.id;const{data:h,error:p}=await le.from("prestations").select("id").eq("name",r).maybeSingle();if(p)throw p;if(h?.id)return h.id;throw u||new Error("Impossible de crer / rcuprer la prestation.")}async function ca(o){const r=Array.from(new Set((o??[]).map(g=>(g??"").trim()).filter(Boolean)));if(r.length===0)return[];const{data:n,error:a}=await le.from("competences").select("id,name").in("name",r);if(a)throw a;const c=new Set((n??[]).map(g=>g.name)),u=r.filter(g=>!c.has(g));if(u.length>0){const{error:g}=await le.from("competences").insert(u.map(v=>({name:v})));if(g&&g.code!=="23505")throw g}const{data:h,error:p}=await le.from("competences").select("id,name").in("name",r);if(p)throw p;const m=new Map((h??[]).map(g=>[g.name,g.id]));return r.map(g=>m.get(g)).filter(Boolean)}async function Jl(){const{data:o,error:r}=await le.from("consultants").select(`
      id,
      name,
      email,
      phone,
      service,
      location,
      work_mon,
      work_tue,
      work_wed,
      work_thu,
      work_fri,
      work_sat,
      work_sun,
      competences:consultant_competences(
        competence:competences(name)
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,name:n.name,email:n.email??"",phone:n.phone??"",service:n.service,location:n.location,competences:(n.competences??[]).map(a=>a.competence?.name).filter(Boolean),workDays:{mon:!!n.work_mon,tue:!!n.work_tue,wed:!!n.work_wed,thu:!!n.work_thu,fri:!!n.work_fri,sat:!!n.work_sat,sun:!!n.work_sun}}))}async function dx(o){const{data:r,error:n}=await le.from("consultants").insert({name:o.name,email:o.email?.trim()?o.email.trim():null,phone:o.phone?.trim()?o.phone.trim():null,service:o.service,location:o.location,work_mon:o.workDays.mon,work_tue:o.workDays.tue,work_wed:o.workDays.wed,work_thu:o.workDays.thu,work_fri:o.workDays.fri,work_sat:o.workDays.sat,work_sun:o.workDays.sun}).select("id").single();if(n)throw n;const a=await ca(o.competences);if(a.length>0){const{error:c}=await le.from("consultant_competences").insert(a.map(u=>({consultant_id:r.id,competence_id:u})));if(c)throw c}}async function hx(o,r){const{error:n}=await le.from("consultants").update({name:r.name,email:r.email?.trim()?r.email.trim():null,phone:r.phone?.trim()?r.phone.trim():null,service:r.service,location:r.location,work_mon:r.workDays.mon,work_tue:r.workDays.tue,work_wed:r.workDays.wed,work_thu:r.workDays.thu,work_fri:r.workDays.fri,work_sat:r.workDays.sat,work_sun:r.workDays.sun,updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n;const{error:a}=await le.from("consultant_competences").delete().eq("consultant_id",o);if(a)throw a;const c=await ca(r.competences);if(c.length>0){const{error:u}=await le.from("consultant_competences").insert(c.map(h=>({consultant_id:o,competence_id:h})));if(u)throw u}}async function fx(o){const{error:r}=await le.from("consultant_competences").delete().eq("consultant_id",o);if(r)throw r;const{error:n}=await le.from("consultants").delete().eq("id",o);if(n)throw n}function Eh(o){return Math.round((o+Number.EPSILON)*100)/100}async function px(){const{data:o,error:r}=await le.from("projects").select(`
      id,
      name,
      order_date,
      sales_type,
      status,
      commercial_name,
      notes,
      client_id,
      client:clients(
        id,
        client_number,
        name,
        address
      ),
      client_contact_id,
      contact:client_contacts(
        id,
        name,
        email,
        phone
      ),
      project_manager_id,
      project_manager:consultants(
        id,
        name
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,name:n.name,clientId:n.client_id,clientNumber:n.client?.client_number??"",clientName:n.client?.name??"",clientAddress:n.client?.address??"",clientContactId:n.client_contact_id??null,clientContactName:n.contact?.name??null,clientContactEmail:n.contact?.email??null,clientContactPhone:n.contact?.phone??null,commercialName:n.commercial_name??"",projectManagerId:n.project_manager_id??null,projectManagerName:n.project_manager?.name??null,orderDate:n.order_date??null,salesType:n.sales_type??"",status:n.status,notes:n.notes??""}))}async function mx(o){const{error:r}=await le.from("projects").insert({name:o.name,client_id:o.clientId,client_contact_id:o.clientContactId??null,commercial_name:o.commercialName??"",project_manager_id:o.projectManagerId??null,order_date:o.orderDate??null,sales_type:o.salesType??"",status:o.status,notes:o.notes??""});if(r)throw r}async function gx(o,r){const{error:n}=await le.from("projects").update({name:r.name,client_id:r.clientId,client_contact_id:r.clientContactId??null,commercial_name:r.commercialName??"",project_manager_id:r.projectManagerId??null,order_date:r.orderDate??null,sales_type:r.salesType??"",status:r.status,notes:r.notes??"",updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n}async function yx(o){const{error:r}=await le.from("projects").delete().eq("id",o);if(r)throw r}async function vx(o){const{data:r,error:n}=await le.from("project_lines").select(`
      id,
      project_id,
      article_id,
      sold_quantity,
      amount,
      consultant_id,
      planned_start_date,
      planned_end_date,
      planned_quantity,
      realized_quantity,
      booking_id,
      article:articles(
        id,
        name,
        service,
        competences:article_competences(
          competence:competences(name)
        )
      ),
      consultant:consultants(
        id,
        name
      )
    `).eq("project_id",o).order("created_at",{ascending:!0});if(n)throw n;return(r??[]).map(a=>({id:a.id,projectId:a.project_id,articleId:a.article_id,articleName:a.article?.name??"",articleService:a.article?.service??"",articleCompetencesRequired:(a.article?.competences??[]).map(c=>c.competence?.name).filter(Boolean),soldQuantity:Number(a.sold_quantity??0),amount:Number(a.amount??0),consultantId:a.consultant_id??null,consultantName:a.consultant?.name??null,plannedStartDate:a.planned_start_date??null,plannedEndDate:a.planned_end_date??null,plannedQuantity:Number(a.planned_quantity??0),realizedQuantity:Number(a.realized_quantity??0),bookingId:a.booking_id??null}))}async function xx(o,r){const{data:n,error:a}=await le.from("project_lines").insert({project_id:o,article_id:r.articleId,sold_quantity:r.soldQuantity,amount:r.amount,consultant_id:r.consultantId??null,planned_start_date:r.plannedStartDate??null,planned_end_date:r.plannedEndDate??null,planned_quantity:r.plannedQuantity??0,realized_quantity:r.realizedQuantity??0}).select("id").single();if(a)throw a;await Ql(n.id)}async function wx(o,r){const{error:n}=await le.from("project_lines").update({article_id:r.articleId,sold_quantity:r.soldQuantity,amount:r.amount,consultant_id:r.consultantId??null,planned_start_date:r.plannedStartDate??null,planned_end_date:r.plannedEndDate??null,planned_quantity:r.plannedQuantity??0,realized_quantity:r.realizedQuantity??0,updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n;await Ql(o)}async function bx(o){const{data:r,error:n}=await le.from("project_lines").select("booking_id").eq("id",o).maybeSingle();if(n)throw n;const a=r?.booking_id;if(a){const{error:u}=await le.from("consultant_bookings").delete().eq("id",a);if(u)throw u}const{error:c}=await le.from("project_lines").delete().eq("id",o);if(c)throw c}async function jx(o){const{data:r,error:n}=await le.from("project_lines").select("id, project_id, article_id, sold_quantity, amount, consultant_id, planned_start_date, planned_end_date, planned_quantity, realized_quantity").eq("id",o).single();if(n)throw n;const a=Number(r.sold_quantity??0),c=Number(r.planned_quantity??0),u=Number(r.amount??0);if(!(a>0))throw new Error("La quantit vendue est invalide.");if(!(c>0&&c<a))throw new Error("Pour reporter un reliquat, la quantit planifie doit tre strictement entre 0 et la quantit vendue.");const h=a-c,p=Eh(u*c/a),m=Eh(u-p),{error:g}=await le.from("project_lines").update({sold_quantity:c,amount:p,updated_at:new Date().toISOString()}).eq("id",o);if(g)throw g;const{error:v}=await le.from("project_lines").insert({project_id:r.project_id,article_id:r.article_id,sold_quantity:h,amount:m,consultant_id:null,planned_start_date:null,planned_end_date:null,planned_quantity:0,realized_quantity:0});if(v)throw v;await Ql(o)}async function Ql(o){const{data:r,error:n}=await le.from("project_lines").select(`
      id,
      booking_id,
      consultant_id,
      planned_start_date,
      planned_end_date,
      planned_quantity,
      article:articles(name),
      project:projects(
        name,
        client:clients(client_number, name)
      )
    `).eq("id",o).single();if(n)throw n;const a=r.consultant_id,c=r.planned_start_date,u=r.planned_end_date,h=Number(r.planned_quantity??0),p=r.booking_id??null;if(!(!!a&&!!c&&!!u&&h>0)){if(p){const{error:I}=await le.from("consultant_bookings").delete().eq("id",p);if(I)throw I;const{error:D}=await le.from("project_lines").update({booking_id:null}).eq("id",o);if(D)throw D}return}const g=r.project?.client?.client_number??"",v=r.project?.client?.name??"",j=r.project?.name??"Projet",w=r.article?.name??"Prestation",b=`${g}  ${v}  ${j}  ${w}`.trim(),S=`Ligne projet: ${o}
Qt planifie: ${h}`;if(p){const{error:I}=await le.from("consultant_bookings").update({consultant_id:a,kind:"booking",title:b,notes:S,start_date:c,end_date:u}).eq("id",p);if(I)throw I;return}const{data:C,error:E}=await le.from("consultant_bookings").insert({consultant_id:a,kind:"booking",title:b,notes:S,start_date:c,end_date:u}).select("id").single();if(E)throw E;const{error:T}=await le.from("project_lines").update({booking_id:C.id}).eq("id",o);if(T)throw T}function He({message:o,type:r,onClose:n}){_.useEffect(()=>{const u=setTimeout(()=>{n()},5e3);return()=>clearTimeout(u)},[n]);const a={success:s.jsx(_s,{className:"w-5 h-5 text-green-600"}),error:s.jsx(Wh,{className:"w-5 h-5 text-red-600"}),info:s.jsx(Hh,{className:"w-5 h-5 text-blue-600"})},c={success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"};return s.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-slide-up",children:s.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg ${c[r]} min-w-[300px]`,children:[a[r],s.jsx("span",{className:"flex-1 text-gray-900",children:o}),s.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded transition-colors",children:s.jsx(Hr,{className:"w-4 h-4 text-gray-600"})})]})})}const _x=[{value:"devis_en_cours",label:"Devis en cours"},{value:"commande_receptionnee",label:"Commande rceptionne"},{value:"attente_affectation_dp",label:"En attente d'affectation de DP"},{value:"en_cours_deploiement",label:"En cours de dploiement"},{value:"facture",label:"Factur"},{value:"paye",label:"Pay"},{value:"termine",label:"Termin"}],Nx=["Packag","Sur-mesure","Rgie","Forfait","Abonnement"];function Al({isOpen:o,onClose:r,project:n,onSaved:a}){const[c,u]=_.useState(!1),[h,p]=_.useState(null),[m,g]=_.useState([]),[v,j]=_.useState([]),[w,b]=_.useState(n?.name??""),[S,C]=_.useState(n?.clientId??""),[E,T]=_.useState(n?.clientContactId??""),[I,D]=_.useState(n?.commercialName??""),[U,$]=_.useState(n?.projectManagerId??""),[F,L]=_.useState(n?.orderDate??""),[te,H]=_.useState(n?.salesType??""),[X,ee]=_.useState(n?.status??"devis_en_cours"),[G,J]=_.useState(n?.notes??""),[de,je]=_.useState(!1),[ue,Q]=_.useState(!1),[M,ae]=_.useState("");_.useEffect(()=>{o&&(b(n?.name??""),C(n?.clientId??""),T(n?.clientContactId??""),D(n?.commercialName??""),$(n?.projectManagerId??""),L(n?.orderDate??""),H(n?.salesType??""),ee(n?.status??"devis_en_cours"),J(n?.notes??""))},[o,n]),_.useEffect(()=>{if(!o)return;let W=!1;return(async()=>{u(!0),p(null);try{const[ve,we]=await Promise.all([sp(),Jl()]);if(W)return;g(ve),j(we)}catch(ve){if(W)return;p(ve?.message??"Erreur lors du chargement des donnes.")}finally{W||u(!1)}})(),()=>{W=!0}},[o]);const Y=_.useMemo(()=>m.find(W=>W.id===S)??null,[m,S]),P=_.useMemo(()=>Y?.contacts??[],[Y]);_.useEffect(()=>{if(o){if(!S){T("");return}E&&!P.some(W=>W.id===E)&&T("")}},[o,S,E,P]);const z=_.useMemo(()=>!(!w.trim()||!S||!te.trim()||!I.trim()),[w,S,te,I]),ye=async W=>{if(W.preventDefault(),!z)return;const ve={name:w.trim(),clientId:S,clientContactId:E||null,commercialName:I.trim(),projectManagerId:U||null,orderDate:F||null,salesType:te.trim(),status:X,notes:G??""};je(!0);try{n?(await gx(n.id,ve),ae("Projet mis  jour")):(await mx(ve),ae("Projet cr")),Q(!0),await a?.(),setTimeout(()=>r(),650)}catch(we){p(we?.message??"Erreur lors de l'enregistrement.")}finally{je(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs(Ve,{isOpen:o,onClose:r,title:n?"Modifier le projet":"Crer un projet",size:"lg",children:[h&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-700 border border-red-200",children:h}),c?s.jsx("div",{className:"text-gray-600",children:"Chargement"}):s.jsxs("form",{onSubmit:ye,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom du projet *"}),s.jsx("input",{type:"text",value:w,onChange:W=>b(W.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex : Dploiement SIRH  Phase 1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Client (N client) *"}),s.jsxs("select",{value:S,onChange:W=>C(W.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner"}),m.map(W=>s.jsxs("option",{value:W.id,children:[W.clientNumber,"  ",W.name]},W.id))]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Y?.address?`Adresse : ${Y.address}`:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Interlocuteur client"}),s.jsxs("select",{value:E,onChange:W=>T(W.target.value),disabled:!S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50 disabled:text-gray-500",children:[s.jsx("option",{value:"",children:""}),P.map(W=>s.jsxs("option",{value:W.id,children:[W.name,W.email?` (${W.email})`:""]},W.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Commercial *"}),s.jsx("input",{type:"text",value:I,onChange:W=>D(W.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom du commercial"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Directeur de projet"}),s.jsxs("select",{value:U,onChange:W=>$(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Non affect"}),v.map(W=>s.jsxs("option",{value:W.id,children:[W.name,"  ",W.service]},W.id))]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"(Affectation DP :  renseigner aprs la commande si besoin.)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date de commande"}),s.jsx("input",{type:"date",value:F,onChange:W=>L(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type de vente *"}),s.jsx("input",{list:"sales-types",value:te,onChange:W=>H(W.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex : Packag"}),s.jsx("datalist",{id:"sales-types",children:Nx.map(W=>s.jsx("option",{value:W},W))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"tat *"}),s.jsx("select",{value:X,onChange:W=>ee(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:_x.map(W=>s.jsx("option",{value:W.value,children:W.label},W.value))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:G,onChange:W=>J(W.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Informations utiles, contexte, contraintes"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",disabled:de,children:"Annuler"}),s.jsx("button",{type:"submit",disabled:!z||de,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:de?"Enregistrement":n?"Mettre  jour":"Crer"})]})]})]}),ue&&s.jsx(He,{message:M,type:"success",onClose:()=>Q(!1)})]})}function Sx({currentPage:o}){const[r,n]=_.useState(!1),[a,c]=_.useState(!1),u=()=>{c(!0)},h={portfolio:"Tableau de bord  Direction de projet",projects:"Projets",planning:"Planning des interventions",resources:"Gestion des ressources",clients:"Clients",competences:"Gestion des comptences",articles:"Catalogue des articles",reporting:"Reporting et analyses",administration:"Administration et paramtrage"};return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-gray-900",children:h[o]})}),o==="portfolio"&&s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("span",{className:"text-gray-700",children:"Client ABC - Implmentation SIRH"}),s.jsx(Ag,{className:"w-4 h-4 text-gray-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-full text-sm hover:bg-blue-100 transition-colors",children:"Packag"}),s.jsx("button",{className:"px-3 py-1.5 bg-gray-100 text-gray-600 rounded-full text-sm hover:bg-gray-200 transition-colors",children:"Sur-mesure"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Cette semaine"}),s.jsx("button",{className:"px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:"30 jours"}),s.jsx("button",{className:"px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:"90 jours"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer un projet"})]}),s.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(Sg,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]}),s.jsx(Al,{isOpen:r,onClose:()=>n(!1),onSaved:u}),a&&s.jsx(He,{message:"Projet cr avec succs",type:"success",onClose:()=>c(!1)})]})}function kx({isOpen:o,onClose:r}){return s.jsx(Ve,{isOpen:o,onClose:r,title:"Dtails du projet - Client ABC",size:"xl",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-2",children:"Informations gnrales"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(Qh,{className:"w-4 h-4"}),s.jsx("span",{children:"Chef de projet : Jean Dupont"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(er,{className:"w-4 h-4"}),s.jsx("span",{children:"Priode : 15/06/2025 - 30/09/2025"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(zl,{className:"w-4 h-4"}),s.jsx("span",{children:"Type : Packag"})]})]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(jr,{className:"w-4 h-4"}),"Modifier"]})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Dtails budgtaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-gray-600 text-sm mb-1",children:"Jours vendus"}),s.jsx("div",{className:"text-gray-900",children:"35 jours"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-gray-600 text-sm mb-1",children:"Jours consomms"}),s.jsx("div",{className:"text-orange-600",children:"18 jours (51%)"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-gray-600 text-sm mb-1",children:"Jours restants"}),s.jsx("div",{className:"text-green-600",children:"17 jours (49%)"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-gray-600 text-sm mb-1",children:"carts internes"}),s.jsx("div",{className:"text-orange-600",children:"+5 jours"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-gray-600 text-sm mb-1",children:"En attente d'avenant"}),s.jsx("div",{className:"text-blue-600",children:"+13 jours"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-gray-600 text-sm mb-1",children:"Budget total ajust"}),s.jsx("div",{className:"text-gray-900",children:"53 jours"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Rpartition par service"}),s.jsx("div",{className:"space-y-3",children:[{service:"Service Technique",allocated:8,consumed:5,percentage:63},{service:"Service SIRH",allocated:15,consumed:10,percentage:67},{service:"Service Formation",allocated:6,consumed:3,percentage:50},{service:"Service Data",allocated:6,consumed:0,percentage:0}].map((n,a)=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-gray-900",children:n.service}),s.jsxs("span",{className:"text-gray-700",children:[n.consumed," / ",n.allocated," jours"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${n.percentage>75?"bg-orange-500":"bg-green-500"}`,style:{width:`${n.percentage}%`}})})]},a))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Notes du projet"}),s.jsx("textarea",{rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none",placeholder:"Ajoutez des notes sur le projet...",defaultValue:"Projet d'implmentation SIRH complet. Client trs ractif sur les prrequis. Attention  la formation : prvoir du temps supplmentaire pour les utilisateurs."})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})})]})})}const Ch=[{id:"1",name:"Marie Lefebvre",service:"SIRH",competences:["Paie","GTA","Formation"],location:"Paris",availability:60,matchScore:95,availableDates:"Du 15/01 au 28/02/2026"},{id:"3",name:"Sophie Martin",service:"SIRH",competences:["Formation","Paie","Reprise de donnes"],location:"Bordeaux",availability:80,matchScore:90,availableDates:"Du 01/01 au 31/03/2026"},{id:"4",name:"Lucas Bernard",service:"SIRH",competences:["GTA","Paramtrage","Support"],location:"Paris",availability:45,matchScore:85,availableDates:"Du 20/01 au 15/03/2026"},{id:"2",name:"Thomas Durand",service:"Finance",competences:["SIGF","Paramtrage","Installation"],location:"Lyon",availability:30,matchScore:60,availableDates:"Du 01/02 au 30/04/2026"}];function Ex({isOpen:o,onClose:r}){const[n,a]=_.useState([]),[c,u]=_.useState(!1),h=g=>{a(v=>v.includes(g)?v.filter(j=>j!==g):[...v,g])},p=()=>{u(!0),setTimeout(()=>{r(),a([])},1500)},m=g=>g>=90?"text-green-600":g>=75?"text-blue-600":g>=60?"text-orange-600":"text-gray-600";return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Ressources suggres pour ce projet",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-blue-900 mb-2",children:"Critres de recherche"}),s.jsxs("div",{className:"text-blue-700 text-sm space-y-1",children:[s.jsx("div",{children:" Comptences requises : Paie, GTA, Formation"}),s.jsx("div",{children:" Services : SIRH"}),s.jsx("div",{children:" Priode du projet : 15/06/2025 - 30/09/2025"}),s.jsx("div",{children:" Localisation prfrentielle : Paris, le-de-France"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-gray-900",children:["Consultants disponibles (",Ch.length,")"]}),Ch.map(g=>s.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${n.includes(g.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h(g.id),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"pt-1",children:s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${n.includes(g.id)?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:n.includes(g.id)&&s.jsx(Fg,{className:"w-4 h-4 text-white"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-gray-900",children:g.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-sm text-gray-600",children:g.service}),s.jsx("span",{className:"text-gray-300",children:""}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(sa,{className:"w-3 h-3"}),g.location]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm ${m(g.matchScore)}`,children:["Compatibilit : ",g.matchScore,"%"]}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Dispo : ",g.availability,"%"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.competences.map((v,j)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:[s.jsx(Dl,{className:"w-3 h-3"}),v]},j))}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(er,{className:"w-3 h-3"}),g.availableDates]})]})]})},g.id))]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[n.length," consultant",n.length!==1?"s":""," slectionn",n.length!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{onClick:p,disabled:n.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Affecter au projet"})]})]})]})}),c&&s.jsx(He,{message:`${n.length} consultant${n.length!==1?"s":""} affect${n.length!==1?"s":""} au projet`,type:"success",onClose:()=>u(!1)})]})}const Th=[{id:"1",article:"Installation SIRH Paie",consultant:"Marie Lefebvre",mode:"Sur site",startDate:"15/06/2025",endDate:"19/06/2025",duration:5,location:"Paris, Client ABC"},{id:"2",article:"Paramtrage Paie",consultant:"Marie Lefebvre",mode:" distance",startDate:"22/06/2025",endDate:"03/07/2025",duration:10},{id:"3",article:"Reprise de donnes",consultant:"Sophie Martin",mode:" distance",startDate:"06/07/2025",endDate:"10/07/2025",duration:5},{id:"4",article:"Formation utilisateurs",consultant:"Lucas Bernard",mode:"Hybride",startDate:"13/07/2025",endDate:"17/07/2025",duration:5,location:"Paris, Client ABC (J1-J2)"},{id:"5",article:"Formation administrateurs",consultant:"Marie Lefebvre",mode:"Sur site",startDate:"20/07/2025",endDate:"22/07/2025",duration:3,location:"Paris, Client ABC"}];function Cx({isOpen:o,onClose:r}){const[n,a]=_.useState(!1),[c,u]=_.useState(""),h=()=>{u("Planning export en PDF"),a(!0)},p=()=>{u("Planning export en Excel"),a(!0)},m=g=>{switch(g){case"Sur site":return"bg-blue-100 text-blue-700";case" distance":return"bg-green-100 text-green-700";case"Hybride":return"bg-purple-100 text-purple-700"}};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Planning dtaill des interventions",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Projet"}),s.jsx("div",{className:"text-gray-900",children:"Client ABC - Implmentation SIRH"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Priode"}),s.jsx("div",{className:"text-gray-900",children:"15/06/2025 - 30/09/2025"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Jours vendus"}),s.jsx("div",{className:"text-gray-900",children:"35 jours"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Consultants"}),s.jsx("div",{className:"text-gray-900",children:"3 consultants"})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:h,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsx("span",{children:"Exporter en PDF"})]}),s.jsxs("button",{onClick:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:[s.jsx($l,{className:"w-4 h-4"}),s.jsx("span",{children:"Exporter en Excel"})]})]}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Prestation"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Consultant"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Mode"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Dates"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Dure"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Lieu"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:Th.map((g,v)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs",children:v+1}),s.jsx("span",{className:"text-sm text-gray-900",children:g.article})]})}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.consultant}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${m(g.mode)}`,children:g.mode})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[s.jsx(er,{className:"w-3 h-3 text-gray-400"}),g.startDate," - ",g.endDate]})}),s.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[g.duration," j"]}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:g.location||"-"})]},g.id))}),s.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:4,className:"px-4 py-3 text-sm text-gray-900",children:"Total"}),s.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[Th.reduce((g,v)=>g+v.duration,0)," j"]}),s.jsx("td",{})]})})]})})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsx("p",{className:"text-blue-700 text-sm",children:" Ce planning a t gnr automatiquement en tenant compte du squenage des prestations et de la disponibilit des consultants."})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Fermer"}),s.jsx("button",{onClick:()=>{u("Planning enregistr"),a(!0),setTimeout(()=>r(),1500)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer le planning"})]})]})}),n&&s.jsx(He,{message:c,type:"success",onClose:()=>a(!1)})]})}function Tx(){const[o,r]=_.useState(!1),[n,a]=_.useState(!1),[c,u]=_.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 mb-1",children:"Projet  Client ABC"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Type : Packag"})]}),s.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:" risque"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(zl,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-blue-900 text-sm",children:"Jours vendus"})]}),s.jsx("div",{className:"text-blue-900",children:"35"})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(er,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-orange-900 text-sm",children:"Jours consomms"})]}),s.jsx("div",{className:"text-orange-900",children:"18"}),s.jsx("div",{className:"mt-1",children:s.jsx("div",{className:"w-full bg-orange-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"51%"}})})})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(er,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-green-900 text-sm",children:"Jours restants"})]}),s.jsx("div",{className:"text-green-900",children:"17"}),s.jsx("p",{className:"text-green-700 text-sm mt-1",children:"49% disponible"})]})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-gray-600 text-sm",children:"Date de dbut : 15/06/2025"}),s.jsx("div",{className:"text-gray-600 text-sm",children:"Date de fin prvue : 30/09/2025"})]})}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[s.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Voir le projet complet"}),s.jsxs("button",{onClick:()=>a(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:[s.jsx(Yh,{className:"w-4 h-4"}),s.jsx("span",{children:"Suggrer ressources"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsx("span",{children:"Gnrer planning"})]})]})]}),s.jsx(kx,{isOpen:o,onClose:()=>r(!1)}),s.jsx(Ex,{isOpen:n,onClose:()=>a(!1)}),s.jsx(Cx,{isOpen:c,onClose:()=>u(!1)})]})}function Px({isOpen:o,onClose:r}){const n=[{name:"Installation",service:"Service Technique",allocated:8,consumed:5,interventions:[{date:"20/06/2025",duration:2,consultant:"Pierre Martin",type:"Installation serveurs"},{date:"22/06/2025",duration:3,consultant:"Sophie Leroy",type:"Configuration rseau"}]},{name:"Paramtrage SIRH",service:"Service SIRH",allocated:15,consumed:10,interventions:[{date:"25/06/2025",duration:4,consultant:"Marc Dubois",type:"Paramtrage modules"},{date:"28/06/2025",duration:3,consultant:"Marc Dubois",type:"Configuration workflow"},{date:"02/07/2025",duration:3,consultant:"Claire Bernard",type:"Tests paramtrages"}]},{name:"Formation",service:"Service Formation",allocated:6,consumed:3,interventions:[{date:"12/12/2025",duration:3,consultant:"Julie Rousseau",type:"Formation administrateurs"}]},{name:"Reprise de donnes",service:"Service Data",allocated:6,consumed:0,interventions:[]}],a=(u,h)=>Math.round(u/h*100),c=u=>u>90?"bg-red-500":u>75?"bg-orange-500":"bg-green-500";return s.jsx(Ve,{isOpen:o,onClose:r,title:"Dtails par prestation / service",size:"xl",children:s.jsxs("div",{className:"space-y-6",children:[n.map((u,h)=>{const p=a(u.consumed,u.allocated);return s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(qh,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-gray-900",children:u.name})]}),s.jsx("p",{className:"text-gray-600 text-sm",children:u.service})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-gray-900",children:[u.consumed," / ",u.allocated," jours"]}),s.jsxs("div",{className:`text-sm ${p>75?"text-orange-600":"text-green-600"}`,children:[p,"% consomm"]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full ${c(p)}`,style:{width:`${p}%`}})})}),u.interventions.length>0?s.jsxs("div",{children:[s.jsx("h4",{className:"text-gray-700 mb-3",children:"Interventions ralises"}),s.jsx("div",{className:"space-y-2",children:u.interventions.map((m,g)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Kh,{className:"w-4 h-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900 text-sm",children:m.type}),s.jsx("div",{className:"text-gray-500 text-xs",children:m.date})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qh,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-700 text-sm",children:m.consultant})]}),s.jsxs("span",{className:"text-blue-600",children:[m.duration,"j"]})]})]},g))})]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Aucune intervention ralise pour le moment"}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:"Jours restants"}),s.jsxs("span",{className:`${u.allocated-u.consumed>0?"text-green-600":"text-red-600"}`,children:[u.allocated-u.consumed," jours"]})]})})]},h)}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})})]})})}function Rx(){const[o,r]=_.useState(!1),n=[{name:"Installation",service:"Service Technique",consumed:5,total:8,status:"good"},{name:"Paramtrage SIRH",service:"Service SIRH",consumed:10,total:15,status:"warning"},{name:"Formation",service:"Service Formation",consumed:3,total:6,status:"good"},{name:"Reprise de donnes",service:"Service Data",consumed:0,total:6,status:"good"}],a=u=>{switch(u){case"good":return"bg-green-500";case"warning":return"bg-orange-500";case"critical":return"bg-red-500";default:return"bg-gray-400"}},c=(u,h)=>Math.round(u/h*100);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(qh,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Consommation par prestation / service"})]}),s.jsx("div",{className:"space-y-4",children:n.map((u,h)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${a(u.status)}`}),s.jsx("span",{className:"text-gray-900",children:u.name})]}),s.jsx("p",{className:"text-gray-500 text-sm ml-4",children:u.service})]}),s.jsxs("div",{className:"text-gray-900",children:[u.consumed," / ",u.total," j"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 ml-4",children:s.jsx("div",{className:`h-2 rounded-full ${a(u.status)}`,style:{width:`${c(u.consumed,u.total)}%`}})})]},h))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Dtails par prestation"})})]}),s.jsx(Px,{isOpen:o,onClose:()=>r(!1)})]})}function Ox({isOpen:o,onClose:r}){const[n,a]=_.useState([{id:1,name:"Dump de donnes paie",status:"missing",deadline:"2025-12-21",critical:!0},{id:2,name:"Accs VPN",status:"received",deadline:"2025-12-01",critical:!1},{id:3,name:"Liste des administrateurs",status:"received",deadline:"2025-12-01",critical:!1}]),[c,u]=_.useState({name:"",deadline:"",critical:!1}),h=g=>{a(n.map(v=>v.id===g?{...v,status:v.status==="received"?"missing":"received"}:v))},p=g=>{a(n.filter(v=>v.id!==g))},m=()=>{if(c.name&&c.deadline){const g=Math.max(...n.map(v=>v.id),0)+1;a([...n,{...c,id:g,status:"missing"}]),u({name:"",deadline:"",critical:!1})}};return s.jsx(Ve,{isOpen:o,onClose:r,title:"Grer les prrequis client",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Prrequis existants"}),s.jsx("div",{className:"space-y-3",children:n.map(g=>s.jsx("div",{className:`p-4 rounded-lg border ${g.status==="received"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-gray-900",children:g.name}),g.critical&&s.jsx("span",{className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Bloquant"})]}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["chance : ",new Date(g.deadline).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>h(g.id),className:`p-2 rounded-lg transition-colors ${g.status==="received"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-gray-200"}`,title:g.status==="received"?"Marquer comme non reu":"Marquer comme reu",children:g.status==="received"?s.jsx(_s,{className:"w-5 h-5 text-green-600"}):s.jsx(Wh,{className:"w-5 h-5 text-red-600"})}),s.jsx("button",{onClick:()=>p(g.id),className:"p-2 bg-red-100 hover:bg-red-200 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Vt,{className:"w-5 h-5 text-red-600"})})]})]})},g.id))})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Ajouter un prrequis"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Nom du prrequis"}),s.jsx("input",{type:"text",value:c.name,onChange:g=>u({...c,name:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Ex: Fichier organigramme"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Date d'chance"}),s.jsx("input",{type:"date",value:c.deadline,onChange:g=>u({...c,deadline:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.critical,onChange:g=>u({...c,critical:g.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-700",children:"Prrequis bloquant"})]})})]}),s.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),"Ajouter le prrequis"]})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer et fermer"})})]})})}function Ax(){const[o,r]=_.useState(!1),n=[{name:"Dump de donnes paie",status:"missing",deadline:"J-10",critical:!0,icon:Jg},{name:"Accs VPN",status:"received",deadline:"Valid",critical:!1,icon:c0},{name:"Liste des administrateurs",status:"received",deadline:"Valid",critical:!1,icon:_s}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Hh,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Prrequis en attente"})]}),s.jsx("div",{className:"space-y-3",children:n.map((a,c)=>s.jsx("div",{className:`p-4 rounded-lg border ${a.status==="missing"?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(a.icon,{className:`w-5 h-5 mt-0.5 ${a.status==="missing"?"text-red-600":"text-green-600"}`}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:a.name}),s.jsxs("p",{className:`text-sm mt-1 ${a.status==="missing"?"text-red-700":"text-green-700"}`,children:["Statut : ",a.status==="missing"?"Non reu":"Reu","  chance"," ",a.deadline]})]}),a.critical&&s.jsx("span",{className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Bloquant"})]})})]})},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Grer les prrequis"})})]}),s.jsx(Ox,{isOpen:o,onClose:()=>r(!1)})]})}function Ix({isOpen:o,onClose:r}){const[n,a]=_.useState(!1),[c,u]=_.useState({name:"",date:"",startTime:"",endTime:"",type:"distance",location:"",teamsLink:""}),h=[{id:1,date:"12 Dc 2025",time:"09:00 - 12:00",type:"distance",name:"Formation administrateurs",location:"Teams"},{id:2,date:"13 Dc 2025",time:"14:00 - 17:00",type:"onsite",name:"Reprise de donnes",location:"Paris - Sige"},{id:3,date:"15 Dc 2025",time:"10:00 - 11:30",type:"distance",name:"Point d'avancement",location:"Teams"},{id:4,date:"18 Dc 2025",time:"Toute la journe",type:"onsite",name:"Formation utilisateurs",location:"Lyon - Agence Sud"}],p=m=>{m.preventDefault(),console.log("Nouvelle intervention:",c),a(!1),u({name:"",date:"",startTime:"",endTime:"",type:"distance",location:"",teamsLink:""})};return s.jsx(Ve,{isOpen:o,onClose:r,title:"Grer les interventions",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[!n&&s.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),"Planifier une intervention"]}),n&&s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Nouvelle intervention"}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Nom de l'intervention"}),s.jsx("input",{type:"text",required:!0,value:c.name,onChange:m=>u({...c,name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Ex: Formation administrateurs"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Date"}),s.jsx("input",{type:"date",required:!0,value:c.date,onChange:m=>u({...c,date:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Heure dbut"}),s.jsx("input",{type:"time",required:!0,value:c.startTime,onChange:m=>u({...c,startTime:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Heure fin"}),s.jsx("input",{type:"time",required:!0,value:c.endTime,onChange:m=>u({...c,endTime:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Type d'intervention"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"type",value:"distance",checked:c.type==="distance",onChange:m=>u({...c,type:m.target.value}),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:" distance"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"type",value:"onsite",checked:c.type==="onsite",onChange:m=>u({...c,type:m.target.value}),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"Sur site"})]})]})]}),c.type==="distance"?s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Lien Teams"}),s.jsx("input",{type:"url",value:c.teamsLink,onChange:m=>u({...c,teamsLink:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"https://teams.microsoft.com/..."})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Lieu / Site client"}),s.jsx("input",{type:"text",required:!0,value:c.location,onChange:m=>u({...c,location:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Ex: Paris - Sige"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer"}),s.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Interventions planifies"}),s.jsx("div",{className:"space-y-3",children:h.map(m=>s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-gray-900",children:m.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m.type==="distance"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:m.type==="distance"?" distance":"Sur site"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsx("span",{children:m.date}),s.jsx("span",{children:m.time}),s.jsxs("div",{className:"flex items-center gap-1",children:[m.type==="distance"?s.jsx(Xh,{className:"w-4 h-4"}):s.jsx(sa,{className:"w-4 h-4"}),s.jsx("span",{children:m.location})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:s.jsx(jr,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{className:"p-2 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Vt,{className:"w-4 h-4 text-red-600"})})]})]})},m.id))})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})})]})})}function Dx(){const[o,r]=_.useState(!1),n=[{date:"12 Dc",time:"09:00 - 12:00",type:"distance",name:"Formation administrateurs",location:"Teams"},{date:"13 Dc",time:"14:00 - 17:00",type:"onsite",name:"Reprise de donnes",location:"Paris - Sige"},{date:"15 Dc",time:"10:00 - 11:30",type:"distance",name:"Point d'avancement",location:"Teams"},{date:"18 Dc",time:"Toute la journe",type:"onsite",name:"Formation utilisateurs",location:"Lyon - Agence Sud"}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(er,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Interventions  venir (7 jours)"})]}),s.jsx("div",{className:"space-y-3",children:n.map((a,c)=>s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"text-center min-w-[60px]",children:[s.jsx("div",{className:"text-blue-600",children:a.date}),s.jsx("div",{className:"text-gray-600 text-sm",children:a.time})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-gray-900",children:a.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.type==="distance"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:a.type==="distance"?" distance":"Sur site"})]}),s.jsx("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:a.type==="distance"?s.jsxs(s.Fragment,{children:[s.jsx(Xh,{className:"w-4 h-4"}),s.jsxs("button",{className:"text-blue-600 hover:underline",children:["Lien ",a.location]})]}):s.jsxs(s.Fragment,{children:[s.jsx(sa,{className:"w-4 h-4"}),s.jsx("span",{children:a.location})]})})]})]})},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Voir tout le planning"})})]}),s.jsx(Ix,{isOpen:o,onClose:()=>r(!1)})]})}function $x({isOpen:o,onClose:r,validationName:n}){const[a,c]=_.useState("Relance validation - "+n),[u,h]=_.useState(`Bonjour,

Nous souhaitons attirer votre attention sur la validation en attente concernant : ${n}.

Merci de bien vouloir nous faire un retour dans les meilleurs dlais.

Cordialement,
Jean Dupont
Chef de projet`),p=()=>{console.log("Relance envoye:",{subject:a,body:u}),r()};return s.jsx(Ve,{isOpen:o,onClose:r,title:`Validation - ${n}`,size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 rounded-lg p-6 border border-yellow-200",children:s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(Et,{className:"w-6 h-6 text-yellow-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-gray-900 mb-2",children:"Statut de la validation"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Document envoy le :"}),s.jsx("span",{className:"text-gray-900",children:"03/12/2025"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Dlai de rponse :"}),s.jsx("span",{className:"text-orange-600",children:"5 jours couls"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Statut actuel :"}),s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs",children:"En attente"})]})]})]})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Documents lis"}),s.jsx("div",{className:"space-y-2",children:s.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Et,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"text-gray-900",children:["Compte-rendu ",n]}),s.jsx("div",{className:"text-gray-500 text-sm",children:"PDF - 1.2 MB"})]})]}),s.jsx("span",{className:"text-blue-600 text-sm",children:"Tlcharger"})]})})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Envoyer une relance"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Objet"}),s.jsx("input",{type:"text",value:a,onChange:m=>c(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Message"}),s.jsx("textarea",{rows:8,value:u,onChange:m=>h(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"})]}),s.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ml,{className:"w-4 h-4"}),"Envoyer la relance"]})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(_s,{className:"w-4 h-4"}),"Marquer comme valid"]})}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Fermer"})})]})})}function Lx(){const[o,r]=_.useState(null),n=[{name:"Lot Formation",status:"pending",days:5,hasReserves:!1},{name:"Reprise donnes RH",status:"reserves",days:3,hasReserves:!0},{name:"Paramtrage module Paie",status:"pending",days:8,hasReserves:!1}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Wg,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Validations client en attente"})]}),s.jsx("div",{className:"space-y-3",children:n.map((a,c)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:a.name}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:a.hasReserves?s.jsx("span",{className:"text-orange-600",children:"Rserves mises"}):`Non valid depuis ${a.days} jours`})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.hasReserves?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:a.hasReserves?" revoir":"En attente"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>r(a.name),className:"flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"}),"Voir le CR"]}),s.jsxs("button",{onClick:()=>r(a.name),className:"flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm hover:bg-blue-100 transition-colors",children:[s.jsx(Ml,{className:"w-4 h-4"}),"Relancer le client"]})]})]},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Toutes les validations"})})]}),o&&s.jsx($x,{isOpen:!0,onClose:()=>r(null),validationName:o})]})}function Mx(){const o=[{description:"Paramtrage additionnel module RH",days:3,status:"toqualify"},{description:"Correction bug migration donnes",days:2,status:"toqualify"}],r=[{description:"Formation supplmentaire demande",days:5,status:"amendment"},{description:"Dveloppement spcifique reporting",days:8,status:"amendment"},{description:"Extension primtre paie",days:12,status:"closed"}],n=a=>{switch(a){case"toqualify":return{text:" qualifier",className:"bg-yellow-100 text-yellow-700"};case"amendment":return{text:"Avenant en cours",className:"bg-blue-100 text-blue-700"};case"closed":return{text:"Clos",className:"bg-green-100 text-green-700"};default:return{text:"Inconnu",className:"bg-gray-100 text-gray-700"}}};return s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(C0,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"carts de charge"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(zl,{className:"w-4 h-4 text-orange-600"}),s.jsx("h3",{className:"text-gray-900",children:"Origine interne"}),s.jsx("span",{className:"text-gray-500 text-sm",children:"(jours ajouts non facturables)"})]}),s.jsx("div",{className:"space-y-3",children:o.map((a,c)=>s.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("span",{className:"text-gray-900 text-sm",children:a.description}),s.jsxs("span",{className:"text-orange-700 ml-2 whitespace-nowrap",children:["+",a.days,"j"]})]}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${n(a.status).className}`,children:n(a.status).text})]},c))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Kh,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"text-gray-900",children:"Origine client"}),s.jsx("span",{className:"text-gray-500 text-sm",children:"(jours en attente d'avenant)"})]}),s.jsx("div",{className:"space-y-3",children:r.map((a,c)=>s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("span",{className:"text-gray-900 text-sm",children:a.description}),s.jsxs("span",{className:"text-blue-700 ml-2 whitespace-nowrap",children:["+",a.days,"j"]})]}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${n(a.status).className}`,children:n(a.status).text})]},c))})]})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-gray-600 text-sm",children:["Total carts non facturables : ",s.jsx("span",{className:"text-orange-600",children:"5 jours"})]}),s.jsxs("div",{className:"text-gray-600 text-sm",children:["Total en attente d'avenant : ",s.jsx("span",{className:"text-blue-600",children:"13 jours"})]})]})})]})}function Ux({isOpen:o,onClose:r}){const[n,a]=_.useState([{id:1,type:"MOM",fullName:"Mise en uvre",date:"2025-06-20",status:"completed",letterGenerated:!0,letterSent:!0},{id:2,type:"VA",fullName:"Validation",date:"2025-09-15",status:"planned",letterGenerated:!0,letterSent:!1},{id:3,type:"VSR",fullName:"Vrification Service Rgulier",date:"2025-09-30",status:"planned",letterGenerated:!1,letterSent:!1}]),c=p=>{a(n.map(m=>m.id===p?{...m,status:m.status==="completed"?"planned":"completed"}:m))},u=p=>{a(n.map(m=>m.id===p?{...m,letterGenerated:!0}:m))},h=p=>{a(n.map(m=>m.id===p?{...m,letterSent:!0}:m))};return s.jsx(Ve,{isOpen:o,onClose:r,title:"Grer les jalons cls",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:s.jsx("p",{className:"text-gray-700 text-sm",children:"Les jalons cls (MOM, VA, VSR) sont des tapes rglementaires obligatoires du projet. Assurez-vous de gnrer et envoyer les courriers correspondants dans les dlais."})}),s.jsx("div",{className:"space-y-4",children:n.map(p=>s.jsxs("div",{className:`p-6 rounded-lg border-2 ${p.status==="completed"?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Jh,{className:`w-5 h-5 ${p.status==="completed"?"text-green-600":"text-blue-600"}`}),s.jsxs("h3",{className:"text-gray-900",children:[p.type,"  ",p.fullName]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:"Date prvue :"}),s.jsx("input",{type:"date",value:p.date,onChange:m=>{a(n.map(g=>g.id===p.id?{...g,date:m.target.value}:g))},className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:"Statut :"}),s.jsx("button",{onClick:()=>c(p.id),className:`px-3 py-1 rounded-full text-xs ${p.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:p.status==="completed"?"Termin":"Planifi"})]})]})]}),s.jsx("div",{className:"flex flex-col gap-2",children:p.letterGenerated?p.letterSent?s.jsxs("span",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm",children:[s.jsx(Ji,{className:"w-4 h-4"}),"Courrier envoy"]}):s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm",children:[s.jsx(Et,{className:"w-4 h-4"}),"Courrier gnr"]}),s.jsxs("button",{onClick:()=>h(p.id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[s.jsx(Ml,{className:"w-4 h-4"}),"Marquer comme envoy"]})]}):s.jsxs("button",{onClick:()=>u(p.id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(Et,{className:"w-4 h-4"}),"Gnrer le courrier"]})})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsx("label",{className:"block text-gray-700 text-sm mb-2",children:"Notes sur ce jalon"}),s.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none text-sm",placeholder:"Ajoutez des notes..."})]})]},p.id))}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer et fermer"})})]})})}function zx(){const[o,r]=_.useState(!1),n=[{name:"MOM",fullName:"Mise en uvre",date:"20/06/2025",status:"completed",letterStatus:"sent"},{name:"VA",fullName:"Validation",date:"15/09/2025",status:"planned",letterStatus:"generated"},{name:"VSR",fullName:"Vrification Service Rgulier",date:"30/09/2025",status:"planned",letterStatus:"pending"}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Jh,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Jalons cls (MOM / VA / VSR)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"space-y-6",children:n.map((a,c)=>s.jsxs("div",{className:"relative pl-12",children:[s.jsx("div",{className:"absolute left-0 top-1",children:a.status==="completed"?s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(_s,{className:"w-5 h-5 text-green-600"})}):s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Vg,{className:"w-5 h-5 text-blue-600"})})}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-900",children:a.name}),s.jsxs("span",{className:"text-gray-500 text-sm",children:[" ",a.fullName]})]}),s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[a.status==="completed"?"Termin le":"Prvu le"," ",a.date]})]}),a.letterStatus!=="pending"&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Ji,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.letterStatus==="sent"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a.letterStatus==="sent"?"Envoy":"Gnr"})]})]})})]},c))})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Grer les jalons"})})]}),s.jsx(Ux,{isOpen:o,onClose:()=>r(!1)})]})}function Fx({isOpen:o,onClose:r,documentName:n}){return s.jsx(Ve,{isOpen:o,onClose:r,title:n,size:"xl",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Type"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"PDF"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Taille"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"2.4 MB"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Cr le"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"03/09/2025"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Cr par"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"Jean Dupont"})]})]})}),s.jsxs("div",{className:"bg-gray-100 rounded-lg p-12 border-2 border-dashed border-gray-300 flex flex-col items-center justify-center min-h-[400px]",children:[s.jsx(Et,{className:"w-16 h-16 text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-center mb-2",children:"Aperu du document"}),s.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Le visualiseur de documents serait affich ici"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx($l,{className:"w-4 h-4"}),"Tlcharger"]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(b0,{className:"w-4 h-4"}),"Partager"]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[s.jsx(Vt,{className:"w-4 h-4"}),"Supprimer"]})]})]})})}function Bx(){const[o,r]=_.useState(null),n=[{name:"CR COPIL 03/09",type:"PDF",date:"03/09/2025",size:"2.4 MB",icon:Et},{name:"Guide d'utilisation module Paie",type:"PDF",date:"28/08/2025",size:"5.1 MB",icon:Et},{name:"Courrier VA",type:"DOCX",date:"25/08/2025",size:"156 KB",icon:th},{name:"Cahier de recette Formation",type:"PDF",date:"20/08/2025",size:"1.8 MB",icon:Et},{name:"Planning dtaill projet",type:"XLSX",date:"15/08/2025",size:"324 KB",icon:th}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Et,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Derniers documents"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:n.map((a,c)=>s.jsxs("div",{onClick:()=>r(a.name),className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx(a.icon,{className:"w-8 h-8 text-blue-600"}),s.jsx("button",{className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-blue-100 rounded",children:s.jsx($l,{className:"w-4 h-4 text-blue-600"})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-gray-900 text-sm line-clamp-2",children:a.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:a.type}),s.jsx("span",{className:"text-gray-500 text-xs",children:a.size})]}),s.jsx("p",{className:"text-gray-500 text-xs",children:a.date})]})]},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Voir tous les documents"})})]}),o&&s.jsx(Fx,{isOpen:!0,onClose:()=>r(null),documentName:o})]})}const qx={summary:"Rsum du projet",prerequisites:"Prrequis client",consumption:"Consommation par prestation",interventions:"Interventions  venir",validations:"Validations client en attente",alerts:"carts de charge",milestones:"Jalons cls",documents:"Documents rcents"};function Vx({isOpen:o,onClose:r,config:n,onSave:a}){const[c,u]=_.useState(n),[h,p]=_.useState(!1),[m,g]=_.useState(null),v=C=>{u(E=>E.map(T=>T.id===C?{...T,enabled:!T.enabled}:T))},j=C=>{g(C)},w=(C,E)=>{if(C.preventDefault(),m===null||m===E)return;const T=[...c],I=T[m];T.splice(m,1),T.splice(E,0,I);const D=T.map((U,$)=>({...U,order:$}));u(D),g(E)},b=()=>{g(null)},S=()=>{a(c),p(!0),setTimeout(()=>{r()},1e3)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Personnaliser le tableau de bord",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"Activez ou dsactivez les widgets et rorganisez-les par glisser-dposer."}),s.jsx("div",{className:"space-y-2",children:c.sort((C,E)=>C.order-E.order).map((C,E)=>s.jsxs("div",{draggable:!0,onDragStart:()=>j(E),onDragOver:T=>w(T,E),onDragEnd:b,className:`flex items-center gap-3 p-4 bg-white border rounded-lg cursor-move transition-all ${m===E?"opacity-50 scale-95":"hover:shadow-md"}`,children:[s.jsx(o0,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"flex-1 text-gray-900",children:qx[C.id]||C.id}),s.jsx("button",{onClick:()=>v(C.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors ${C.enabled?"bg-blue-50 text-blue-700 hover:bg-blue-100":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:C.enabled?s.jsxs(s.Fragment,{children:[s.jsx(Gh,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Visible"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Xg,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Masqu"})]})})]},C.id))}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer"})]})]})}),h&&s.jsx(He,{message:"Configuration enregistre",type:"success",onClose:()=>p(!1)})]})}function Ph(){const[o,r]=_.useState(!1),[n,a]=_.useState([{id:"summary",component:Tx,enabled:!0,order:0,colSpan:"xl:col-span-2"},{id:"prerequisites",component:Ax,enabled:!0,order:1,colSpan:""},{id:"consumption",component:Rx,enabled:!0,order:2,colSpan:""},{id:"interventions",component:Dx,enabled:!0,order:3,colSpan:""},{id:"validations",component:Lx,enabled:!0,order:4,colSpan:""},{id:"alerts",component:Mx,enabled:!0,order:5,colSpan:"lg:col-span-2"},{id:"milestones",component:zx,enabled:!0,order:6,colSpan:""},{id:"documents",component:Bx,enabled:!0,order:7,colSpan:"lg:col-span-2 xl:col-span-3"}]),c=h=>{a(h)},u=n.filter(h=>h.enabled).sort((h,p)=>h.order-p.order);return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 flex justify-end",children:s.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(Ul,{className:"w-4 h-4"}),s.jsx("span",{children:"Personnaliser le tableau de bord"})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(h=>{const p=h.component;return s.jsx("div",{className:h.colSpan,children:s.jsx(p,{})},h.id)})}),s.jsx(Vx,{isOpen:o,onClose:()=>r(!1),config:n,onSave:c})]})}const Hx=[{key:"mon",label:"L"},{key:"tue",label:"M"},{key:"wed",label:"Me"},{key:"thu",label:"J"},{key:"fri",label:"V"},{key:"sat",label:"S"},{key:"sun",label:"D"}];function Wx({consultants:o,onEdit:r,onDelete:n}){return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Consultant"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Comptences"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Localisation"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Jours"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(a=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-700",children:a.name.split(" ").filter(Boolean).map(c=>c[0]).join("").slice(0,2)})}),s.jsx("div",{className:"text-gray-900",children:a.name})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:a.service})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:a.competences?.length?a.competences.map((c,u)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:[s.jsx(Dl,{className:"w-3 h-3"}),c]},`${c}-${u}`)):s.jsx("span",{className:"text-sm text-gray-400",children:""})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(sa,{className:"w-4 h-4 text-gray-400"}),a.location]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[a.email?s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[s.jsx(Ji,{className:"w-3 h-3"}),s.jsx("a",{href:`mailto:${a.email}`,className:"hover:text-blue-600",children:a.email})]}):s.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[s.jsx(Ji,{className:"w-3 h-3"}),""]}),a.phone?s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[s.jsx(rh,{className:"w-3 h-3"}),s.jsx("a",{href:`tel:${a.phone}`,className:"hover:text-blue-600",children:a.phone})]}):s.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[s.jsx(rh,{className:"w-3 h-3"}),""]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center gap-1",children:Hx.map(c=>s.jsx("span",{className:`w-7 h-7 rounded flex items-center justify-center text-xs border ${a.workDays?.[c.key]?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-400"}`,title:c.key,children:c.label},c.key))})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),r(a)},className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(p0,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),n(a.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},a.id))})]})}),o.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucun consultant trouv"})]})}async function Kx(o,r){const{data:n,error:a}=await le.from("consultant_bookings").select("id, consultant_id, kind, title, notes, start_date, end_date").lte("start_date",r).gte("end_date",o).order("start_date",{ascending:!0});if(a)throw a;return(n??[]).map(c=>({id:c.id,consultantId:c.consultant_id,kind:c.kind,title:c.title,notes:c.notes??"",startDate:c.start_date,endDate:c.end_date}))}async function Gx(o){const{error:r}=await le.from("consultant_bookings").insert({consultant_id:o.consultantId,kind:o.kind??"booking",title:o.title,notes:o.notes??"",start_date:o.startDate,end_date:o.endDate});if(r)throw r}async function Jx(o){const{error:r}=await le.from("consultant_bookings").delete().eq("id",o);if(r)throw r}function Hi(o){const r=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0");return`${r}-${n}-${a}`}function Rh(o,r){const n=new Date(o);return n.setDate(n.getDate()+r),n}function Oh(o,r){const n=o.getTime()-r.getTime();return Math.floor(n/(24*3600*1e3))}function Qx(o,r){const n=r.getDay(),a=o.workDays;if(!a)return!0;switch(n){case 1:return a.mon;case 2:return a.tue;case 3:return a.wed;case 4:return a.thu;case 5:return a.fri;case 6:return a.sat;case 0:return a.sun;default:return!0}}function Yx({consultants:o}){const[r,n]=_.useState(0),a=14,[c,u]=_.useState([]),[h,p]=_.useState(!1),m=_.useMemo(()=>{const T=[],I=new Date,D=new Date(I);D.setHours(0,0,0,0),D.setDate(I.getDate()+r*7);for(let U=0;U<a;U++)T.push(Rh(D,U));return T},[r]),g=_.useMemo(()=>Hi(m[0]),[m]),v=_.useMemo(()=>Hi(m[a-1]),[m]),j=async()=>{p(!0);try{const T=await Kx(g,v);u(T)}finally{p(!1)}};_.useEffect(()=>{j()},[g,v]);const w=_.useMemo(()=>{const T=new Map;for(const I of c){const D=T.get(I.consultantId)??[];D.push(I),T.set(I.consultantId,D)}return T},[c]),b=()=>n(T=>T-1),S=()=>n(T=>T+1),C=async(T,I)=>{const D=(prompt("Titre de la rservation :","Rservation")??"").trim();if(!D)return;const $=(prompt("Type (booking / time_off) :","booking")??"booking").trim()==="time_off"?"time_off":"booking",F=(prompt("Dure (jours) :","1")??"1").trim(),L=Math.max(1,Number(F)||1),te=Hi(I),H=Hi(Rh(I,L-1));await Gx({consultantId:T,kind:$,title:D,startDate:te,endDate:H}),await j()},E=async T=>{confirm("Supprimer cet vnement ?")&&(await Jx(T),await j())};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"border-b border-gray-200 p-4 flex items-center justify-between bg-gray-50",children:[s.jsxs("h3",{className:"text-gray-900",children:["Planning ",h?" chargement":""]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:s.jsx(Dg,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-gray-700 min-w-[240px] text-center",children:[m[0].toLocaleDateString("fr-FR",{day:"numeric",month:"long"})," -"," ",m[a-1].toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]}),s.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:s.jsx(Lg,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-[1200px]",children:[s.jsxs("div",{className:"grid grid-cols-[200px_repeat(14,1fr)] border-b border-gray-200 bg-gray-50",children:[s.jsx("div",{className:"p-3 border-r border-gray-200",children:s.jsx("span",{className:"text-gray-700",children:"Consultant"})}),m.map((T,I)=>s.jsxs("div",{className:"p-3 text-center border-r border-gray-200",children:[s.jsx("div",{className:"text-sm text-gray-600",children:T.toLocaleDateString("fr-FR",{weekday:"short"})}),s.jsx("div",{className:"text-gray-900",children:T.getDate()})]},I))]}),o.map(T=>{const D=(w.get(T.id)??[]).map(U=>{const $=new Date(U.startDate),F=new Date(U.endDate),L=m[0],te=m[a-1],H=$<L?L:$,X=F>te?te:F,ee=Oh(H,L),J=Oh(X,L)-ee+1;return{it:U,startIdx:ee,days:J}}).filter(U=>U.days>0&&U.startIdx>=0&&U.startIdx<a);return s.jsxs("div",{className:"grid grid-cols-[200px_repeat(14,1fr)] border-b border-gray-200 hover:bg-gray-50",children:[s.jsxs("div",{className:"p-3 border-r border-gray-200 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-blue-700 text-sm",children:T.name.split(" ").filter(Boolean).map(U=>U[0]).join("").slice(0,2)})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-gray-900 text-sm truncate",children:T.name}),s.jsx("div",{className:"text-gray-500 text-xs",children:T.service})]})]}),m.map((U,$)=>{const F=D.find(H=>$>=H.startIdx&&$<H.startIdx+H.days),L=F&&$===F.startIdx,te=Qx(T,U);return s.jsx("div",{className:"border-r border-gray-200 p-1 relative min-h-[60px]",onDoubleClick:()=>{!F&&te&&C(T.id,U)},title:!F&&te?"Double-clic pour ajouter":void 0,children:F?L?s.jsx("button",{type:"button",onClick:()=>void E(F.it.id),className:`absolute top-1 left-1 h-[calc(100%-8px)] rounded px-2 py-1 text-xs overflow-hidden text-white ${F.it.kind==="time_off"?"bg-red-500":"bg-blue-500"}`,style:{width:`calc(${F.days*100}% + ${(F.days-1)*1}px)`},title:"Cliquer pour supprimer",children:s.jsx("div",{className:"truncate",children:F.it.title})}):null:te?s.jsx("div",{className:"w-full h-full bg-green-50 rounded"}):s.jsx("div",{className:"w-full h-full bg-gray-100 rounded"})},$)})]},T.id)})]})}),s.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-50 border border-green-200 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Travaille (libre)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-200 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Ne travaille pas"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Rserv"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Absence / indispo"})]})]})]})}const Ah={mon:!0,tue:!0,wed:!0,thu:!0,fri:!0,sat:!1,sun:!1};function Ih({isOpen:o,onClose:r,onSave:n,consultant:a,competenceOptions:c=[]}){const[u,h]=_.useState(a?.name||""),[p,m]=_.useState(a?.email||""),[g,v]=_.useState(a?.phone||""),[j,w]=_.useState(a?.service||"SIRH"),[b,S]=_.useState(a?.location||""),[C,E]=_.useState(a?.competences||[]),[T,I]=_.useState(""),[D,U]=_.useState(a?.workDays||Ah),[$,F]=_.useState(!1);_.useEffect(()=>{o&&(h(a?.name||""),m(a?.email||""),v(a?.phone||""),w(a?.service||"SIRH"),S(a?.location||""),E(a?.competences||[]),I(""),U(a?.workDays||Ah))},[o,a]);const L=()=>{T&&!C.includes(T)&&(E([...C,T]),I(""))},te=G=>{E(C.filter(J=>J!==G))},H=G=>{U(J=>({...J,[G]:!J[G]}))},X=async G=>{G.preventDefault(),await n({name:u,email:p.trim()||"",phone:g.trim()||"",service:j,location:b,competences:C,workDays:D}),F(!0),setTimeout(()=>{r()},700)},ee=[{key:"mon",label:"Lun"},{key:"tue",label:"Mar"},{key:"wed",label:"Mer"},{key:"thu",label:"Jeu"},{key:"fri",label:"Ven"},{key:"sat",label:"Sam"},{key:"sun",label:"Dim"}];return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier le consultant":"Ajouter un consultant",children:s.jsxs("form",{onSubmit:X,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom complet *"}),s.jsx("input",{type:"text",value:u,onChange:G=>h(G.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Jean Dupont"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:p,onChange:G=>m(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"jean.dupont@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Tlphone"}),s.jsx("input",{type:"tel",value:g,onChange:G=>v(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Service *"}),s.jsxs("select",{value:j,onChange:G=>w(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"SIRH",children:"SIRH"}),s.jsx("option",{value:"Finance",children:"Finance"}),s.jsx("option",{value:"Support",children:"Support"}),s.jsx("option",{value:"Formation",children:"Formation"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Localisation *"}),s.jsx("input",{type:"text",value:b,onChange:G=>S(G.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Paris, Lyon, etc."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Comptences"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("select",{value:T,onChange:G=>I(G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner une comptence"}),c.filter(G=>!C.includes(G)).map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsx("button",{type:"button",onClick:L,disabled:!T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(at,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(G=>s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:[G,s.jsx("button",{type:"button",onClick:()=>te(G),className:"hover:bg-blue-100 rounded-full p-0.5",children:s.jsx(Hr,{className:"w-3 h-3"})})]},G))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Jours travaills"}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:ee.map(G=>s.jsxs("label",{className:`flex items-center justify-center gap-2 px-2 py-2 rounded-lg border cursor-pointer select-none ${D[G.key]?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-700"}`,children:[s.jsx("input",{type:"checkbox",checked:D[G.key],onChange:()=>H(G.key),className:"hidden"}),s.jsx("span",{className:"text-sm",children:G.label})]},G.key))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Mettre  jour":"Ajouter"})]})]})}),$&&s.jsx(He,{message:a?"Consultant mis  jour":"Consultant ajout avec succs",type:"success",onClose:()=>F(!1)})]})}function Xx(){const[o,r]=_.useState("table"),[n,a]=_.useState([]),[c,u]=_.useState([]),[h,p]=_.useState(!0),[m,g]=_.useState(null),[v,j]=_.useState(!1),[w,b]=_.useState(void 0),[S,C]=_.useState(""),[E,T]=_.useState(""),[I,D]=_.useState(""),[U,$]=_.useState(!1),[F,L]=_.useState(""),te=_.useMemo(()=>c.map(ue=>ue.name),[c]),H=async()=>{p(!0),g(null);try{const[ue,Q]=await Promise.all([Jl(),ip()]);a(ue),u(Q)}catch(ue){g(ue?.message??"Erreur lors du chargement des donnes.")}finally{p(!1)}};_.useEffect(()=>{H()},[]);const X=_.useMemo(()=>Array.from(new Set(n.flatMap(ue=>ue.competences??[]))).sort(),[n]),ee=_.useMemo(()=>Array.from(new Set(n.map(ue=>ue.location))).sort(),[n]),G=_.useMemo(()=>{const ue=S.trim().toLowerCase();return n.filter(Q=>{const M=!ue||Q.name.toLowerCase().includes(ue)||(Q.email??"").toLowerCase().includes(ue),ae=!E||(Q.competences??[]).includes(E),Y=!I||Q.location===I;return M&&ae&&Y})},[n,S,E,I]),J=async ue=>{try{await dx(ue),await H(),L("Consultant ajout"),$(!0)}catch(Q){g(Q?.message??"Erreur lors de la cration.")}},de=async ue=>{if(w)try{await hx(w.id,ue),await H(),b(void 0),L("Consultant mis  jour"),$(!0)}catch(Q){g(Q?.message??"Erreur lors de la mise  jour.")}},je=async ue=>{if(confirm("tes-vous sr de vouloir supprimer ce consultant ?"))try{await fx(ue),await H(),L("Consultant supprim"),$(!0)}catch(Q){g(Q?.message??"Erreur lors de la suppression.")}};return h?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):m?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:m}),s.jsx("button",{onClick:()=>void H(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un consultant...",value:S,onChange:ue=>C(ue.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ll,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:E,onChange:ue=>T(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Toutes les comptences"}),X.map(ue=>s.jsx("option",{value:ue,children:ue},ue))]})]}),s.jsxs("select",{value:I,onChange:ue=>D(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Toutes les localisations"}),ee.map(ue=>s.jsx("option",{value:ue,children:ue},ue))]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>r("table"),className:`px-4 py-2 rounded-md transition-colors ${o==="table"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Liste"}),s.jsxs("button",{onClick:()=>r("calendar"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${o==="calendar"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(er,{className:"w-4 h-4"}),"Planning"]})]}),s.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter un consultant"})]})]})]}),o==="table"?s.jsx(Wx,{consultants:G,onEdit:ue=>b(ue),onDelete:ue=>void je(ue)}):s.jsx(Yx,{consultants:G}),s.jsx(Ih,{isOpen:v,onClose:()=>j(!1),onSave:J,competenceOptions:te}),w&&s.jsx(Ih,{isOpen:!!w,onClose:()=>b(void 0),onSave:de,consultant:w,competenceOptions:te}),U&&s.jsx(He,{message:F,type:"success",onClose:()=>$(!1)})]})}function Dh({isOpen:o,onClose:r,onSave:n,article:a,prestationOptions:c,competenceOptions:u,serviceOptions:h=["SIRH","Finance","Support","Formation"]}){const p=c?.[0]??"Installation",m=h?.[0]??"SIRH",[g,v]=_.useState(""),[j,w]=_.useState(p),[b,S]=_.useState(m),[C,E]=_.useState([]),[T,I]=_.useState(""),[D,U]=_.useState(1),[$,F]=_.useState("Sur site"),[L,te]=_.useState(""),[H,X]=_.useState(!1),[ee,G]=_.useState(!1),J=_.useMemo(()=>u.filter(Q=>!C.includes(Q)),[u,C]);_.useEffect(()=>{o&&(v(a?.name??""),w(a?.type??p),S(a?.service??m),E(a?.competencesRequired??[]),I(""),U(a?.standardDuration??1),F(a?.mode??"Sur site"),te(a?.description??""))},[o,a,p,m]);const de=()=>{T&&!C.includes(T)&&(E([...C,T]),I(""))},je=Q=>{E(C.filter(M=>M!==Q))},ue=async Q=>{Q.preventDefault(),G(!0);try{await n({name:g,type:j,service:b,competencesRequired:C,standardDuration:D,mode:$,description:L}),X(!0),setTimeout(()=>{r()},700)}finally{G(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier l'article":"Crer un article",children:s.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom de l'article *"}),s.jsx("input",{type:"text",value:g,onChange:Q=>v(Q.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Installation SIRH Paie"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type de prestation *"}),s.jsx("select",{value:j,onChange:Q=>w(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.length===0?s.jsx("option",{value:p,children:p}):c.map(Q=>s.jsx("option",{value:Q,children:Q},Q))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Service propritaire *"}),s.jsx("select",{value:b,onChange:Q=>S(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:h.map(Q=>s.jsx("option",{value:Q,children:Q},Q))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Dure standard (jours) *"}),s.jsx("input",{type:"number",min:"1",value:D,onChange:Q=>U(Number(Q.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Mode d'intervention *"}),s.jsxs("select",{value:$,onChange:Q=>F(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"Sur site",children:"Sur site"}),s.jsx("option",{value:" distance",children:" distance"}),s.jsx("option",{value:"Hybride",children:"Hybride"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Comptences ncessaires *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("select",{value:T,onChange:Q=>I(Q.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner une comptence"}),J.map(Q=>s.jsx("option",{value:Q,children:Q},Q))]}),s.jsx("button",{type:"button",onClick:de,disabled:!T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Ajouter la comptence",children:s.jsx(at,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(Q=>s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:[Q,s.jsx("button",{type:"button",onClick:()=>je(Q),className:"hover:bg-blue-100 rounded-full p-0.5",title:"Retirer",children:s.jsx(Hr,{className:"w-3 h-3"})})]},Q))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:L,onChange:Q=>te(Q.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description de la prestation..."})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,disabled:ee,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:ee?"Enregistrement...":a?"Mettre  jour":"Crer"})]})]})}),H&&s.jsx(He,{message:a?"Article mis  jour":"Article cr avec succs",type:"success",onClose:()=>X(!1)})]})}async function op(){const{data:o,error:r}=await le.from("articles").select(`
      id,
      name,
      service,
      standard_duration_days,
      mode,
      description,
      prestation:prestations(name),
      competences:article_competences(
        competence:competences(name)
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,name:n.name,type:n.prestation?.name??"",service:n.service,competencesRequired:(n.competences??[]).map(a=>a.competence?.name).filter(Boolean),standardDuration:n.standard_duration_days,mode:n.mode,description:n.description??""}))}async function Zx(o){const r=await ap(o.type),{data:n,error:a}=await le.from("articles").insert({name:o.name,prestation_id:r,service:o.service,standard_duration_days:o.standardDuration,mode:o.mode,description:o.description??""}).select("id").single();if(a)throw a;const c=await ca(o.competencesRequired);if(c.length>0){const{error:u}=await le.from("article_competences").insert(c.map(h=>({article_id:n.id,competence_id:h})));if(u)throw u}}async function ew(o,r){const n=await ap(r.type),{error:a}=await le.from("articles").update({name:r.name,prestation_id:n,service:r.service,standard_duration_days:r.standardDuration,mode:r.mode,description:r.description??"",updated_at:new Date().toISOString()}).eq("id",o);if(a)throw a;const{error:c}=await le.from("article_competences").delete().eq("article_id",o);if(c)throw c;const u=await ca(r.competencesRequired);if(u.length>0){const{error:h}=await le.from("article_competences").insert(u.map(p=>({article_id:o,competence_id:p})));if(h)throw h}}async function tw(o){const{error:r}=await le.from("article_competences").delete().eq("article_id",o);if(r)throw r;const{error:n}=await le.from("articles").delete().eq("id",o);if(n)throw n}function rw(){const[o,r]=_.useState([]),[n,a]=_.useState([]),[c,u]=_.useState([]),[h,p]=_.useState(!0),[m,g]=_.useState(null),[v,j]=_.useState(!1),[w,b]=_.useState(),[S,C]=_.useState(""),[E,T]=_.useState(!1),[I,D]=_.useState(""),U=_.useMemo(()=>n.map(J=>J.name),[n]),$=_.useMemo(()=>c.map(J=>J.name),[c]),F=async()=>{p(!0),g(null);try{const[J,de,je]=await Promise.all([op(),ux(),ip()]);r(J),a(de),u(je)}catch(J){g(J?.message??"Erreur lors du chargement des donnes.")}finally{p(!1)}};_.useEffect(()=>{F()},[]);const L=_.useMemo(()=>{const J=S.trim().toLowerCase();return J?o.filter(de=>de.name.toLowerCase().includes(J)||de.type.toLowerCase().includes(J)||de.service.toLowerCase().includes(J)):o},[o,S]),te=async J=>{await Zx(J),await F(),D("Article ajout avec succs"),T(!0)},H=async J=>{w&&(await ew(w.id,J),await F(),D("Article mis  jour"),T(!0),b(void 0))},X=async J=>{confirm("tes-vous sr de vouloir supprimer cet article ?")&&(await tw(J),await F(),D("Article supprim"),T(!0))},ee=J=>{switch(J){case"Sur site":return"bg-blue-100 text-blue-700";case" distance":return"bg-green-100 text-green-700";case"Hybride":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},G=J=>({Installation:"bg-orange-100 text-orange-700",Paramtrage:"bg-blue-100 text-blue-700",Formation:"bg-green-100 text-green-700","Reprise de donnes":"bg-purple-100 text-purple-700",Support:"bg-gray-100 text-gray-700",Migration:"bg-pink-100 text-pink-700"})[J]??"bg-gray-100 text-gray-700";return h?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):m?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:m}),s.jsx("button",{onClick:()=>void F(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un article...",value:S,onChange:J=>C(J.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer un article"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:L.map(J=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-gray-900 mb-2",children:J.name}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsx("span",{className:`px-2 py-1 rounded text-sm ${G(J.type)}`,children:J.type}),s.jsx("span",{className:`px-2 py-1 rounded text-sm ${ee(J.mode)}`,children:J.mode})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>b(J),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>void X(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Vt,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Service"}),s.jsx("div",{className:"text-gray-900",children:J.service})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Comptences requises"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:J.competencesRequired.map((de,je)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:de},`${de}-${je}`))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Dure standard"}),s.jsxs("div",{className:"text-gray-900",children:[J.standardDuration," jour",J.standardDuration>1?"s":""]})]}),J.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Description"}),s.jsx("div",{className:"text-gray-600 text-sm",children:J.description})]})]})]},J.id))}),L.length===0&&s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:s.jsx("div",{className:"text-gray-500",children:"Aucun article trouv"})}),s.jsx(Dh,{isOpen:v,onClose:()=>j(!1),onSave:te,prestationOptions:U,competenceOptions:$}),w&&s.jsx(Dh,{isOpen:!!w,onClose:()=>b(void 0),onSave:H,article:w,prestationOptions:U,competenceOptions:$}),E&&s.jsx(He,{message:I,type:"success",onClose:()=>T(!1)})]})}function $h({isOpen:o,onClose:r,onSave:n,competence:a}){const[c,u]=_.useState(a?.name??""),[h,p]=_.useState(!1),[m,g]=_.useState(!1);_.useEffect(()=>{o&&u(a?.name??"")},[o,a]);const v=async j=>{j.preventDefault(),p(!0);try{await n({name:c}),g(!0),setTimeout(()=>r(),700)}finally{p(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier la comptence":"Crer une comptence",size:"sm",children:s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom de la comptence *"}),s.jsx("input",{type:"text",value:c,onChange:j=>u(j.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex : Paie"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,disabled:h,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:h?"Enregistrement...":a?"Mettre  jour":"Crer"})]})]})}),m&&s.jsx(He,{message:a?"Comptence mise  jour":"Comptence cre",type:"success",onClose:()=>g(!1)})]})}async function nw(){const{data:o,error:r}=await le.from("competences").select("id,name").order("name",{ascending:!0});if(r)throw r;return o??[]}async function sw(o){const r=o.trim();if(!r)throw new Error("Le nom de comptence est vide.");const{error:n}=await le.from("competences").insert({name:r});if(n)throw n}async function iw(o,r){const n=r.trim();if(!n)throw new Error("Le nom de comptence est vide.");const{error:a}=await le.from("competences").update({name:n}).eq("id",o);if(a)throw a}async function aw(o){const{error:r}=await le.from("article_competences").delete().eq("competence_id",o);if(r)throw r;const{error:n}=await le.from("consultant_competences").delete().eq("competence_id",o);if(n)throw n;const{error:a}=await le.from("competences").delete().eq("id",o);if(a)throw a}function ow(){const[o,r]=_.useState([]),[n,a]=_.useState(!0),[c,u]=_.useState(null),[h,p]=_.useState(""),[m,g]=_.useState(!1),[v,j]=_.useState(),[w,b]=_.useState(!1),[S,C]=_.useState(""),E=async()=>{a(!0),u(null);try{const $=await nw();r($)}catch($){u($?.message??"Erreur lors du chargement des comptences.")}finally{a(!1)}};_.useEffect(()=>{E()},[]);const T=_.useMemo(()=>{const $=h.trim().toLowerCase();return $?o.filter(F=>F.name.toLowerCase().includes($)):o},[o,h]),I=async $=>{await sw($.name),await E(),C("Comptence ajoute"),b(!0)},D=async $=>{v&&(await iw(v.id,$.name),await E(),C("Comptence mise  jour"),b(!0),j(void 0))},U=async $=>{confirm("Supprimer cette comptence ? Elle sera aussi retire des articles et consultants qui l'utilisent.")&&(await aw($),await E(),C("Comptence supprime"),b(!0))};return n?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):c?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:c}),s.jsx("button",{onClick:()=>void E(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher une comptence...",value:h,onChange:$=>p($.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer une comptence"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Comptence"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map($=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-gray-900",children:$.name})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>j($),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>void U($.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},$.id))})]})}),T.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucune comptence trouve"})]}),s.jsx($h,{isOpen:m,onClose:()=>g(!1),onSave:I}),v&&s.jsx($h,{isOpen:!!v,onClose:()=>j(void 0),onSave:D,competence:v}),w&&s.jsx(He,{message:S,type:"success",onClose:()=>b(!1)})]})}const lw=["Installation SIRH Paie","Installation GTA","Installation SIGF","Paramtrage Paie","Paramtrage GTA","Paramtrage SIGF Standard","Paramtrage avanc","Formation utilisateurs","Formation administrateurs","Reprise de donnes","Migration donnes"];function Lh({isOpen:o,onClose:r,onSave:n,template:a}){const[c,u]=_.useState(a?.name||""),[h,p]=_.useState(a?.description||""),[m,g]=_.useState(a?.type||"Packag"),[v,j]=_.useState(a?.articles||[]),[w,b]=_.useState(""),[S,C]=_.useState(a?.estimatedDuration||30),[E,T]=_.useState(a?.estimatedDays||15),[I,D]=_.useState(!1),U=()=>{w&&!v.includes(w)&&(j([...v,w]),b(""))},$=L=>{j(v.filter(te=>te!==L))},F=L=>{L.preventDefault(),n({name:c,description:h,type:m,articles:v,estimatedDuration:S,estimatedDays:E}),D(!0),setTimeout(()=>{r(),a||(u(""),p(""),g("Packag"),j([]),C(30),T(15))},1e3)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier le modle de projet":"Crer un modle de projet",children:s.jsxs("form",{onSubmit:F,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom du modle *"}),s.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Pack SIRH Paie Standard"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:h,onChange:L=>p(L.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description du modle de projet..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type de projet *"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"Packag",checked:m==="Packag",onChange:L=>g(L.target.value),className:"text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"Packag"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"Sur-mesure",checked:m==="Sur-mesure",onChange:L=>g(L.target.value),className:"text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"Sur-mesure"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Articles inclus *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("select",{value:w,onChange:L=>b(L.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner un article"}),lw.filter(L=>!v.includes(L)).map(L=>s.jsx("option",{value:L,children:L},L))]}),s.jsx("button",{type:"button",onClick:U,disabled:!w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(at,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"space-y-2",children:v.map((L,te)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-gray-700",children:L}),s.jsx("button",{type:"button",onClick:()=>$(L),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:s.jsx(Hr,{className:"w-4 h-4 text-gray-600"})})]},te))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Dure estime (jours calendaires) *"}),s.jsx("input",{type:"number",min:"1",value:S,onChange:L=>C(Number(L.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Jours vendus *"}),s.jsx("input",{type:"number",min:"1",value:E,onChange:L=>T(Number(L.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Mettre  jour":"Crer"})]})]})}),I&&s.jsx(He,{message:a?"Modle mis  jour":"Modle cr avec succs",type:"success",onClose:()=>D(!1)})]})}const cw=[{id:"1",article:"Installation",dependencies:[]},{id:"2",article:"Paramtrage",dependencies:["Installation"]},{id:"3",article:"Reprise de donnes",dependencies:["Paramtrage"]},{id:"4",article:"Formation administrateurs",dependencies:["Paramtrage"]},{id:"5",article:"Formation utilisateurs",dependencies:["Formation administrateurs"]}];function uw({isOpen:o,onClose:r}){const[n,a]=_.useState(cw),[c,u]=_.useState(!1),h=["Installation","Paramtrage","Formation administrateurs","Formation utilisateurs","Reprise de donnes","Migration","Support","Tests","Validation","Mise en production"],p=()=>{const w={id:Date.now().toString(),article:"",dependencies:[]};a([...n,w])},m=w=>{a(n.filter(b=>b.id!==w))},g=(w,b)=>{a(n.map(S=>S.id===w?{...S,article:b}:S))},v=(w,b)=>{a(n.map(S=>{if(S.id===w){const C=S.dependencies.includes(b)?S.dependencies.filter(E=>E!==b):[...S.dependencies,b];return{...S,dependencies:C}}return S}))},j=()=>{u(!0),setTimeout(()=>{r()},1500)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Configuration du squenage",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("p",{className:"text-gray-600",children:"Dfinissez l'ordre et les dpendances entre les prestations. Une prestation ne peut commencer que lorsque ses dpendances sont termines."}),s.jsx("div",{className:"space-y-4",children:n.map((w,b)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center",children:b+1}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Prestation"}),s.jsxs("select",{value:w.article,onChange:S=>g(w.id,S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner une prestation"}),h.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),b>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Dpend de :"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.slice(0,b).map(S=>S.article&&s.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:w.dependencies.includes(S.article),onChange:()=>v(w.id,S.article),className:"rounded text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:S.article})]},S.id))})]})]}),s.jsx("button",{onClick:()=>m(w.id),className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Hr,{className:"w-4 h-4"})})]}),b<n.length-1&&s.jsx("div",{className:"flex justify-center mt-3",children:s.jsx(jg,{className:"w-5 h-5 text-gray-400"})})]},w.id))}),s.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-blue-500 hover:text-blue-600 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter une tape"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer le squenage"})]})]})}),c&&s.jsx(He,{message:"Squenage enregistr avec succs",type:"success",onClose:()=>u(!1)})]})}const dw=[{id:"1",name:"Pack SIRH Paie Standard",description:"Installation et paramtrage standard du module Paie",type:"Packag",articles:["Installation SIRH Paie","Paramtrage Paie","Formation utilisateurs"],estimatedDuration:30,estimatedDays:15},{id:"2",name:"Pack SIGF Dploiement simple",description:"Dploiement rapide du systme de gestion financire",type:"Packag",articles:["Installation SIGF","Paramtrage SIGF Standard","Formation administrateurs"],estimatedDuration:45,estimatedDays:20},{id:"3",name:"Pack GTA Complet",description:"Implmentation complte de la gestion des temps",type:"Packag",articles:["Installation GTA","Paramtrage avanc","Formation utilisateurs","Formation administrateurs"],estimatedDuration:60,estimatedDays:25}];function hw(){const[o,r]=_.useState("templates"),[n,a]=_.useState(dw),[c,u]=_.useState(!1),[h,p]=_.useState(),[m,g]=_.useState(!1),[v,j]=_.useState(!1),[w,b]=_.useState(""),S=T=>{const I={...T,id:Date.now().toString()};a([...n,I]),b("Modle de projet cr"),j(!0)},C=T=>{h&&(a(n.map(I=>I.id===h.id?{...T,id:h.id}:I)),b("Modle de projet mis  jour"),j(!0),p(void 0))},E=T=>{confirm("tes-vous sr de vouloir supprimer ce modle ?")&&(a(n.filter(I=>I.id!==T)),b("Modle supprim"),j(!0))};return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>r("templates"),className:`flex items-center gap-2 pb-4 border-b-2 transition-colors ${o==="templates"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(gl,{className:"w-5 h-5"}),s.jsx("span",{children:"Projets packags"})]}),s.jsxs("button",{onClick:()=>r("sequencing"),className:`flex items-center gap-2 pb-4 border-b-2 transition-colors ${o==="sequencing"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(nh,{className:"w-5 h-5"}),s.jsx("span",{children:"Squenage des prestations"})]}),s.jsxs("button",{onClick:()=>r("settings"),className:`flex items-center gap-2 pb-4 border-b-2 transition-colors ${o==="settings"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(Ul,{className:"w-5 h-5"}),s.jsx("span",{children:"Paramtres gnraux"})]})]})}),o==="templates"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 mb-2",children:"Modles de projets packags"}),s.jsx("p",{className:"text-gray-600",children:"Configurez des modles de projet rutilisables avec leurs articles associs"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Nouveau modle"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(T=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-gray-900",children:T.name}),s.jsx("span",{className:`px-2 py-1 rounded text-sm ${T.type==="Packag"?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:T.type})]}),s.jsx("p",{className:"text-gray-600 text-sm",children:T.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>p(T),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E(T.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Vt,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Articles inclus"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:T.articles.map((I,D)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:I},D))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Dure estime"}),s.jsxs("div",{className:"text-gray-900",children:[T.estimatedDuration," jours"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Jours vendus"}),s.jsxs("div",{className:"text-gray-900",children:[T.estimatedDays," jours"]})]})]})]})]},T.id))}),n.length===0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(gl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("div",{className:"text-gray-500",children:"Aucun modle de projet configur"})]})]}),o==="sequencing"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-gray-900 mb-2",children:"Squenage des prestations"}),s.jsx("p",{className:"text-gray-600",children:"Dfinissez les dpendances entre les prestations pour automatiser la cration des plannings"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(nh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-gray-900 mb-2",children:"Configuration du squenage"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Configurez l'ordre et les dpendances entre les diffrentes prestations"}),s.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Configurer le squenage"})]})]}),o==="settings"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-gray-900 mb-2",children:"Paramtres gnraux"}),s.jsx("p",{className:"text-gray-600",children:"Configuration globale de l'application"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Notifications"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),s.jsx("span",{className:"text-gray-700",children:"Alertes d'cart de charge"})]}),s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),s.jsx("span",{className:"text-gray-700",children:"Rappels de validations client"})]}),s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),s.jsx("span",{className:"text-gray-700",children:"Notifications d'interventions  venir"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Prfrences d'affichage"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Langue"}),s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"fr",children:"Franais"}),s.jsx("option",{value:"en",children:"English"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Fuseau horaire"}),s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"Europe/Paris",children:"Europe/Paris (GMT+1)"}),s.jsx("option",{value:"Europe/London",children:"Europe/London (GMT+0)"})]})]})]})]})]})]}),s.jsx(Lh,{isOpen:c,onClose:()=>u(!1),onSave:S}),h&&s.jsx(Lh,{isOpen:!!h,onClose:()=>p(void 0),onSave:C,template:h}),s.jsx(uw,{isOpen:m,onClose:()=>g(!1)}),v&&s.jsx(He,{message:w,type:"success",onClose:()=>j(!1)})]})}function fw(){return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(er,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-gray-900 mb-2",children:"Planning des interventions"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Vue d'ensemble des interventions planifies pour tous les projets"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Cette vue sera prochainement disponible avec un calendrier interactif"})]})})}function pw(){return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(Vh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-gray-900 mb-2",children:"Reporting et analyses"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Tableaux de bord et indicateurs de performance des projets"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Les rapports dtaills seront prochainement disponibles"})]})})}const mw=()=>({name:"",role:"",email:"",phone:""});function Mh({isOpen:o,onClose:r,onSave:n,client:a}){const[c,u]=_.useState(a?.name??""),[h,p]=_.useState(a?.address??""),[m,g]=_.useState(a?.phone??""),[v,j]=_.useState(a?.tier??"Tier 3"),[w,b]=_.useState((a?.contacts??[]).map($=>({name:$.name??"",role:$.role??"",email:$.email??"",phone:$.phone??""}))),[S,C]=_.useState(!1);_.useEffect(()=>{o&&(u(a?.name??""),p(a?.address??""),g(a?.phone??""),j(a?.tier??"Tier 3"),b((a?.contacts??[]).map($=>({name:$.name??"",role:$.role??"",email:$.email??"",phone:$.phone??""}))))},[o,a]);const E=_.useMemo(()=>!(!c.trim()||w.some($=>!$.name.trim())),[c,w]),T=()=>b($=>[...$,mw()]),I=$=>b(F=>F.filter((L,te)=>te!==$)),D=($,F)=>{b(L=>L.map((te,H)=>H===$?{...te,...F}:te))},U=$=>{$.preventDefault();const F=w.map(L=>({name:L.name.trim(),role:(L.role??"").trim(),email:(L.email??"").trim(),phone:(L.phone??"").trim()})).filter(L=>L.name);n({name:c.trim(),address:h??"",phone:m??"",tier:v,contacts:F.map(L=>({id:"",...L}))}),C(!0),setTimeout(()=>r(),700)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier le client":"Crer un client",children:s.jsxs("form",{onSubmit:U,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Numro client"}),s.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:a?a.clientNumber:"Automatique"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Gnr automatiquement. Non modifiable."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Tier *"}),s.jsxs("select",{value:v,onChange:$=>j($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"Tier 1",children:"Tier 1"}),s.jsx("option",{value:"Tier 2",children:"Tier 2"}),s.jsx("option",{value:"Tier 3",children:"Tier 3"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom *"}),s.jsx("input",{type:"text",value:c,onChange:$=>u($.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom du client"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Adresse"}),s.jsx("input",{type:"text",value:h,onChange:$=>p($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Adresse complte"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Tlphone"}),s.jsx("input",{type:"text",value:m,onChange:$=>g($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33 ..."})]}),s.jsxs("div",{className:"pt-2 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Contacts"}),s.jsxs("button",{type:"button",onClick:T,className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),"Ajouter un contact"]})]}),w.length===0?s.jsx("div",{className:"text-sm text-gray-500",children:"Aucun contact"}):s.jsx("div",{className:"space-y-3",children:w.map(($,F)=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Contact #",F+1]}),s.jsx("button",{type:"button",onClick:()=>I(F),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Hr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Nom *"}),s.jsx("input",{type:"text",value:$.name,onChange:L=>D(F,{name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Prnom Nom"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rle"}),s.jsx("input",{type:"text",value:$.role,onChange:L=>D(F,{role:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"DSI, RH, Achats"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:$.email,onChange:L=>D(F,{email:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"contact@client.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Tlphone"}),s.jsx("input",{type:"text",value:$.phone,onChange:L=>D(F,{phone:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33 ..."})]})]})]},F))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:!E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Mettre  jour":"Crer"})]})]})}),S&&s.jsx(He,{message:a?"Client mis  jour":"Client cr",type:"success",onClose:()=>C(!1)})]})}function gw(){const[o,r]=_.useState([]),[n,a]=_.useState(!0),[c,u]=_.useState(null),[h,p]=_.useState(""),[m,g]=_.useState(""),[v,j]=_.useState(!1),[w,b]=_.useState(void 0),[S,C]=_.useState(""),[E,T]=_.useState(!1),I=async()=>{a(!0),u(null);try{const H=await sp();r(H)}catch(H){u(H?.message??"Erreur de chargement.")}finally{a(!1)}};_.useEffect(()=>{I()},[]);const D=_.useMemo(()=>["Tier 1","Tier 2","Tier 3"],[]),U=_.useMemo(()=>{const H=h.trim().toLowerCase();return o.filter(X=>{const ee=!H||X.name.toLowerCase().includes(H)||(X.clientNumber??"").toLowerCase().includes(H)||(X.phone??"").toLowerCase().includes(H),G=!m||X.tier===m;return ee&&G})},[o,h,m]),$=async H=>{await ox(H),await I(),C("Client ajout"),T(!0)},F=async H=>{w&&(await lx(w.id,H),await I(),b(void 0),C("Client mis  jour"),T(!0))},L=async H=>{confirm("Supprimer ce client ?")&&(await cx(H),await I(),C("Client supprim"),T(!0))};if(n)return s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})});if(c)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:c}),s.jsx("button",{type:"button",onClick:()=>void I(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ressayer"})]})});const te=H=>({"Tier 1":"bg-green-100 text-green-700","Tier 2":"bg-blue-100 text-blue-700","Tier 3":"bg-gray-100 text-gray-700"})[H];return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:h,onChange:H=>p(H.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ll,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:m,onChange:H=>g(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Tous les tiers"}),D.map(H=>s.jsx("option",{value:H,children:H},H))]})]})]}),s.jsxs("button",{type:"button",onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer un client"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"N client"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Nom"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Tier"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Tlphone"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Adresse"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Contacts"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:U.map(H=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 text-gray-900",children:H.clientNumber}),s.jsx("td",{className:"px-6 py-4 text-gray-900",children:H.name}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm ${te(H.tier)}`,children:H.tier})}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:H.phone||""}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:H.address||""}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:H.contacts?.length?s.jsxs("span",{children:[H.contacts.length," contact",H.contacts.length>1?"s":""," ",s.jsxs("span",{className:"text-gray-400",children:[" ",H.contacts[0].name,H.contacts.length>1?"":""]})]}):""}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>b(H),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>void L(H.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},H.id))})]})}),U.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucun client trouv"})]}),s.jsx(Mh,{isOpen:v,onClose:()=>j(!1),onSave:$}),w&&s.jsx(Mh,{isOpen:!!w,onClose:()=>b(void 0),onSave:F,client:w}),E&&s.jsx(He,{message:S,type:"success",onClose:()=>T(!1)})]})}function Wi(o){const r=Number(String(o).replace(",","."));return Number.isFinite(r)?r:0}function yw(o,r){const n=(o??[]).filter(Boolean);if(n.length===0)return 100;const a=new Set((r?.competences??[]).filter(Boolean)),c=n.filter(u=>a.has(u)).length;return Math.round(c/n.length*100)}function Uh({isOpen:o,onClose:r,onSave:n,articles:a,consultants:c,line:u}){const[h,p]=_.useState(u?.articleId??""),[m,g]=_.useState(String(u?.soldQuantity??1)),[v,j]=_.useState(String(u?.amount??0)),[w,b]=_.useState(u?.consultantId??""),[S,C]=_.useState(u?.plannedStartDate??""),[E,T]=_.useState(u?.plannedEndDate??""),[I,D]=_.useState(String(u?.plannedQuantity??0)),[U,$]=_.useState(String(u?.realizedQuantity??0)),[F,L]=_.useState(!1),[te,H]=_.useState(null),[X,ee]=_.useState(!1);_.useEffect(()=>{o&&(p(u?.articleId??""),g(String(u?.soldQuantity??1)),j(String(u?.amount??0)),b(u?.consultantId??""),C(u?.plannedStartDate??""),T(u?.plannedEndDate??""),D(String(u?.plannedQuantity??0)),$(String(u?.realizedQuantity??0)),H(null))},[o,u]);const G=_.useMemo(()=>a.find(M=>M.id===h),[a,h]),J=_.useMemo(()=>c.find(M=>M.id===w),[c,w]),de=_.useMemo(()=>{const M=Math.max(0,Wi(m)),ae=Math.max(0,Wi(I)),Y=Math.max(0,Wi(U)),P=Math.max(0,Wi(v)),z=Math.max(0,M-ae);return{sold:M,planned:ae,realized:Y,amt:P,remaining:z}},[m,I,U,v]),je=_.useMemo(()=>!(!h||de.sold<=0||de.planned<0||de.planned>de.sold||de.realized<0||de.realized>de.planned||de.amt<0),[h,de]),ue=_.useMemo(()=>yw(G?.competencesRequired,J),[G,J]),Q=async M=>{if(M.preventDefault(),!!je){L(!0),H(null);try{const ae=E||S||null,Y={articleId:h,soldQuantity:de.sold,amount:de.amt,consultantId:w||null,plannedStartDate:S||null,plannedEndDate:ae,plannedQuantity:de.planned,realizedQuantity:de.realized};await n(Y),ee(!0),setTimeout(()=>r(),450)}catch(ae){H(ae?.message??"Erreur lors de l'enregistrement.")}finally{L(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsxs(Ve,{isOpen:o,onClose:r,title:u?"Modifier une ligne":"Ajouter une ligne",size:"lg",children:[te&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-700 border border-red-200",children:te}),s.jsxs("form",{onSubmit:Q,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Article *"}),s.jsxs("select",{value:h,onChange:M=>p(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner"}),a.map(M=>s.jsxs("option",{value:M.id,children:[M.name,"  ",M.service]},M.id))]}),G?.competencesRequired?.length?s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:G.competencesRequired.map(M=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:M},M))}):s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Aucune comptence requise."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantit vendue *"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:m,onChange:M=>g(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Montant"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:v,onChange:M=>j(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reste  planifier"}),s.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:de.remaining})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Ressource"}),s.jsxs("select",{value:w,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Non attribue"}),c.map(M=>s.jsxs("option",{value:M.id,children:[M.name,"  ",M.service]},M.id))]}),w&&G?s.jsxs("div",{className:"text-xs mt-1 text-gray-600",children:["Matching comptences : ",s.jsxs("span",{className:"text-gray-900",children:[ue,"%"]})]}):null]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date prvue (dbut)"}),s.jsx("input",{type:"date",value:S,onChange:M=>C(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date prvue (fin)"}),s.jsx("input",{type:"date",value:E,onChange:M=>T(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantit planifie"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:I,onChange:M=>D(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Doit tre  quantit vendue."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantit ralise"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:U,onChange:M=>$(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Doit tre  quantit planifie."})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",disabled:F,children:"Annuler"}),s.jsx("button",{type:"submit",disabled:!je||F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Enregistrement":u?"Mettre  jour":"Ajouter"})]})]})]}),X&&s.jsx(He,{message:u?"Ligne mise  jour":"Ligne ajoute",type:"success",onClose:()=>ee(!1)})]})}function zh(o){try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(o||0)}catch{return`${(o||0).toFixed(2)} `}}function vw(o){return{devis_en_cours:"Devis en cours",commande_receptionnee:"Commande rceptionne",attente_affectation_dp:"En attente d'affectation de DP",en_cours_deploiement:"En cours de dploiement",facture:"Factur",paye:"Pay",termine:"Termin"}[o]??o}function xw(o){return{devis_en_cours:"bg-gray-100 text-gray-700",commande_receptionnee:"bg-blue-50 text-blue-700",attente_affectation_dp:"bg-amber-50 text-amber-700",en_cours_deploiement:"bg-indigo-50 text-indigo-700",facture:"bg-purple-50 text-purple-700",paye:"bg-green-50 text-green-700",termine:"bg-green-100 text-green-700"}[o]??"bg-gray-100 text-gray-700"}function ww({isOpen:o,onClose:r,project:n,articles:a,consultants:c}){const[u,h]=_.useState(!1),[p,m]=_.useState(null),[g,v]=_.useState([]),[j,w]=_.useState(!1),[b,S]=_.useState(void 0),[C,E]=_.useState(""),[T,I]=_.useState(!1),D=async()=>{h(!0),m(null);try{const X=await vx(n.id);v(X)}catch(X){m(X?.message??"Erreur de chargement.")}finally{h(!1)}};_.useEffect(()=>{o&&D()},[o,n.id]);const U=_.useMemo(()=>{const X=g.reduce((de,je)=>de+(je.amount||0),0),ee=g.reduce((de,je)=>de+(je.soldQuantity||0),0),G=g.reduce((de,je)=>de+(je.plannedQuantity||0),0),J=g.reduce((de,je)=>de+(je.realizedQuantity||0),0);return{amount:X,sold:ee,planned:G,realized:J,remaining:Math.max(0,ee-G)}},[g]),$=async X=>{await xx(n.id,X),await D(),E("Ligne ajoute"),I(!0)},F=async X=>{b&&(await wx(b.id,X),await D(),S(void 0),E("Ligne mise  jour"),I(!0))},L=async X=>{confirm("Supprimer cette ligne ?")&&(await bx(X),await D(),E("Ligne supprime"),I(!0))},te=async X=>{confirm("Crer une nouvelle ligne avec le reliquat non planifi ?")&&(await jx(X.id),await D(),E("Reliquat report"),I(!0))},H=_.useMemo(()=>{const X=[n.clientContactName,n.clientContactEmail,n.clientContactPhone].filter(Boolean);return X.length?X.join("  "):""},[n]);return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:n.name,size:"xl",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-5",children:s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Client"}),s.jsxs("div",{className:"text-gray-900",children:[n.clientNumber,"  ",n.clientName]}),s.jsx("div",{className:"text-gray-600 text-sm",children:n.clientAddress||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Interlocuteur"}),s.jsx("div",{className:"text-gray-900",children:H})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Commercial"}),s.jsx("div",{className:"text-gray-900",children:n.commercialName||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Directeur de projet"}),s.jsx("div",{className:"text-gray-900",children:n.projectManagerName||"Non affect"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Commande"}),s.jsx("div",{className:"text-gray-900",children:n.orderDate||""}),s.jsx("div",{className:"text-gray-600 text-sm",children:n.salesType||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"tat"}),s.jsx("div",{className:`inline-flex px-3 py-1 rounded-full text-sm ${xw(n.status)}`,children:vw(n.status)})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Montant total"}),s.jsx("div",{className:"text-gray-900",children:zh(U.amount)})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Qt vendue"}),s.jsx("div",{className:"text-gray-900",children:U.sold})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Qt planifie"}),s.jsx("div",{className:"text-gray-900",children:U.planned})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Qt ralise"}),s.jsx("div",{className:"text-gray-900",children:U.realized})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Reste  planifier"}),s.jsx("div",{className:"text-gray-900",children:U.remaining})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:"Lignes (articles)"}),s.jsx("div",{className:"text-gray-500 text-sm",children:"Planification et suivi par prestation vendue"})]}),s.jsxs("button",{type:"button",onClick:()=>w(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(at,{className:"w-4 h-4"}),"Ajouter une ligne"]})]}),u?s.jsx("div",{className:"p-6 text-gray-600",children:"Chargement"}):p?s.jsx("div",{className:"p-6 text-red-700 bg-red-50 border-t border-red-200",children:p}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Article"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Qt vendue"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Montant"}),s.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Ressource"}),s.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Dates prvues"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Qt planifie"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Qt ralise"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Reste"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map(X=>{const ee=Math.max(0,(X.soldQuantity||0)-(X.plannedQuantity||0)),G=(X.plannedQuantity||0)>0&&ee>0;return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsxs("td",{className:"px-4 py-3 text-gray-900",children:[s.jsx("div",{className:"text-gray-900",children:X.articleName}),s.jsx("div",{className:"text-xs text-gray-500",children:X.articleService||""})]}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:X.soldQuantity}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:zh(X.amount)}),s.jsx("td",{className:"px-4 py-3 text-gray-700",children:X.consultantName||""}),s.jsx("td",{className:"px-4 py-3 text-gray-700",children:X.plannedStartDate?s.jsxs("span",{children:[X.plannedStartDate,X.plannedEndDate&&X.plannedEndDate!==X.plannedStartDate?`  ${X.plannedEndDate}`:""]}):""}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:X.plannedQuantity}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:X.realizedQuantity}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:ee}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[G&&s.jsx("button",{type:"button",onClick:()=>void te(X),className:"p-2 text-amber-700 hover:bg-amber-50 rounded-lg",title:"Reporter le reliquat",children:s.jsx(N0,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>S(X),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>void L(X.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},X.id)})})]}),g.length===0&&s.jsx("div",{className:"py-10 text-center text-gray-500",children:"Aucune ligne pour ce projet"})]})]})]})}),s.jsx(Uh,{isOpen:j,onClose:()=>w(!1),onSave:$,articles:a,consultants:c}),b&&s.jsx(Uh,{isOpen:!!b,onClose:()=>S(void 0),onSave:F,articles:a,consultants:c,line:b}),T&&s.jsx(He,{message:C,type:"success",onClose:()=>I(!1)})]})}const Fh={devis_en_cours:"Devis en cours",commande_receptionnee:"Commande rceptionne",attente_affectation_dp:"En attente d'affectation de DP",en_cours_deploiement:"En cours de dploiement",facture:"Factur",paye:"Pay",termine:"Termin"};function bw(o){return{devis_en_cours:"bg-gray-100 text-gray-700",commande_receptionnee:"bg-blue-50 text-blue-700",attente_affectation_dp:"bg-amber-50 text-amber-700",en_cours_deploiement:"bg-indigo-50 text-indigo-700",facture:"bg-purple-50 text-purple-700",paye:"bg-green-50 text-green-700",termine:"bg-green-100 text-green-700"}[o]??"bg-gray-100 text-gray-700"}function jw(){const[o,r]=_.useState([]),[n,a]=_.useState([]),[c,u]=_.useState([]),[h,p]=_.useState(!0),[m,g]=_.useState(null),[v,j]=_.useState(""),[w,b]=_.useState(""),[S,C]=_.useState(!1),[E,T]=_.useState(void 0),[I,D]=_.useState(void 0),[U,$]=_.useState(""),[F,L]=_.useState(!1),te=async()=>{p(!0),g(null);try{const[ee,G,J]=await Promise.all([px(),op(),Jl()]);r(ee),a(G),u(J)}catch(ee){g(ee?.message??"Erreur de chargement.")}finally{p(!1)}};_.useEffect(()=>{te()},[]);const H=_.useMemo(()=>{const ee=v.trim().toLowerCase();return o.filter(G=>{const J=!ee||G.name.toLowerCase().includes(ee)||G.clientName.toLowerCase().includes(ee)||(G.clientNumber??"").toLowerCase().includes(ee)||(G.projectManagerName??"").toLowerCase().includes(ee)||(G.commercialName??"").toLowerCase().includes(ee),de=!w||G.status===w;return J&&de})},[o,v,w]),X=async ee=>{confirm("Supprimer ce projet ?")&&(await yx(ee),await te(),$("Projet supprim"),L(!0))};return h?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):m?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:m}),s.jsx("button",{type:"button",onClick:()=>void te(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un projet, client, commercial",value:v,onChange:ee=>j(ee.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ll,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:w,onChange:ee=>b(ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Tous les tats"}),Object.entries(Fh).map(([ee,G])=>s.jsx("option",{value:ee,children:G},ee))]})]})]}),s.jsxs("button",{type:"button",onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Nouveau projet"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Projet"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Commercial"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"DP"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Commande"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"tat"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(ee=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 text-gray-900",children:ee.name}),s.jsxs("td",{className:"px-6 py-4 text-gray-700",children:[s.jsx("div",{className:"text-gray-900",children:ee.clientNumber}),s.jsx("div",{className:"text-sm text-gray-500",children:ee.clientName})]}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:ee.commercialName||""}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:ee.projectManagerName||"Non affect"}),s.jsxs("td",{className:"px-6 py-4 text-gray-700",children:[s.jsx("div",{children:ee.orderDate||""}),s.jsx("div",{className:"text-sm text-gray-500",children:ee.salesType||""})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm ${bw(ee.status)}`,children:Fh[ee.status]??ee.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>D(ee),className:"p-2 text-blue-700 hover:bg-blue-50 rounded-lg",title:"Ouvrir",children:s.jsx(Gh,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>T(ee),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>void X(ee.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},ee.id))})]})}),H.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucun projet trouv"})]}),s.jsx(Al,{isOpen:S,onClose:()=>C(!1),onSaved:async()=>{await te(),$("Projet cr"),L(!0)}}),E&&s.jsx(Al,{isOpen:!!E,onClose:()=>T(void 0),project:E,onSaved:async()=>{await te(),$("Projet mis  jour"),L(!0)}}),I&&s.jsx(ww,{isOpen:!!I,onClose:()=>D(void 0),project:I,articles:n,consultants:c}),F&&s.jsx(He,{message:U,type:"success",onClose:()=>L(!1)})]})}function _w(){const[o,r]=_.useState("portfolio"),[n,a]=_.useState("checking"),[c,u]=_.useState(null);_.useEffect(()=>{(async()=>{try{const{data:p,error:m}=await le.auth.getSession();if(m)throw m;console.log("Supabase session:",p.session);const{data:g,error:v}=await le.auth.getUser();v?console.log("Supabase getUser (non bloquant):",v.message):console.log("Supabase user:",g.user),a("ok"),u(null)}catch(p){console.error("Supabase init error:",p),a("error"),u(p?.message??"Erreur Supabase inconnue.")}})()},[]);const h=()=>{switch(o){case"portfolio":return s.jsx(Ph,{});case"projects":return s.jsx(jw,{});case"planning":return s.jsx(fw,{});case"resources":return s.jsx(Xx,{});case"clients":return s.jsx(gw,{});case"competences":return s.jsx(ow,{});case"articles":return s.jsx(rw,{});case"reporting":return s.jsx(pw,{});case"administration":return s.jsx(hw,{});default:return s.jsx(Ph,{})}};return n==="error"?s.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center p-6",children:s.jsxs("div",{className:"max-w-xl w-full bg-white border rounded-lg p-6",children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Configuration Supabase invalide"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Vrifiez que vous avez bien dfini"," ",s.jsx("code",{className:"px-1 py-0.5 bg-gray-100 rounded",children:"VITE_SUPABASE_URL"})," ","et"," ",s.jsx("code",{className:"px-1 py-0.5 bg-gray-100 rounded",children:"VITE_SUPABASE_ANON_KEY"})," ","dans les variables denvironnement (GitHub Actions / Secrets si vous dployez via Pages)."]}),s.jsx("div",{className:"mt-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded p-3",children:c})]})}):s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsx(I0,{currentPage:o,onNavigate:r}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Sx,{currentPage:o}),s.jsxs("main",{className:"flex-1 overflow-y-auto",children:[n==="checking"&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-600 border-b bg-white",children:"Connexion  Supabase"}),h()]})]})]})}mg.createRoot(document.getElementById("root")).render(s.jsx(_w,{}));
